function IDD(a,b,c){void 0==Number.MAX_SAFE_INTEGER&&(Number.MAX_SAFE_INTEGER=9007199254740991),f={MinSizeToShow:1,Padding:20,maxTickArrangeIterations:5,tickLength:10,minLabelSpace:60,minTickSpace:5,minLogOrder:4,minNumOrder:5,TooltipDelay:1,TooltipDuration:10,CssPrefix:"",ZIndexNavigationLayer:1e3,ZIndexDOMMarkers:1500,ZIndexTooltipLayer:2e3,MaxInteger:9007199254740991,HeatmapworkerPath:void 0,factory:{}},f=f||{},f.Utils={applyMask:function(a,b,c){for(var d=a.length,e=new Array(c),f=0,g=0;f<d;f++)0===a[f]&&(e[g++]=b[f]);return e},maskNaN:function(a,b){for(var c=a.length;--c>=0;){var d=b[c];d!=d&&(a[c]=1)}},isArray:function(a){return a instanceof Array||a instanceof Float64Array||a instanceof Float32Array||a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array},isOrderedArray:function(a){if(a.length<=1)return!0;if(isNaN(a[1]))return!1;if(isNaN(a[2]))return!1;for(var b=a[1]-a[0],c=2;c<a.length;c++){var d=a[c]-a[c-1];if(b*d<0)return!1}return!0},cutArray:function(a,b){if(void 0==a)return a;if(a.length>b){for(var c=new Array(b),d=0;d<b;d++)c[d]=a[d];return c}return a},intersect:function(a,b){if(a&&b){var c=Math.max(a.x,b.x),d=Math.min(a.x+a.width,b.x+b.width),e=Math.max(a.y,b.y),f=Math.min(a.y+a.height,b.y+b.height);return d>=c&&f>=e?{x:c,y:e,width:d-c,height:f-e}:void 0}},includes:function(a,b){return!(!a||!b)&&(a.x<=b.x&&a.x+a.width>=b.x+b.width&&a.y<=b.y&&a.y+a.height>=b.y+b.height)},equalRect:function(a,b){return!(!a||!b)&&(a.x==b.x&&a.width==b.width&&a.y==b.y&&a.height==b.height)},calcCSWithPadding:function(a,b,c,d){var e={left:c.left,top:c.top,width:b.width-c.left-c.right,height:b.height-c.top-c.bottom};return new f.CoordinateTransform(a,e,d)},requestAnimationFrame:function(a,b){setTimeout(a,1e3/60,b)},range:function(a,b){var c=b-a+1;if(c<=0)return[];for(var d=new Array(c),e=0;e<c;e++)d[e]=e;return d},arrangeDiv:function(a,b){a.width(b.width),a.height(b.height)},unionRects:function(a,b){if(void 0===a)return void 0===b?void 0:{x:b.x,y:b.y,width:b.width,height:b.height};if(void 0===b)return void 0===a?void 0:{x:a.x,y:a.y,width:a.width,height:a.height};var c=Math.min(a.x,b.x),d=Math.min(a.y,b.y),e=Math.max(a.x+a.width,b.x+b.width),f=Math.max(a.y+a.height,b.y+b.height);return{x:c,y:d,width:e-c,height:f-d}},readStyle:function(a,b){var c=a.attr("data-idd-style");if(c){for(var d=c.split(";"),e=d.length,f=0;f<e;f++){var g=d[f].split(":",2);if(g&&2===g.length){var h=g[0].trim(),i=g[1].trim();b[h]=i}}return b}},getDataSourceFunction:function(a,b){var c=a.attr("data-idd-datasource");return c?function(){return JSON.parse(c,function(a,b){return null===b?NaN:b})}:b},makeNonEqual:function(a){return a.min==a.max?0==a.min?{min:-1,max:1}:a.min>0?{min:.9*a.min,max:1.1*a.min}:{min:1.1*a.min,max:.9*a.min}:a},getMinMax:function(a){if(a&&0!==a.length){for(var b,c,d,e=a.length,f=0;f<e;f++)if(d=a[f],d==d){b=c=d;break}for(f++;f<e;f++)d=a[f],d==d&&(d<b?b=d:d>c&&(c=d));return{min:b,max:c}}},getMin:function(a){if(a&&0!==a.length){for(var b,c,d=a.length,e=0;e<d;e++)if(c=a[e],c==c){b=c;break}for(e++;e<d;e++)c=a[e],c==c&&c<b&&(b=c);return b}},getMax:function(a){if(a&&0!==a.length){for(var b,c,d=a.length,e=0;e<d;e++)if(c=a[e],c==c){b=c;break}for(e++;e<d;e++)c=a[e],c==c&&c>b&&(b=c);return b}},getMinMaxForPair:function(a,b){if(a&&0!==a.length){if(!b||a.length!==b.length)throw"Arrays should be equal";for(var c,d,e,f,g,h,i=a.length,j=0;j<i;j++)if(g=a[j],h=b[j],!isNaN(g)&&!isNaN(h)){c=d=g,e=f=h;break}for(j++;j<i;j++)g=a[j],h=b[j],isNaN(g)||isNaN(h)||(g<c?c=g:g>d&&(d=g),h<e?e=h:h>f&&(f=h));return{minx:c,maxx:d,miny:e,maxy:f}}},enumPlots:function(a){var b=[],c=function(a,b){b.push(a),a.children&&a.children.forEach(function(a){c(a,b)})};return c(a,b),b.sort(function(a,b){return b.order-a.order}),b},reorder:function(a,b,c){a.master?f.Utils.enumPlots(a.master):f.Utils.enumPlots(a);a.order=c?b.order:b.order+1;var d=function(a,b){a.order>=b.order&&a!=b&&a.order<f.MaxInteger&&(a.order+=1),a.children&&a.children.forEach(function(a){d(a,b)})};d(a.master,a)},getMaxOrder:function(a){var b=a&&a.order!=f.MaxInteger?a.order:0;return a&&a.children&&a.children.forEach(function(a){var c=f.Utils.getMaxOrder(a);c!=f.MaxInteger&&(b=Math.max(b,c))}),b},getBoundingBoxForArrays:function(a,b,c,d){var e=void 0;if(a&&b){var g=f.Utils.getMinMaxForPair(a,b);if(g){c&&(g.minx=c(g.minx),g.maxx=c(g.maxx)),d&&(g.miny=d(g.miny),g.maxy=d(g.maxy));var h=Math.min(g.minx,g.maxx),i=Math.abs(g.maxx-g.minx),j=Math.min(g.miny,g.maxy),k=Math.abs(g.maxy-g.miny);e={x:h,y:j,width:i,height:k}}}return e},getIEVersion:function(){var a=window.navigator.userAgent,b=a.indexOf("MSIE");return b>0?parseInt(a.substring(b+5,a.indexOf(".",b))):navigator.userAgent.match(/Trident\/7\./)?11:0}},f=f||{},f.Binding=f.Binding||{},function(){var a=[],b=[],c=[],d=[],e=function(a,b,c){for(var d=0,e=a.length;d<e;d++){var f=a[d];if(!(f.plot1!==b&&f.plot1!==c||f.plot2!==b&&f.plot2!==c))return d}return-1},g=function(a,b){var c=[];b=b.slice(0);for(var d=[a];d.length>0;){var e=d.shift();e!=a&&c.indexOf(e)<0&&c.push(e);for(var f=b.length;--f>=0;){var g=b[f],h=null;g.plot1===e?h=g.plot2:g.plot2===e&&(h=g.plot1),h&&(d.push(h),b.splice(f,1))}}return c},h=function(a,b){for(var c=[],d=0,e=a.length;d<e;d++){var f=a[d];c.indexOf(f.plot1)<0&&c.push(f.plot1),c.indexOf(f.plot2)<0&&c.push(f.plot2)}b.splice(0);for(var d=0,e=c.length;d<e;d++){var h=g(c[d],a);b.push({plot:c[d],reachable:h})}};f.Binding.bindPlots=function(g,i,j){if(void 0==j||"vh"==j){var k=f.Binding.bindPlots(g,i,"v"),l=f.Binding.bindPlots(g,i,"h"),m=!1;return{destroy:function(){m||(k.destroy(),l.destroy(),m=!0)}}}if("v"!=j&&"h"!=j)throw"Parameter filter is incorrect";if(!g)throw"plot1 is incorrect";if(!i)throw"plot2 is incorrect";if(g=g.master,i=i.master,g===i)throw"plot1 equals plot2";var n="v"==j?b:a,o=e(n,g,i);if(o>=0)return n[o].binding;var p="v"==j?d:c,m=!1,q={plot1:g,plot2:i,binding:{destroy:function(){if(!m){var a=e(n,g,i);a&&n.splice(a,1),h(n,p),m=!0}}}};return n.push(q),h(n,p),g.requestUpdateLayout(),q.binding},f.Binding.getBoundPlots=function(a){for(var b={h:[],v:[]},e=0,f=c.length;e<f;e++)if(c[e].plot===a){b.h=c[e].reachable;break}for(var e=0,f=d.length;e<f;e++)if(d[e].plot===a){b.v=d[e].reachable;break}return b}}(),f.AdaptiveFormatter=function(a,b){var c=function(a){var b=d(a),c=a.map(function(a){var c=a-b,d=c*c;return d}),e=d(c),f=Math.sqrt(e);return f},d=function(a){for(var b=0,c=0,d=0;d<a.length;d++)isNaN(a[d])||(b+=a[d],++c);return 0!=c?b/c:NaN},e=function(a){if(a>=0){for(var b=1,c=0;c<a;c++)b*=10;return b}for(var b=1,c=0;c<-a;c++)b*=.1;return b};this.getPrintFormat=function(a,b,c){var d=2,f=Math.max(Math.abs(a),Math.abs(b));if(f===1/0||c===1/0||c===-(1/0)||isNaN(f)||isNaN(c))return{toString:function(a){return a}};var g,h=Math.LN10,i=f>1e-12?Math.log(f)/h:0;if(g=c>1e-12?Math.floor(Math.log(c)/h)-d:Math.floor(i-d),g<0){var j=Math.floor(i);if(g<=-2&&j<=-4){var k=e(-j),l=j;return{toString:function(a){return l>0?(a*k).toFixed(-g+j)+"e+"+l:(a*k).toFixed(-g+j)+"e"+l},exponent:j}}return{toString:function(a){return a.toFixed(-g)}}}if(g>=2&&i>5){var k=e(-g-d),l=g+d;return{toString:function(a){return l>0?(a*k).toFixed(d)+"e+"+l:(a*k).toFixed(d)+"e"+l},exponent:g+d}}return{toString:function(a){var b=a.toFixed();return a!=b&&(b+="."),b}}};var g,h,i;if(void 0!==a&&void 0!==b)h=a,i=b,g=(i-h)/4;else if(void 0!==a&&void 0===b){var j=f.Utils.getMinMax(a);h=j.min,i=j.max,g=c(a)}return this.getPrintFormat(h,i,g)},f.register=function(a,b){if(!a)throw"key is undefined";if(!b)throw"factory is undefined";f.factory[a]=b};(function(){"use strict";var b=navigator.userAgent.toLowerCase();b.indexOf("firefox")>=0?f.CssPrefix="-moz":(b.indexOf("chrome")>=0||b.indexOf("safari")>=0)&&(f.CssPrefix="-webkit"),window.requestAnimationFrame?f.Utils.requestAnimationFrame=function(a){return window.requestAnimationFrame(a)}:window.msRequestAnimationFrame?f.Utils.requestAnimationFrame=function(a){return window.msRequestAnimationFrame(a)}:window.webkitRequestAnimationFrame?f.Utils.requestAnimationFrame=function(a){return window.webkitRequestAnimationFrame(a)}:window.mozRequestAnimationFrame?f.Utils.requestAnimationFrame=function(a){return window.mozRequestAnimationFrame(a)}:window.oRequestAnimationFrame&&(f.Utils.requestAnimationFrame=function(a){return window.oRequestAnimationFrame(a)});var c=function(b,d){if("undefined"!=typeof Modernizr&&b&&(Modernizr.canvas?Modernizr.borderradius?Modernizr.boxshadow?Modernizr.csstransforms?Modernizr.hsla?Modernizr.rgba||b.replaceWith('<div">Browser does not support rgba colors</div>'):b.replaceWith('<div">Browser does not support hsla colors</div>'):b.replaceWith('<div">Browser does not support 2d css transformations</div>'):b.replaceWith('<div">Browser does not support "box-shadow" style property</div>'):b.replaceWith('<div">Browser does not support "border-radius" style property</div>'):b.replaceWith('<div">Browser does not support HTML5 canvas</div>')),b.hasClass("idd-plot-master")||b.hasClass("idd-plot-dependant"))throw"The div element already is initialized as a plot";var e=void 0,g=b.attr("data-idd-plot");switch(g){case"plot":e=new f.Plot(b,d),e.order=f.MaxInteger;break;case"polyline":e=new f.Polyline(b,d);break;case"dom":e=new f.DOMPlot(b,d),e.order=f.MaxInteger;break;case"label":e=new f.LabelPlot(b,d),e.order=f.MaxInteger;break;case"figure":e=new f.Figure(b,d);break;case"chart":e=new f.Chart(b,d);break;case"grid":e=new f.GridlinesPlot(b,d);break;case"markers":e=new f.Markers(b,d);break;case"area":e=new f.Area(b,d);break;case"bingMaps":e=new f.BingMapsPlot(b,d)}var h=window.MutationObserver||window.WebKitMutationObserver;if(h){var i=new h(function(b,f){b.forEach(function(b){var f=b.addedNodes,g=b.removedNodes;if(f.length>0)for(var h=0;h<f.length;h++){var i=a(f[h]);i.attr("data-idd-plot")&&(i.removeClass("idd-plot-master").removeClass("idd-plot-dependant"),e.addChild(c(i,d)))}if(g.length>0)for(var h=0;h<g.length;h++){var j=g[h];if("function"==typeof j.getAttribute){var k=j.getAttribute("data-idd-plot");null!=k&&e.removeChild(j.plot)}}})});i.observe(b[0],{subtree:!1,characterData:!1,attributes:!1,childList:!0,attributeOldValue:!1,characterDataOldValue:!1})}else console.warn("MutationObservers are not supported by the browser. DOM changes are not tracked by IDD");if(e)return e;var j=f.factory[g];if(j)return j(b,d);throw"Unknown plot type"};f.asPlot=function(b){if(!b)throw"Plot must be attached to div!";var d;if(void 0!==b.tagName&&"div"===b.tagName.toLowerCase())d=a(b);else if("string"==typeof b){if(d=a("#"+b),0===d.length)throw"There is no element with id "+b;b=d[0]}else{if(!(b instanceof jQuery&&b.is("div")))throw"Invalid input parameter! It should be div of id of div of jQuery of div";d=b,b=b[0]}if(void 0!==b.plot)return b.plot;var e=c(d);return e},f.tryGetMasterPlot=function(a){if(a&&a.hasClass("idd-plot-master")){var b=a.get(0);return"plot"in b?b.plot:null}return null},f.updateLayouts=function(a){var b=f.tryGetMasterPlot(a);if(b)b.updateLayout();else for(var c=a.children(),d=0;d<c.length;d++)f.updateLayouts(c.eq(d))},f.Event=f.Event||{},f.Event.appearanceChanged=jQuery.Event("appearanceChanged"),f.Event.childrenChanged=jQuery.Event("childrenChanged"),f.Event.isAutoFitChanged=jQuery.Event("isAutoFitEnabledChanged"),f.Event.visibleRectChanged=jQuery.Event("visibleRectChanged"),f.Event.isVisibleChanged=jQuery.Event("visibleChanged"),f.Event.plotRemoved=jQuery.Event("plotRemoved"),f.Event.orderChanged=jQuery.Event("orderChanged"),f.Plot=function(b,d,e){if(!b||!b.hasClass("idd-plot-master")&&!b.hasClass("idd-plot-dependant")){b&&(b[0].addEventListener("touchstart",function(a){a.preventDefault()},!1),b[0].addEventListener("touchmove",function(a){a.preventDefault()},!1));var g,h,i,j,k,l,m=void 0===d&&void 0!==b,n=d||this,o=b,p=e||o,q=m?new f.CoordinateTransform:void 0,r=[],s=!0,t=!0,u=!1,v=!1,w=!1,x=!0,y=!1,z="",A=0,B={},C=!1;b&&(z=b.attr("data-idd-name")||b.attr("id")||"",b[0].plot=this,b.attr("unselectable","on").addClass("unselectable").on("selectstart",!1)),m&&(this._sharedCanvas=void 0);var D,E=!1;this.requestsRender=!1,this.isInAnimation=!1,this.isAnimationFrameRequested=!1;var F=!1;m&&(this.requestsUpdateLayout=!1);var G=void 0,H=this;Object.defineProperty(this,"isMaster",{get:function(){return m},configurable:!1}),Object.defineProperty(this,"isRendered",{get:function(){return E},configurable:!1}),Object.defineProperty(this,"flatRendering",{get:function(){return m?y:d.flatRendering},set:function(a){return m?void(y!==a&&(y=a,H.requestUpdateLayout())):void(d.flatRendering=a)}}),Object.defineProperty(this,"master",{get:function(){return n},configurable:!1}),Object.defineProperty(this,"host",{get:function(){return o},configurable:!1}),Object.defineProperty(this,"centralPart",{get:function(){return p},configurable:!1}),Object.defineProperty(this,"name",{get:function(){return z},set:function(a){z!==a&&(z=a,this.fireAppearanceChanged("name"))},configurable:!1}),Object.defineProperty(this,"children",{get:function(){return r.slice(0)},configurable:!1}),Object.defineProperty(this,"screenSize",{get:function(){return m?{width:j,height:k}:n.screenSize},configurable:!1}),Object.defineProperty(this,"xDataTransform",{get:function(){return g},set:function(a){g=a,this.onDataTransformChanged("x")},configurable:!1}),Object.defineProperty(this,"yDataTransform",{get:function(){return h},set:function(a){h=a,this.onDataTransformChanged("y")},configurable:!1}),Object.defineProperty(this,"coordinateTransform",{get:function(){return m?q.clone():n.coordinateTransform},configurable:!1}),Object.defineProperty(this,"doFitOnDataTransformChanged",{get:function(){return m?x:n.doFitOnDataTransformChanged},set:function(a){m?x=a:n.doFitOnDataTransformChanged=a},configurable:!1}),Object.defineProperty(this,"aspectRatio",{get:function(){return m?i:n.aspectRatio},set:function(a){m?(i=a,this.updateLayout()):n.aspectRatio=a},configurable:!1}),Object.defineProperty(this,"isAutoFitEnabled",{get:function(){return m?t:n.isAutoFitEnabled},set:function(a){if(m){if(t===a)return;t=a,t?this.requestUpdateLayout():l=H.visibleRect,this.host.trigger(f.Event.isAutoFitChanged)}else n.isAutoFitEnabled=a},configurable:!1}),Object.defineProperty(this,"isVisible",{get:function(){return s},set:function(a){s!==a&&(s=a,this.onIsVisibleChanged(),this.fireVisibleChanged(this))},configurable:!1}),Object.defineProperty(this,"order",{get:function(){return A},set:function(a){A!==a&&(A=a)},configurable:!1}),Object.defineProperty(this,"visibleRect",{get:function(){return m?q.getPlotRect({x:0,y:0,width:j,height:k}):n.visibleRect},configurable:!1});var I=void 0;Object.defineProperty(this,"mapControl",{get:function(){return m?I:n.mapControl},configurable:!1});var J=void 0;Object.defineProperty(this,"tooltipSettings",{get:function(){return m?J:n.tooltipSettings},set:function(a){m?J=a:n.tooltipSettings=a},configurable:!1});var K=!0;Object.defineProperty(this,"isToolTipEnabled",{get:function(){return m?K:n.isToolTipEnabled},set:function(a){m?K=a:n.isToolTipEnabled=a},configurable:!1}),Object.defineProperty(this,"titles",{get:function(){return a.extend({},B)},set:function(a){this.setTitles(a,!1)}}),this.selfMapRefresh=function(){if(m){if(void 0!==this.map){if(void 0!==I)throw"Plot composition can have only 1 map!";I=this.map,this.requestUpdateLayout()}if(this.constraint){if(void 0!==G)throw"Plot composition can have only 1 constraint function!";G=this.constraint}}},this.getTitle=function(a){return"undefined"!=typeof B&&"undefined"!=typeof B[a]?B[a]:a},this.setTitles=function(a,b){B=a,b||this.fireAppearanceChanged()},this.destroy=function(){this.host.removeClass("idd-plot")},this.remove=function(){void 0!==this.map&&this.master.removeMap(),this.isMaster||this.master.removeChild(this),this.firePlotRemoved(this),this.host.remove()},this.removeMap=function(){m&&(I=void 0,G=void 0,this.navigation.animation=new f.PanZoomAnimation,this.fitToView())},this.addChild=function(a){if(!a)throw"Child plot is undefined";if(a.master&&a.master!==a&&a.master!==this.master)throw"Given child plot already added to another plot";if(a.master!==this.master&&a.onAddedTo(this.master),a.order=a.order==f.MaxInteger?a.order:f.Utils.getMaxOrder(this.master)+1,a.order<f.MaxInteger&&a.host.css("z-index",a.order),r.push(a),this.master._sharedCanvas&&(this.master._sharedCanvas.remove(),this.master._sharedCanvas=void 0),a.constraint){if(void 0!==G)throw"Plot composition can have only 1 constraint function!";G=a.constraint}if(void 0!==a.map){if(void 0!==I)throw"Plot composition can have only 1 map!";I=a.map}this.fireChildrenChanged({type:"add",plot:a}),this.onChildrenChanged({type:"add",plot:a}),this.requestUpdateLayout()},this.onChildrenChanged=function(a){},this.onAddedTo=function(a){n=a,m=this===a;for(var c=r.length;--c>=0;)r[c].onAddedTo(a);m?b.addClass("idd-plot-master").removeClass("idd-plot-dependant"):b.removeClass("idd-plot-master").addClass("idd-plot-dependant")},this.removeChild=function(a){if(!a)throw"plot is undefined";for(var b,c=r.length;--c>=0;)if(b=r[c],b===a||b.name===a)return r.splice(c,1),b.onAddedTo(b),this.master._sharedCanvas&&(this.master._sharedCanvas.remove(),this.master._sharedCanvas=void 0),void 0!==b.constraint&&(G=void 0),void 0!==b.map&&(I=void 0),this.fireChildrenChanged({type:"remove",plot:b}),this.onChildrenChanged({type:"remove",plot:b}),this.requestUpdateLayout(),!0;for(c=r.length;--c>=0;)if(b=r[c],b.removeChild(a))return!0;return!1},this.getPlotsSequence=function(){for(var a=[H],b=r.length,c=0;c<b;c++){var d=r[c],e=d.getPlotsSequence();e.forEach(function(b){a.push(b)})}return a},this.getLocalBounds=function(a,b){return D||(D=this.computeLocalBounds(a,b)),D},this.computeLocalBounds=function(a,b){},this.invalidateLocalBounds=function(){var a=D;return D=void 0,a};this.aggregateBounds=function(){for(var a=H.getPlotsSequence(),b=void 0,c=[],d=a.length,e=0;e<d;e++){var g=a[e],h=g.getLocalBounds(1);void 0===h?c.push(g):b=f.Utils.unionRects(b,h)}d=c.length;for(var i=b,e=0;e<d;e++){var g=c[e];b=f.Utils.unionRects(b,g.getLocalBounds(2,i))}if(void 0!==b){var j=100;if(0===b.width){var k=Math.max(.1,Math.abs(b.x));b.x=b.x-k/(2*j),b.width=k/j}if(0===b.height){var l=Math.max(.1,Math.abs(b.y));b.y=b.y-l/(2*j),b.height=l/j}}var n=m&&void 0===b;return n&&(b=void 0!==I?{x:-180,y:-90,width:360,height:180}:{x:0,y:0,width:1,height:1}),{bounds:b,isDefault:n}},this.getLocalPadding=function(){return{left:0,right:0,top:0,bottom:0}},this.aggregatePadding=function(){for(var a=H.getLocalPadding()||{left:0,right:0,top:0,bottom:0},b=r.length,c=0;c<b;c++){var d=r[c],e=d.aggregatePadding();a={left:Math.max(a.left,e.left),right:Math.max(a.right,e.right),top:Math.max(a.top,e.top),bottom:Math.max(a.bottom,e.bottom)}}return a.left=a.left+f.Padding||f.Padding,a.right=a.right+f.Padding||f.Padding,a.top=a.top+f.Padding||f.Padding,a.bottom=a.bottom+f.Padding||f.Padding,a};var L=function(){if(n.flatRendering&&(F=!0,n._sharedCanvas&&(n._sharedCanvas._dirty=!0)),H.requestsUpdateLayout)H.requestsUpdateLayout=!1,H.isAnimationFrameRequested=!1,F=!0,H.updateLayout();else{H.isAnimationFrameRequested=!1;var a=H.screenSize,b=H.coordinateTransform.getPlotRect({x:0,y:0,width:a.width,height:a.height});M(F,n,b,a)}F=!1,R&&R()},M=function(a,b,c,d){if(b&&b.isVisible){(a||b.requestsRender)&&(b.requestsRender=!1,b.render(c,d));for(var e=b.children,f=e.length,g=0;g<f;g++){var h=e[g];M(a,h,c,d)}}};this.requestNextFrame=function(a){return a=a||this,m?(a.requestsRender=!0,void(this.isAnimationFrameRequested||(this.isAnimationFrameRequested=!0,F=!1,f.Utils.requestAnimationFrame(L)))):void n.requestNextFrame(a)},this.requestUpdateLayout=function(a){return m?(F=!0,C=a&&a.suppressNotifyBoundPlots,void(this.requestsUpdateLayout||(this.requestsUpdateLayout=!0,this.isAnimationFrameRequested||(this.isAnimationFrameRequested=!0,f.Utils.requestAnimationFrame(L))))):void n.requestUpdateLayout(a)},this.onIsVisibleChanged=function(){this.updateLayout()},this.onDataTranformChangedCore=function(a){},this.onDataTransformChanged=function(a){D=void 0,this.onDataTranformChangedCore(a),this.isAutoFitEnabled?this.master.requestUpdateLayout():this.doFitOnDataTransformChanged&&this.master.fitToView()},this.render=function(a,b){var c=this.getLocalBounds(),d=!1;if(c){var e=f.Utils.intersect(c,a);e&&(this.renderCore(a,b),d=!0)}else this.renderCore(a,b),d=!0;d!==E&&(E=d,this.onIsRenderedChanged())},this.renderCore=function(a,b){},this.exportToSvg=function(){if(!SVG.supported)throw"SVG is not supported";var a=H.screenSize,b=H.coordinateTransform.getPlotRect({x:0,y:0,width:a.width,height:a.height}),c=document.createElementNS("http://www.w3.org/2000/svg","svg"),d=SVG(c).size(o.width(),o.height());return H.exportContentToSvg(b,a,d),d},this.exportContentToSvg=function(a,b,c){for(var d=f.Utils.enumPlots(this),e=d.length-1;e>=0;e--)d[e].isVisible&&d[e].renderCoreSvg(a,b,c)},this.exportLegendToSvg=function(a){if(!SVG.supported)throw"SVG is not supported";for(var b,c=H.screenSize,d=(H.coordinateTransform.getPlotRect({x:0,y:0,width:c.width,height:c.height}),document.createElementNS("http://www.w3.org/2000/svg","svg")),e=SVG(d).size(200,o.height()),g=e.group(),h=f.Utils.enumPlots(this),i={width:170,height:0},j=0,k=0;k<h.length;k++){var l={width:170,height:0};if(void 0!=h[k].getLegend())if(h[k].isVisible){var m=g.group();a&&(l.legendDiv=a.children[j],j++),h[k].buildSvgLegend(l,m),m.translate(5,i.height),g.clipWith(m.rect(l.width,i.height+30)),i.height+=l.height+10,b=e.line(15,i.height,i.width,i.height).stroke({width:.3,color:"gray"}).back(),i.height+=10}else j++}return void 0!=b&&b.remove(),g.clipWith(g.rect(180,i.height+10)),e},this.renderCoreSvg=function(a,b,c){},this.buildSvgLegend=function(a,b){},this.onIsRenderedChanged=function(){},this.fit=function(a,b,c){j=a.width,k=a.height;var d=void 0;if(t||u){var e=n.aggregateBounds(),g=e.bounds;g.x==g.x&&g.y==g.y&&g.width==g.width&&g.height==g.height||(g={x:0,width:1,y:0,height:1}),l=g;var h=e.isDefault?{left:0,top:0,bottom:0,right:0}:n.aggregatePadding();q=f.Utils.calcCSWithPadding(l,a,h,n.aspectRatio),d=q.getPlotRect({x:0,y:0,width:a.width,height:a.height}),void 0!==G&&b===!0&&(d=G(d,a,!0),q=new f.CoordinateTransform(d,{left:0,top:0,width:j,height:k},n.aspectRatio))}else{var i=void 0,m=void 0,o=void 0,e=void 0;v!==!0&&w!==!0||(e=n.aggregateBounds(),o=e.isDefault?{left:0,top:0,bottom:0,right:0}:n.aggregatePadding()),v===!0&&(l.width=e.bounds.width,l.x=e.bounds.x,i=e.isDefault?{left:0,top:0,bottom:0,right:0}:o),w===!0&&(l.height=e.bounds.height,l.y=e.bounds.y,m=e.isDefault?{left:0,top:0,bottom:0,right:0}:o);var h=void 0;void 0===i&&void 0===m||(h={left:void 0!==i?i.left:0,top:void 0!==m?m.top:0,bottom:void 0!==m?m.bottom:0,right:void 0!==i?i.right:0}),q=void 0!==h?f.Utils.calcCSWithPadding(l,a,h,n.aspectRatio):new f.CoordinateTransform(l,{left:0,top:0,width:j,height:k},n.aspectRatio),d=q.getPlotRect({x:0,y:0,width:a.width,height:a.height}),void 0!==G&&b===!0&&(d=G(d,a,c),q=new f.CoordinateTransform(d,{left:0,top:0,width:j,height:k},n.aspectRatio)),l=d}return b&&(l=d),d},this.updateLayout=function(){if(this.requestsUpdateLayout=!1,m){var a=H.visibleRect,b={width:o.width(),height:o.height()};if(b.width<=1||b.height<=1)return;var c=H.screenSize.width!==b.width||H.screenSize.height!==b.height,d=this.measure(b,c);u=!1,v=!1,w=!1,H.arrange(d);var e=H.visibleRect;if(e.x===a.x&&e.y===a.y&&e.width===a.width&&e.height===a.height||H.fireVisibleRectChanged({visibleRect:e}),F=!0,L(),!C){var g=f.Binding.getBoundPlots(this),h=g.h.length,i=g.v.length;if(h>0||i>0){var j=H.coordinateTransform.getPlotRect({x:0,y:0,width:d.width,height:d.height});g.v=g.v.slice(0);for(var k=0;k<h;k++){var l=g.h[k],p=g.v.indexOf(l);if(p>=0)g.v[p]=null,l.navigation.setVisibleRect(j,!1,{suppressNotifyBoundPlots:!0});else{var q=l.visibleRect;q.x=j.x,q.width=j.width,l.navigation.setVisibleRect(q,!1,{suppressNotifyBoundPlots:!0})}}for(var k=0;k<i;k++){var l=g.v[k];if(null!=l){var q=l.visibleRect;q.y=j.y,q.height=j.height,l.navigation.setVisibleRect(q,!1,{suppressNotifyBoundPlots:!0})}}}}C=!1}else n.updateLayout()},this.measure=function(b,c){return void 0!==this.mapControl&&this.mapControl.setOptions({width:b.width,height:b.height}),this.fit(b,!0,c),o&&o.children("div").each(function(){var b=a(this);b.css("top",0),b.css("left",0)}),b},this.arrange=function(a){this.isMaster||f.Utils.arrangeDiv(this.host,a);for(var b=this.children,c=b.length,d=0;d<c;d++){var e=b[d];e.arrange(a)}};var N=function(a,b){H.isAutoFitEnabled&&(H.isAutoFitEnabled=!1),l=a,void 0!==b&&void 0!==b.syncUpdate&&b.syncUpdate===!0?H.updateLayout():H.requestUpdateLayout(b)};this.fitToView=function(){m?(this.isAutoFitEnabled=!1,this.navigation.stop(),u=!0,this.requestUpdateLayout()):n.fitToView()},this.fitToViewX=function(){m?(this.isAutoFitEnabled=!1,this.navigation.stop(),v=!0,this.requestUpdateLayout()):n.fitToViewX()},this.fitToViewY=function(){m?(this.isAutoFitEnabled=!1,this.navigation.stop(),w=!0,this.requestUpdateLayout()):n.fitToViewY()},this.requestNextFrameOrUpdate=function(){this.isAutoFitEnabled?this.master.requestUpdateLayout():this.master.requestNextFrame(this)};var O=function(a,b){for(var c=a.children,d=c.length,e=0;e<d;e++){var f=c[e];O(f,b)}b(a)};if(this.getTooltip=function(a,b,c,d){},m){var P,Q,R;this.enumAll=function(a,b){O(a,b)};var S=function(b,c){P=void 0,T();var d=function(){var a,b,d=[],e=c.x,g=c.y;return O(H,function(c){var h=c.xDataTransform?c.xDataTransform.plotToData(e):e,i=c.yDataTransform?c.yDataTransform.plotToData(g):g,j=c.getTooltip(h,i,e,g);if(j){if(h!==a||i!==b){a=h,b=i;var k=new f.AdaptiveFormatter(n.visibleRect.x,n.visibleRect.x+n.visibleRect.width),l=new f.AdaptiveFormatter(n.visibleRect.y,n.visibleRect.y+n.visibleRect.height);void 0!==J&&J.showCursorCoordinates===!1||d.push("<div class='idd-tooltip-coordinates'>"+k.toString(a)+", "+l.toString(b)+"</div>")}d.push(j)}}),d},e=d();if(0!==e.length){Q=a("<div></div>").addClass("idd-tooltip").hide().appendTo(H.host).css("position","absolute").css("left",b.x+15).css("top",b.y+15).css("z-index",f.ZIndexTooltipLayer);for(var g=e.length,h=0;h<g;h++)a(e[h]).appendTo(Q).addClass("idd-tooltip-item");R=function(){if(Q){Q.empty();var b=d();if(0===b.length)return 0;for(var c=b.length,e=0;e<c;e++)a(b[e]).appendTo(Q).addClass("idd-tooltip-item");return c}};var i=Q;Q.fadeIn("fast",function(){i.fadeOutTimer=setTimeout(function(){R=void 0,i.fadeOut("fast")},1e3*f.TooltipDuration)})}},T=function(){P&&(clearTimeout(P),P=void 0),R=void 0,Q&&(Q.fadeOutTimer&&(clearTimeout(Q.fadeOutTimer),Q.fadeOutTimer=void 0),Q.fadeOut("fast",function(){a(this).remove()}),Q=void 0)};p.mousemove(function(a){U=void 0;var b=f.Gestures.getXBrowserMouseOrigin(o,a),c=f.Gestures.getXBrowserMouseOrigin(p,a),d=H.coordinateTransform,e={x:d.screenToPlotX(c.x),y:d.screenToPlotY(c.y)};T(),H.master.isToolTipEnabled&&(P=setTimeout(function(){S(b,e)},1e3*f.TooltipDelay));var g=function(a,b,c){a.onMouseMove&&a.onMouseMove(b,c);for(var d=a.children,e=d.length,f=0;f<e;f++)g(d[f],b,c)};g(H,c,e)});var U;p.mousedown(function(a){T(),U=f.Gestures.getXBrowserMouseOrigin(p,a)}),p.mouseup(function(a){T();var b=f.Gestures.getXBrowserMouseOrigin(p,a);if(U&&U.x==b.x&&U.y==b.y){var c=H.coordinateTransform,d={x:c.screenToPlotX(b.x),y:c.screenToPlotY(b.y)},e=function(a,b,c){a.onClick&&a.onClick(b,c);for(var d=a.children,f=d.length,g=0;g<f;g++)e(d[g],b,c)};e(H,b,d)}}),p.mouseleave(function(a){T()})}else this.enumAll=n.enumAll;if(this.get=function(a){var b=function(a,c){if(c.name===a||c.host[0].id===a||c.host[0]===a)return c;for(var d=c.children,e=d.length,f=0;f<e;f++){var g=b(a,d[f]);if(g)return g}};return b(a,this.master)},this.fireAppearanceChanged=function(a){this.host.trigger(f.Event.appearanceChanged,a)},this.fireChildrenChanged=function(a){this.master.host.trigger(f.Event.childrenChanged,a)},this.fireVisibleRectChanged=function(a){T(),this.master.host.trigger(f.Event.visibleRectChanged,a)},this.fireVisibleChanged=function(a){this.host.trigger(f.Event.isVisibleChanged,a)},this.firePlotRemoved=function(a){this.host.trigger(f.Event.plotRemoved,a),O(a,function(a){a.host.trigger(f.Event.plotRemoved,a)})},this.fireOrderChanged=function(a){this.host.trigger(f.Event.orderChanged,a)},this.polyline=function(b,c){var d=this.get(b);if(!d){var e=a("<div></div>").attr("data-idd-name",b).appendTo(this.host);d=new f.Polyline(e,this.master),this.addChild(d)}return void 0!==c&&d.draw(c),d},this.markers=function(b,c,d){var e=this.get(b);if(!e){var g=a("<div></div>").attr("data-idd-name",b).appendTo(this.host);e=new f.Markers(g,this.master),this.addChild(e)}return void 0!==c&&e.draw(c,d),e},this.area=function(b,c){var d=this.get(b);if(!d){var e=a("<div></div>").attr("data-idd-name",b).appendTo(this.host);d=new f.Area(e,this.master),this.addChild(d)}return void 0!==c&&d.draw(c),d},this.heatmap=function(b,c,d){var e=this.get(b);if(!e){var g=a("<div></div>").attr("data-idd-name",b).appendTo(this.host);e=new f.Heatmap(g,this.master),this.addChild(e)}return void 0!==c&&e.draw(c,d),e},this.labels=function(b,c){var d=this.get(b);if(!d){var e=a("<div></div>").attr("data-idd-name",b).appendTo(this.host);d=new f.LabelPlot(e,this.master),this.addChild(d)}return void 0!==c&&d.draw(c),d},m)var V=new f.Navigation(this,N);Object.defineProperty(this,"navigation",{get:function(){return m?V:n.navigation},configurable:!1}),o&&o.children("div").each(function(){var b=a(this);b.hasClass("idd-plot-master")||b.hasClass("idd-plot-dependant")||void 0===b.attr("data-idd-plot")||"figure"===b.attr("data-idd-plot")||"chart"===b.attr("data-idd-plot")||H.addChild(c(b,n))}),this.getLegend=function(){},setTimeout(function(){if(o&&o.attr("data-idd-legend")){var b=a("#"+o.attr("data-idd-legend")),c=new f.Legend(H,b,!0);Object.defineProperty(H,"legend",{get:function(){return c},configurable:!1}),f.Gestures.FullEventList.forEach(function(a){b[0].addEventListener(a,function(a){a.stopPropagation()},!1)})}},0),this.updateOrder=function(a,b){if(a&&f.Utils.reorder(this,a,b),!y)for(var c=f.Utils.enumPlots(n),d=0;d<c.length;d++)c[d].order<f.MaxInteger&&c[d].host.css("z-index",c[d].order);a&&this.fireOrderChanged()},b&&(m?("figure"!==b.attr("data-idd-plot")&&"chart"!==b.attr("data-idd-plot")&&this.updateLayout(),b.addClass("idd-plot-master")):b.addClass("idd-plot-dependant"))}};var d=[];f.Legend=function(b,c,e){var g=[],h=c[0].style,i=!0;Object.defineProperty(this,"isVisible",{get:function(){return i},set:function(a){i=a,i?h.display="block":h.display="none"},configurable:!1}),e?c.addClass("idd-legend-compact"):c.addClass("idd-legend"),c.addClass("unselectable"),e||(c.sortable({axis:"y"}),c.on("sortupdate",function(b,d){var e,f,h,i=d.item.data("plot");a("li",c).each(function(b,c){if(i==a(c).data("plot"))return e=b,h=a(c).prev().data("plot"),f=a(c).next().data("plot"),!1});for(var j=0;j<g.length;++j)if(g[j].plot==i){if(f){for(var k=0;k<g.length;++k)if(g[k].plot==f){g[j].plot.updateOrder(g[k].plot);break}}else for(var k=0;k<g.length;++k)if(g[k].plot==h){g[j].plot.updateOrder(g[k].plot,!0);break}break}}));var j=function(){c.empty();for(var a=0,d=g.length;a<d;a++)l(g[a]);b.host.unbind("childrenChanged",m),g=[];for(var e=f.Utils.enumPlots(b),a=0;a<e.length;a++)q(e[e.length-a-1]);c[0].hasChildNodes()&&i&&(h.display="block")},k=function(b,c){var d=a("<div></div>").addClass("idd-legend-isselected-false").appendTo(b);c.isVisible?d.attr("class","idd-legend-isselected-false"):d.attr("class","idd-legend-isselected-true"),d.click(function(a){a.stopPropagation(),c.isVisible?(d.attr("class","idd-legend-isselected-true"),c.isVisible=!1):(d.attr("class","idd-legend-isselected-false"),c.isVisible=!0)})},l=function(a){for(var b=0;b<d.length;b++)if(d[b]==a){d.splice(b,1);break}},m=function(d,f){if("add"===f.type&&c[0].hasChildNodes()&&f.plot.master==b.master)q(f.plot);else if("remove"===f.type){for(var i=function(b){var d=g[b];g.splice(b,1),l(d),d.plot.host.unbind("childrenChanged",m),d.plot.host.unbind("visibleChanged",p),d.onLegendRemove&&d.onLegendRemove(),d[0].innerHTML="",e?d.removeClass("idd-legend-item-compact"):d.removeClass("idd-legend-item"),
c[0].removeChild(d[0]);var f=d.plot.children;f.forEach(function(a){for(var b=0,c=g.length;b<c;b++)g[b].plot===a&&i(g[b])}),a(d[0]).css("display","none"),0==g.length&&(h.display="none")},k=0,n=g.length;k<n;k++)if(g[k].plot===f.plot){i(k);break}}else{for(c[0].innerHTML="",h.display="none",n=g.length,k=0;k<n;k++)l(g[k]),g[k].plot.host.unbind("childrenChanged",m),g[k].onLegendRemove&&g[k].onLegendRemove(),g[k][0].innerHTML="",e?g[k].removeClass("idd-legend-item-compact"):g[k].removeClass("idd-legend-item");g=[],j()}},n=function(a,b){j()},o=function(a,d){b==d&&c.remove()},p=function(a,b){for(var c=function(a,b){var c=d[a];b?c[0].firstElementChild.lastElementChild.setAttribute("class","idd-legend-isselected-false"):c[0].firstElementChild.lastElementChild.setAttribute("class","idd-legend-isselected-true")},e=0,f=d.length;e<f;e++)d[e].plot===b&&c(e,b.isVisible)},q=function(b){var f=b.getLegend();if(b.host.bind("visibleChanged",p),b.host.bind("childrenChanged",m),f){var h=a(e?"<div class='idd-legend-item-compact'></div>":"<li class='idd-legend-item'></li>");e||h.data("plot",b);var i=a(e?"<div class='idd-legend-item-title-compact'></div>":"<div class='idd-legend-item-title'></div>");f.legend&&f.legend.thumbnail&&(e?f.legend.thumbnail.addClass("idd-legend-item-title-thumb-compact").appendTo(i):f.legend.thumbnail.addClass("idd-legend-item-title-thumb").appendTo(i)),e?f.name.addClass("idd-legend-item-title-name-compact").appendTo(i):f.name.addClass("idd-legend-item-title-name").appendTo(i),k(i,b),i.appendTo(h),f.legend&&f.legend.content&&(e?f.legend.content.addClass("idd-legend-item-info-compact").appendTo(h):f.legend.content.addClass("idd-legend-item-info").appendTo(h)),h.prependTo(c),h.plot=b,g[g.length]=h,d[d.length]=h,h.plot.updateOrder()}};this.remove=function(){for(var a=0,d=g.length;a<d;a++)l(g[a]),g[a].onLegendRemove&&g[a].onLegendRemove(),g[a][0].innerHTML="",e?g[a].removeClass("idd-legend-item-compact"):g[a].removeClass("idd-legend-item");g=[];var f=function(a){a.host.unbind("visibleChanged",p);var b=a.children;b.forEach(function(a){f(a)})};f(b),c[0].innerHTML="",e?c.removeClass("idd-legend-compact"):c.removeClass("idd-legend"),c.removeClass("unselectable"),b.host.unbind("plotRemoved",o),b.host.unbind("orderChanged",n),b.host.unbind("childrenChanged",m)},b.host.bind("plotRemoved",o),b.host.bind("orderChanged",n),b.host.bind("childrenChanged",m),j(),c.dblclick(function(a){a.stopImmediatePropagation()})},f.CoordinateTransform=function(a,b,c){var d=0,e=0,g=1,h=1;void 0!==a&&void 0!==b&&(g=b.width/a.width,h=b.height/a.height,void 0!==c&&c>0&&(c*h<g?g=c*h:h=g/c),d=b.left-g*a.x,e=b.height+b.top+h*a.y),this.plotToScreenX=function(a){return a*g+d},this.plotToScreenY=function(a){return e-a*h},this.screenToPlotX=function(a){return(a-d)/g},this.screenToPlotY=function(a){return(e-a)/h},this.plotToScreenWidth=function(a){return a*g},this.plotToScreenHeight=function(a){return a*h},this.screenToPlotWidth=function(a){return a/g},this.screenToPlotHeight=function(a){return a/h},this.getPlotRect=function(a){var b=this.screenToPlotX(a.x),c=this.screenToPlotY(a.height+a.y);return{x:b,y:c,width:this.screenToPlotX(a.x+a.width)-b,height:this.screenToPlotY(a.y)-c}},this.getScale=function(){return{x:g,y:h}},this.getOffset=function(){return{x:d,y:e}},this.clone=function(){var a=new f.CoordinateTransform;return a.plotToScreenX=this.plotToScreenX,a.plotToScreenY=this.plotToScreenY,a.screenToPlotX=this.screenToPlotX,a.screenToPlotY=this.screenToPlotY,a.plotToScreenWidth=this.plotToScreenWidth,a.plotToScreenHeight=this.plotToScreenHeight,a.screenToPlotWidth=this.screenToPlotWidth,a.screenToPlotHeight=this.screenToPlotHeight,a.getPlotRect=this.getPlotRect,a.getScale=this.getScale,a.getOffset=this.getOffset,a}},f.CanvasPlot=function(b,c){if(this.base=f.Plot,this.base(b,c),b){var d,e=function(){c._sharedCanvas&&(c._sharedCanvas.remove(),c._sharedCanvas=void 0)};this.getContext=function(a){var b,c=this.master;c.flatRendering?(b=c._sharedCanvas,a=c._sharedCanvas._dirty&&a,c._sharedCanvas._dirty=!1):b=d;var e=b[0].getContext("2d");if(a){var f=this.screenSize;e.clearRect(0,0,f.width,f.height)}return e},this.destroy=function(){return f.CanvasPlot.prototype.destroy.call(this),this.host.children(".idd-plot-canvas").remove(),e(),this},this.arrange=function(b){f.CanvasPlot.prototype.arrange.call(this,b);var c,g=this.master;g.flatRendering?(g._sharedCanvas?c=g._sharedCanvas:(d?(c=d,d=void 0):c=a("<canvas></canvas>").prependTo(this.host).addClass("idd-plot-canvas"),g._sharedCanvas=c,g._sharedCanvas._dirty=!1),d&&(d.remove(),d=void 0)):(g._sharedCanvas&&e(),d||(d=a("<canvas></canvas>").prependTo(this.host).addClass("idd-plot-canvas")),c=d);var h=c[0];h.width=b.width,h.height=b.height},this.getTransform=function(){var a=this.coordinateTransform,b=a.plotToScreenX,c=a.plotToScreenY,d=this.xDataTransform&&this.xDataTransform.dataToPlot,e=this.yDataTransform&&this.yDataTransform.dataToPlot,f=d?function(a){return b(d(a))}:b,g=e?function(a){return c(e(a))}:c;return{dataToScreenX:f,dataToScreenY:g}},this.getScreenToDataTransform=function(){var a=this.coordinateTransform,b=a.screenToPlotX,c=a.screenToPlotY,d=this.xDataTransform&&this.xDataTransform.plotToData,e=this.yDataTransform&&this.yDataTransform.plotToData,f=d?function(a){return d(b(a))}:b,g=e?function(a){return e(c(a))}:c;return{screenToDataX:f,screenToDataY:g}}}},f.CanvasPlot.prototype=new f.Plot,f.Polyline=function(b,c){var d=this,e=f.Utils.getDataSourceFunction(b,f.readCsv),g=e(b);this.base=f.CanvasPlot,this.base(b,c);var h,i,j,k,l,m,n="blue",o="pink",p=1,q="#4169ed",r="butt",s="miter";g&&(p="undefined"!=typeof g.thickness?g.thickness:p,q="undefined"!=typeof g.stroke?g.stroke:q,r="undefined"!=typeof g.lineCap?g.lineCap:r,s="undefined"!=typeof g.lineJoin?g.lineJoin:s,n="undefined"!=typeof g.fill68?g.fill68:n,o="undefined"!=typeof g.fill95?g.fill95:o),this.draw=function(a){var b=a.y.median?a.y.median:a.y;if(!b)throw"Data series y is undefined";var c=b.length;if(a.x||(a.x=f.Utils.range(0,c-1)),c!=a.x.length)throw"Data series x and y have different lengths";h=b,i=a.x;var d=a.y.upper68;if(d&&d.length!==c)throw"Data series y_u68 and y_median have different lengths";var e=a.y.lower68;if(e&&e.length!==c)throw"Data series y_l68 and y_median have different lengths";var g=a.y.upper95;if(g&&g.length!==c)throw"Data series y_u95 and y_median have different lengths";var t=a.y.lower95;if(t&&t.length!==c)throw"Data series y_l95 and y_median have different lengths";j=d,k=e,l=g,m=t;var u=a.treatAs&&"function"==a.treatAs&&!f.Utils.isOrderedArray(i);if(f.Utils.isArray(a.y)){if(h=b,u){var v=Math.min(i.length,b.length);if(h=f.Utils.cutArray(b,v),i=f.Utils.cutArray(i,v),u){for(var w=[],x=0;x<v;x++)isNaN(i[x])||w.push({x:i[x],y:h[x]});w.sort(function(a,b){return a.x-b.x}),h=[],i=[];for(var x=0;x<w.length;x++)h.push(w[x].y),i.push(w[x].x)}}}else{var b=a.y,v=Math.min(i.length,b.median.length);if(b.upper68&&b.lower68&&(v=Math.min(v,Math.min(b.upper68.length,b.lower68.length))),b.upper95&&b.lower95&&(v=Math.min(v,Math.min(b.upper95.length,b.lower95.length))),h=f.Utils.cutArray(b.median,v),j=f.Utils.cutArray(b.upper68,v),k=f.Utils.cutArray(b.lower68,v),l=f.Utils.cutArray(b.upper95,v),m=f.Utils.cutArray(b.lower95,v),i=f.Utils.cutArray(i,v),u){for(var w=[],x=0;x<v;x++)isNaN(i[x])||w.push({x:i[x],y:h[x],y_u68:j[x],y_l68:k[x],y_u95:l[x],y_l95:m[x]});w.sort(function(a,b){return a.x-b.x}),h=[],j=[],k=[],l=[],m=[],i=[];for(var x=0;x<w.length;x++)h.push(w[x].y),j.push(w[x].y_u68),k.push(w[x].y_l68),l.push(w[x].y_u95),m.push(w[x].y_l95),i.push(w[x].x)}}p="undefined"!=typeof a.thickness?a.thickness:p,"number"!=typeof p&&(p=parseFloat(p)||1),q="undefined"!=typeof a.stroke?a.stroke:q,r="undefined"!=typeof a.lineCap?a.lineCap:r,s="undefined"!=typeof a.lineJoin?a.lineJoin:s,n="undefined"!=typeof a.fill68?a.fill68:n,o="undefined"!=typeof a.fill95?a.fill95:o,this.invalidateLocalBounds(),this.requestNextFrameOrUpdate(),this.fireAppearanceChanged()},this.computeLocalBounds=function(a,b){var c=this.xDataTransform&&this.xDataTransform.dataToPlot,d=this.yDataTransform&&this.yDataTransform.dataToPlot,e=f.Utils.getBoundingBoxForArrays(i,h,c,d),g=f.Utils.getBoundingBoxForArrays(i,j,c,d),n=f.Utils.getBoundingBoxForArrays(i,k,c,d),o=f.Utils.getBoundingBoxForArrays(i,l,c,d),p=f.Utils.getBoundingBoxForArrays(i,m,c,d);return f.Utils.unionRects(e,f.Utils.unionRects(g,f.Utils.unionRects(n,f.Utils.unionRects(o,p))))},this.getLocalPadding=function(){return{left:0,right:0,top:0,bottom:0}},this.getTooltip=function(b,c,d,e){if(void 0!==i&&void 0!=h){var f=h.length;if(0!=f){var g=this.coordinateTransform,j=g.plotToScreenX(d),k=g.plotToScreenY(e),l=this.getContext(!1),m=l.getImageData(j,k,1,1);if(0!==m.data[0]||0!==m.data[1]||0!==m.data[2]||0!==m.data[3]){var n=a("<div></div>");return a("<div></div>").addClass("idd-tooltip-name").text(this.name||"polyline").appendTo(n),n}}}};var t=function(a,b,c,e,f,g,h){if(void 0!==a&&void 0!=b){var i=b.length;if(0!=i){var j=d.getTransform(),k=j.dataToScreenX,l=j.dataToScreenY,m=g.width,n=g.height,o=0,p=m,q=0,t=n;h.globalAlpha=1,h.strokeStyle=c,h.fillStyle=c,h.lineWidth=e,h.lineCap=r,h.lineJoin=s,h.beginPath();var u,w,x,y,z=0,A=function(){for(;z<i;z++)if(!isNaN(a[z])&&!isNaN(b[z])){u=k(a[z]),x=l(b[z]),B=v(u,x,o,p,q,t);break}0==B&&h.moveTo(u,x)};A();var B,C,D,E,F,G,H,I,J=1;for(z++;z<i;z++)if(isNaN(a[z])||isNaN(b[z])){if(1==J){h.stroke();var K=v(u,x,o,p,q,t);0==K&&(h.beginPath(),h.arc(u,x,e/2,0,2*Math.PI),h.fill())}else h.stroke();h.beginPath(),z++,A(),J=1}else if(H=w=k(a[z]),I=y=l(b[z]),!(Math.abs(u-w)<1&&Math.abs(x-y)<1)){for(D=B,E=C=v(w,y,o,p,q,t);B|C&&!(B&C);)F=w-u,G=y-x,B?(u<o?(x+=G*(o-u)/F,u=o):u>p?(x+=G*(p-u)/F,u=p):x<q?(u+=F*(q-x)/G,x=q):x>t&&(u+=F*(t-x)/G,x=t),B=v(u,x,o,p,q,t)):(w<o?(y+=G*(o-w)/F,w=o):w>p?(y+=G*(p-w)/F,w=p):y<q?(w+=F*(q-y)/G,y=q):y>t&&(w+=F*(t-y)/G,y=t),C=v(w,y,o,p,q,t));B&C||(0!=D&&h.moveTo(u,x),h.lineTo(w,y),J++),u=H,x=I,B=E}if(1==J){h.stroke();var K=v(u,x,o,p,q,t);0==K&&(h.beginPath(),h.arc(u,x,e/2,0,2*Math.PI),h.fill())}else h.stroke()}}};this.renderCore=function(a,b){f.Polyline.prototype.renderCore.call(this,a,b);var c=this.getContext(!0);f.Area.render.call(this,i,m,l,o,a,b,c,.5),f.Area.render.call(this,i,k,j,n,a,b,c,.5),t(i,h,q,p,a,b,c)};var u=function(a,b,c){if(void 0!==i&&void 0!=h){var e=h.length;if(0!=e){var f,g,j,k,l,m=d.getTransform(),n=m.dataToScreenX,o=m.dataToScreenY,r=b.width,s=b.height,t=0,u=r,w=0,x=s,y=0,z=function(){c.polyline(l).style({fill:"none",stroke:q,"stroke-width":p})},A=function(){for(l=new Array(0);y<e;y++)if(!isNaN(i[y])&&!isNaN(h[y])){f=n(i[y]),j=o(h[y]),B=v(f,j,t,u,w,x);break}0==B&&l.push([f,j])};A();var B,C,D,E,F,G,H,I,J=1;for(y++;y<e;y++)if(isNaN(i[y])||isNaN(h[y])){if(1==J){z();var K=v(f,j,t,u,w,x);0==K&&(context.beginPath(),context.arc(f,j,p/2,0,2*Math.PI),context.fill())}else z();y++,A(),J=1}else if(H=g=n(i[y]),I=k=o(h[y]),!(Math.abs(f-g)<1&&Math.abs(j-k)<1)){for(D=B,E=C=v(g,k,t,u,w,x);B|C&&!(B&C);)F=g-f,G=k-j,B?(f<t?(j+=G*(t-f)/F,f=t):f>u?(j+=G*(u-f)/F,f=u):j<w?(f+=F*(w-j)/G,j=w):j>x&&(f+=F*(x-j)/G,j=x),B=v(f,j,t,u,w,x)):(g<t?(k+=G*(t-g)/F,g=t):g>u?(k+=G*(u-g)/F,g=u):k<w?(g+=F*(w-k)/G,k=w):k>x&&(g+=F*(x-k)/G,k=x),C=v(g,k,t,u,w,x));B&C||(0!=D&&(z(),l=new Array(0),l.push([f,j])),l.push([g,k]),J++),f=H,j=I,B=E}if(1==J){z();var K=v(f,j,t,u,w,x);0==K&&c.circle(p).translate(f,j).fill(q)}else z()}}};this.renderCoreSvg=function(a,b,c){f.Area.renderSvg.call(this,a,b,c,i,m,l,o,.5),f.Area.renderSvg.call(this,a,b,c,i,k,j,n,.5),u(a,b,c)};var v=function(a,b,c,d,e,f){return(a<c)<<3|(a>d)<<2|(b<e)<<1|b>f};this.onDataTransformChanged=function(a){this.invalidateLocalBounds(),f.Polyline.prototype.onDataTransformChanged.call(this,a)},Object.defineProperty(this,"thickness",{get:function(){return p},set:function(a){if(a!=p){if(a<=0)throw"Polyline thickness must be positive";p=a,this.fireAppearanceChanged("thickness"),this.requestNextFrameOrUpdate()}},configurable:!1}),Object.defineProperty(this,"stroke",{get:function(){return q},set:function(a){a!=q&&(q=a,this.fireAppearanceChanged("stroke"),this.requestNextFrameOrUpdate())},configurable:!1}),Object.defineProperty(this,"lineCap",{get:function(){return r},set:function(a){a!=r&&(r=a,this.fireAppearanceChanged("lineCap"),this.requestNextFrameOrUpdate())},configurable:!1}),Object.defineProperty(this,"lineJoin",{get:function(){return s},set:function(a){a!=s&&(s=a,this.fireAppearanceChanged("lineJoin"),this.requestNextFrameOrUpdate())},configurable:!1}),Object.defineProperty(this,"fill68",{get:function(){return n},set:function(a){a!=n&&(n=a,this.fireAppearanceChanged("fill68"),this.requestNextFrameOrUpdate())},configurable:!1}),Object.defineProperty(this,"fill95",{get:function(){return o},set:function(a){a!=o&&(o=a,this.fireAppearanceChanged("fill95"),this.requestNextFrameOrUpdate())},configurable:!1}),this.getLegend=function(){var b=a("<canvas></canvas>");b[0].width=40,b[0].height=40;var c=b.get(0).getContext("2d"),d=void 0!=l&&void 0!=m,e=void 0!=j&&void 0!=k;d&&(c.globalAlpha=.5,c.strokeStyle=o,c.fillStyle=o,c.beginPath(),c.moveTo(0,0),c.lineTo(0,20),c.lineTo(20,40),c.lineTo(40,40),c.lineTo(40,20),c.lineTo(20,0),c.lineTo(0,0),c.fill(),c.stroke(),c.closePath()),e&&(c.globalAlpha=.5,c.strokeStyle=n,c.fillStyle=n,c.beginPath(),c.moveTo(0,0),c.lineTo(0,10),c.lineTo(30,40),c.lineTo(40,40),c.lineTo(40,30),c.lineTo(10,0),c.lineTo(0,0),c.fill(),c.stroke(),c.closePath()),c.strokeStyle=q,c.lineWidth=p,c.moveTo(0,0),c.lineTo(40,40),c.stroke();var f=this,g=a("<span></span>"),h=function(){g.text(f.name)};h(),this.host.bind("appearanceChanged",function(a,d){d&&"name"!=d||h(),c.clearRect(0,0,b[0].width,b[0].height);var e=void 0!=l&&void 0!=m,f=void 0!=j&&void 0!=k;e&&(c.globalAlpha=.5,c.strokeStyle=o,c.fillStyle=o,c.beginPath(),c.moveTo(0,0),c.lineTo(0,20),c.lineTo(20,40),c.lineTo(40,40),c.lineTo(40,20),c.lineTo(20,0),c.lineTo(0,0),c.fill(),c.stroke(),c.closePath()),f&&(c.globalAlpha=.5,c.strokeStyle=n,c.fillStyle=n,c.beginPath(),c.moveTo(0,0),c.lineTo(0,10),c.lineTo(30,40),c.lineTo(40,40),c.lineTo(40,30),c.lineTo(10,0),c.lineTo(0,0),c.fill(),c.stroke(),c.closePath()),c.strokeStyle=q,c.lineWidth=p,c.moveTo(0,0),c.lineTo(40,40),c.stroke()});var f=this,i=function(){f.host.unbind("appearanceChanged")};return{name:g,legend:{thumbnail:b,content:void 0},onLegendRemove:i}},this.buildSvgLegend=function(a,b){var c=this;a.height=30,b.add(b.rect(a.width,a.height).fill("white").opacity(.5));var d=void 0!=l&&void 0!=m,e=void 0!=j&&void 0!=k;d&&b.add(b.polyline([[0,0],[0,9],[9,18],[18,18],[18,9],[9,0],[0,0]]).fill(o).opacity(.5).translate(5,5)),e&&b.add(b.polyline([[0,0],[0,4.5],[13.5,18],[18,18],[18,13.5],[4.5,0],[0,0]]).fill(n).opacity(.5).translate(5,5)),b.add(b.line(0,0,18,18).stroke({width:p,color:q}).translate(5,5));var f=window.getComputedStyle(a.legendDiv.children[0].children[1],null),g=parseFloat(f.getPropertyValue("font-size")),h=f.getPropertyValue("font-family"),i=f?f.getPropertyValue("font-weight"):void 0;b.add(b.text(c.name).font({family:h,size:g,weight:i}).translate(40,0)),b.front()},g&&"undefined"!=typeof g.y&&this.draw(g)},f.Polyline.prototype=new f.CanvasPlot;var e=jQuery.Event("plotClick");f.DOMPlot=function(b,c){this.base=f.Plot,this.base(b,c);var d=[],g=this,h=function(a,b,c,e,h,i,j,k){if("div"!==a[0].tagName.toLowerCase())throw"DOMPlot supports only DIV elements";a._x=c,a._y=e,a._width=h&&h>0?h:1,a._height=i&&i>0?i:1,a._originX=j||0,a._originY=k||0,a._scale=b||"element";var l=function(a){var b=g.coordinateTransform.screenToPlotX,c=g.coordinateTransform.screenToPlotY,d=g.xDataTransform&&g.xDataTransform.plotToData,e=g.yDataTransform&&g.yDataTransform.plotToData,f=d?function(a){return d(b(a))}:b,h=e?function(a){return e(c(a))}:c,i=a.position();a._left=i.left+a._originX*a.width(),a._top=i.top+a._originY*a.height(),a._x=f(i.left+a._originX*a.width()),a._y=h(i.top+a._originY*a.height())};a.on("drag",function(b,c){l(a)}),a.on("dragstop",function(b,c){l(a),g.invalidateLocalBounds(),g.requestUpdateLayout()}),a.addClass("idd-dom-marker"),a.css("display","none").css("z-index",f.ZIndexDOMMarkers),d.push(a)};b.children("div[data-idd-position]").each(function(){var b=a(this),c=b.attr("data-idd-position").split(/\s+/g);if(c.length<2)throw"Position of the DOM marker should define x and y";var d,e,f=parseFloat(c[0]),g=parseFloat(c[1]),i=b.attr("data-idd-size");if(i){var j=i.split(/\s+/g);j.length>=2&&(d=parseFloat(j[0]),e=parseFloat(j[1]))}var k,l,m=b.attr("data-idd-origin");if(m){var n=m.split(/\s+/g);n.length>=2&&(k=parseFloat(n[0]),l=parseFloat(n[1]))}var o=b.attr("data-idd-scale");h(b,o,f,g,d,e,k,l)});var i=function(a){var b=a._x-a._originX*a._width,c=a._y+a._originY*a._height;return{left:b,top:c}};this.computeLocalBounds=function(){var a;if(d){var b=d.length;if(b>0){for(var c=[],e=[],g=0,h=0;g<b;g++,h++){var j=d[g];if("none"!=j._scale){var k=i(j);c[h]=k.left,e[h]=k.top,c[++h]=k.left+j._width,e[h]=k.top-j._height}}var l=f.Utils.getMinMax(c),m=f.Utils.getMinMax(e);if(l&&m){var n=this.xDataTransform&&this.xDataTransform.dataToPlot,o=this.yDataTransform&&this.yDataTransform.dataToPlot;n&&(l.min=n(l.min),l.max=n(l.max)),o&&(m.min=o(m.min),m.max=o(m.max)),a={x:l.min,y:m.min,width:l.max-l.min,height:m.max-m.min}}}}return a},this.getLocalPadding=function(){var a=0;return{left:a,right:a,top:a,bottom:a}},this.arrange=function(a){f.CanvasPlot.prototype.arrange.call(this,a);var b=a.width,c=a.height;this.host.css("clip","rect(0px,"+b+"px,"+c+"px,0px)")},this.renderCore=function(a,b){f.DOMPlot.prototype.renderCore.call(this,a,b);var c=d.length;if(c>0)for(var e=0,g=b.height,h=0,j=b.width,k=this.coordinateTransform.plotToScreenX,l=this.coordinateTransform.plotToScreenY,m=this.xDataTransform&&this.xDataTransform.dataToPlot,n=this.yDataTransform&&this.yDataTransform.dataToPlot,o=m?function(a){return k(m(a))}:k,p=n?function(a){return l(n(a))}:l,q=0;q<c;q++){var r,s,t=d[q];if("none"==t._scale){s={x:t.width(),y:t.height()},r={x:o(t._x),y:p(t._y)};var u=r.x-t._originX*s.x,v=r.y-t._originY*s.y;r={x:u,y:v}}else{var w;w=i(t),r={x:o(w.left),y:p(w.top)},s={x:o(w.left+t._width)-r.x,y:p(w.top-t._height)-r.y}}var x,y=0,z=0,A=s.y,B=s.x,C=e,D=g,E=r.y,F=r.y+s.y,G=Math.max(C,E),H=Math.min(D,F);if(x=G<H,x&&(y=G-r.y,A=H-r.y,C=h,D=j,E=r.x,F=r.x+s.x,G=Math.max(C,E),H=Math.min(D,F),x=G<H))if(z=G-r.x,B=H-r.x,t.css("left",r.x+"px"),t.css("top",r.y+"px"),t.css("display","block"),"content"===t._scale){var I=s.x/t.width(),J=s.y/t.height();t.css(f.CssPrefix+"-transform-origin","0% 0%"),t.css(f.CssPrefix+"-transform","scale("+I+","+J+")")}else"element"===t._scale&&(t.css("width",s.x+"px"),t.css("height",s.y+"px"));x||t.css("display","none")}},this.onIsRenderedChanged=function(){if(this.isRendered)for(var a=d.length,b=0;b<a;b++){var c=d[b];c.css("z-index",f.ZIndexDOMMarkers)}else for(var a=d.length,b=0;b<a;b++){var c=d[b];c.css("display","none")}},this.clear=function(){for(var a=d.length,b=0;b<a;b++){var c=d[b];c.remove()}d=[],this.invalidateLocalBounds(),this.requestUpdateLayout()},this.add=function(b,c,d,e,f,g,i,j){var k=a(b);return this.host[0].contains(k[0])||k.appendTo(this.host),h(k,c,d,e,f,g,i,j),this.invalidateLocalBounds(),this.requestUpdateLayout(),k.get(0)};var j=function(a){var b=jQuery.grep(d,function(b){return b[0]===a});if(b&&b.length>0)return b[0]};this.remove=function(b){var c=function(a){var b=j(a[0]);b&&d.splice(d.indexOf(b),1),a.remove()};c(b.jquery?b:a(b)),this.invalidateLocalBounds(),this.requestUpdateLayout()},this.set=function(a,b,c,d,e,f,g){var h=j(a);if(!h)throw"Element is not found in the plot";h._x=b,h._y=c,"none"!=h.scale&&(d&&d>0&&(h._width=d),e&&e>0&&(h._height=e)),h._originX=f||h._originX,h._originY=g||h._originY,this.invalidateLocalBounds(),this.requestUpdateLayout()},this.enableClickablePanel=!1,g.master.centralPart.click(function(a){if(g.enableClickablePanel){var b=g.coordinateTransform.screenToPlotX,c=g.coordinateTransform.screenToPlotY,d=g.xDataTransform&&g.xDataTransform.plotToData,h=g.yDataTransform&&g.yDataTransform.plotToData,i=d?function(a){return d(b(a))}:b,j=h?function(a){return h(c(a))}:c,k=f.Gestures.getXBrowserMouseOrigin(g.master.centralPart,a),l=i(k.x),m=j(k.y);g.host.trigger(e,{x:l,y:m})}}),Object.defineProperty(this,"domElements",{get:function(){return d.slice(0)},configurable:!1})},f.DOMPlot.prototype=new f.Plot,f.GridlinesPlot=function(a,b){this.base=f.CanvasPlot,this.base(a,b);var c,d,e="1px",g="LightGray",h={};f.Utils.readStyle(this.host,h),h&&(g="undefined"!=typeof h.stroke?h.stroke:g,e="undefined"!=typeof h.thickness?h.thickness:e),Object.defineProperty(this,"xAxis",{get:function(){return c},set:function(a){a!=c&&(c=a,this.requestUpdateLayout())},configurable:!1}),Object.defineProperty(this,"yAxis",{get:function(){return d},set:function(a){a!=d&&(d=a,this.requestUpdateLayout())},configurable:!1}),Object.defineProperty(this,"thickness",{get:function(){return e},set:function(a){if(a!=e){if(a<=0)throw"GridLines thickness must be positive";e=a,this.requestNextFrameOrUpdate()}},configurable:!1}),Object.defineProperty(this,"stroke",{get:function(){return g},set:function(a){a!=g&&(g=a,this.requestNextFrameOrUpdate())},configurable:!1});var i=function(){if(!c){var a=this.host.attr("data-idd-xaxis");if(a){var b=this.master.get(a);b&&(c=b)}}if(!d){var a=this.host.attr("data-idd-yaxis");if(a){var b=this.master.get(a);b&&(d=b)}}};this.renderCore=function(a,b){f.GridlinesPlot.prototype.renderCore.call(this,a,b),i.call(this);var h=this.getContext(!0);h.strokeStyle=g,h.fillStyle=g,h.lineWidth=1;var j,k=parseInt(e.slice(0,-2)),l=[];c&&(l=c.ticks);for(var m=0,n=l.length;m<n;m++)l[m].invisible||(j=c.getCoordinateFromTick(l[m].position),h.fillRect(j,0,k,b.height));l=[],d&&(l=d.ticks);for(var m=0,n=l.length;m<n;m++)l[m].invisible||(j=b.height-1-d.getCoordinateFromTick(l[m].position),h.fillRect(0,j,b.width,k))},this.renderCoreSvg=function(a,b,f){i.call(this);var h,j=parseInt(e.slice(0,-2)),k={width:j,color:g},l=[];c&&(l=c.ticks);for(var m=0,n=l.length;m<n;m++)l[m].invisible||(h=c.getCoordinateFromTick(l[m].position),f.polyline([[h,0],[h,b.height-1]]).stroke(k).fill("none"));l=[],d&&(l=d.ticks);for(var m=0,n=l.length;m<n;m++)l[m].invisible||(h=b.height-1-d.getCoordinateFromTick(l[m].position),f.polyline([[0,h],[b.width-1,h]]).stroke(k).fill("none"))}},f.GridlinesPlot.prototype=new f.CanvasPlot})();f.readTable=function(b){var c={};f.Utils.readStyle(b,c);var d=b.children("table:first-child");if(d&&d.length>0){d.toggle();var e=d.children("tbody").children("tr");if(e&&e.length>0){var g=e.first(),h=[];g.children("th").each(function(b){var d=a(this).text();h[b]=d,c[d]=[]});var i=e.toArray();if(i)for(var j=i.length,k=h.length,l=1;l<j;l++)for(var m=a(i[l]).children("td").toArray(),n=0;n<k;n++)c[h[n]][l-1]=parseFloat(a(m[n]).text())}}return c},f.Utils.getAndClearTextContent=function(a){a[0].normalize();var b=a.contents().filter(function(){return 3==this.nodeType&&!(!this.data||""==this.data.trim())})[0];if(b&&b.data){var c=b.wholeText;return"undefined"!=typeof b.replaceWholeText?b.replaceWholeText(""):b.data="",c}},f.readCsv=function(a){var b={};f.Utils.readStyle(a,b);var c=f.Utils.getAndClearTextContent(a);if(c){c=c.trim();var d=function(a){return a.split(/\s+/g)},e=c.split(/\n/g),g=e.length-1;if(g>0){for(var h=d(e[0]),i=h[0]?0:1,j=i;j<h.length;j++)b[h[j-i]]=[];for(var k=0;k<g;k++){var l=d(e[k+1]);i=l[0]?0:1;for(var j=i;j<l.length;j++)b[h[j-i]][k]=parseFloat(l[j])}for(var j=0;j<h.length;j++){var m=h[j].split(".");m.length>1&&(b[m[0]]||(b[m[0]]={}),b[m[0]][m[1]]=b[h[j]],delete b[h[j]])}}}return b},f.readCsv2d=function(a){var b={};f.Utils.readStyle(a,b);var c=f.Utils.getAndClearTextContent(a);if(c){c=c.trim();var d=function(a){return a.trim().split(/\s+/g)},e=c.split(/\n/g),g=e.length-1;if(g>0){var h=d(e[0]),i=h.length-1;if(i>0){for(var j=new Array(i),k=new Array(g),l=new Array(i),m=1;m<=i;m++)l[m-1]=new Array(g),j[m-1]=parseFloat(h[m]);for(var n=1;n<=g;n++){var o=d(e[n]);k[n-1]=parseFloat(o[0]);for(var m=1;m<=i;m++)l[m-1][n-1]=parseFloat(o[m])}b.x=j,b.y=k,b.values=l}}}return b},f.InitializeAxis=function(a,b){if(a.hasClass("idd-axis"))throw"The div element already is initialized as an axis";var c=a.attr("data-idd-axis");switch(c){case"numeric":return new f.NumericAxis(a);case"log":return new f.LogarithmicAxis(a);case"labels":return new f.LabelledAxis(a,b)}},f.TicksRenderer=function(b,c){if("undefined"!=typeof Modernizr&&b&&(Modernizr.canvas||b.replaceWith('<div">Browser does not support HTML5 canvas</div>')),!b||!b.hasClass("idd-axis")){var d=this,e=b,g="";b&&(g=b.attr("data-idd-placement"));var h="top"==g||"bottom"==g;this.rotateLabels=!1;var i={min:0,max:1},j=c,k=[],l=3,m=a("<canvas id='canvas' style='position:relative; float:left'></canvas>"),n=a("<div id='labelsDiv' style='position:relative; float:left'></div>");if(b){"bottom"==g||"right"==g?(b[0].appendChild(m[0]),b[0].appendChild(n[0])):(b[0].appendChild(n[0]),b[0].appendChild(m[0]));var o=f.tickLength+1;h?m[0].height=o:(m[0].width=o,"right"==g?n.css("left",l):m.css("left",l))}var p,q,r,s,t;this.updateSize=function(){var a=r;b&&(p=b.outerWidth(!1),q=b.outerHeight(!1)),h?(r=p,r!=a&&(m[0].width=r,n.css("width",r))):(r=q,r!=a&&(m[0].height=r,n.css("height",r))),s=(r-1)/(i.max-i.min),t=m[0].height};var u=-1,v=f.tickLength/3,w=e?e.css("color"):"Black",x=m.get(0).getContext("2d");x.strokeStyle=w,x.fillStyle=w,x.lineWidth=1;var y=12;e&&(e[0].currentStyle?(y=e[0].currentStyle["font-size"],x.font=y+e[0].currentStyle["font-family"]):document.defaultView&&document.defaultView.getComputedStyle?(y=document.defaultView.getComputedStyle(e[0],null).getPropertyValue("font-size"),x.font=y+document.defaultView.getComputedStyle(e[0],null).getPropertyValue("font-family")):e[0].style&&(y=e[0].style["font-size"],x.font=y+e[0].style["font-family"])),Object.defineProperty(this,"host",{get:function(){return e},configurable:!1}),Object.defineProperty(this,"mode",{get:function(){return g},configurable:!1}),Object.defineProperty(this,"tickSource",{get:function(){return j},configurable:!1}),Object.defineProperty(this,"range",{get:function(){return i},configurable:!1}),Object.defineProperty(this,"ticks",{get:function(){return k},configurable:!1}),Object.defineProperty(this,"DesiredSize",{get:function(){return{width:p,height:q}},configurable:!1}),Object.defineProperty(this,"axisSize",{get:function(){return r},configurable:!1}),Object.defineProperty(this,"deltaRange",{get:function(){return s},configurable:!1}),this.sizeChanged=!0;var z=void 0;Object.defineProperty(this,"dataTransform",{get:function(){return z},set:function(a){z=a,E()},configurable:!1});var A=[],B=function(a){var b=a.length;A=new Array(b);for(var c,e,f,g=h?t:0,i=0;i<b;i++){var k=a[i];k.label?(c=k.label._size,e=c.width,f=c.height,0==e&&(e=x.measureText(j.getInnerText(k.position)).width),0==f&&(f=(h?g:parseFloat(y))+8),A[i]={position:d.getCoordinateFromTick(k.position),width:e,height:f,hasLabel:!0}):A[i]={position:d.getCoordinateFromTick(k.position),width:0,height:0,hasLabel:!1}}},C=function(a){var b,c,d=a.length-1;if(F(a),B(a),d==-1)return 1;for(var e=0,g=0;g<d;){for(e=g,g++;g<d+1&&!A[g].hasLabel;)g++;if(g>d)break;if(A[e].hasLabel){if(b=Math.abs(A[g].position-A[e].position),b<f.minTickSpace)return-1;if(h?(c=(A[e].width+A[g].width)/2,0==e&&A[e].position-A[e].width/2<0?c-=A[e].width/2:g==d-1&&A[g].position-A[g].width/2>r&&(c-=A[g].width/2)):(c=(A[e].height+A[g].height)/2,0==e&&A[e].position-A[e].height/2<0?c-=A[e].height/2:g==d-1&&A[g].position-A[g].height/2>r&&(c-=A[g].height/2)),b-c<f.minLabelSpace)return-1}}var i=1;for(e=g=0;g<d;){for(e=g,g++;g<d+1&&!A[g].hasLabel;)g++;if(g>d)break;if(A[e].hasLabel&&(b=Math.abs(A[g].position-A[e].position),h?(c=(A[e].width+A[g].width)/2,0==e&&A[e].position-A[e].width/2<0?c-=A[e].width/2:g==d-1&&A[g].position-A[g].width/2>r&&(c-=A[g].width/2)):(c=(A[e].height+A[g].height)/2,0==e&&A[e].position-A[e].height/2<0?c-=A[e].height/2:g==d-1&&A[g].position-A[g].height/2>r&&(c-=A[g].height/2)),b-c<f.minLabelSpace)){i=0;break}}return i};this.getCoordinateFromTick||(this.getCoordinateFromTick=function(a){return a});var D=!1,E=function(){if(d.updateSize(),z){var a=z.plotToData(i.min),b=z.plotToData(i.max);k=j.getTicks({min:Math.min(a,b),max:Math.max(a,b)})}else k=j.getTicks(i);var c,s,t=C(k),y=0;if(t==-1)for(;y++<f.maxTickArrangeIterations&&(c=j.decreaseTickCount(),s=C(c),k=c,s==-1););if(1==t)for(;y++<f.maxTickArrangeIterations;){if(c=j.increaseTickCount(),s=C(c),s==-1){k=j.decreaseTickCount(),B(k),F(k);break}if(k=c,0==s)break}if(D=!1,j.getMinTicks&&(s==-1&&y>f.maxTickArrangeIterations||k.length<2)&&(c=j.getMinTicks(),c.length>0&&(k=c,F(k),B(k))),2==k.length&&(F(k),B(k),2==k.length)){var E,G=A[1].position-A[0].position;E=h?(A[0].width+A[1].width)/2:(A[0].height+A[1].height)/2,G-E<f.minLabelSpace&&(D=!0)}var H=k.length,I=u;if(u=0,this.sizeChanged=!1,h){for(var J=0;J<H;J++)u=Math.max(u,A[J].height);u!=I&&0!=u&&(n.css("height",u),m[0].height=o,q=u+o,e.css("height",q),this.sizeChanged=!0)}else{for(var J=0;J<H;J++)u=Math.max(u,A[J].width);u!=I&&0!=u&&(n.css("width",u),m[0].width=o,p=u+o+l,e.css("width",p),this.sizeChanged=!0)}x.strokeStyle=w,x.fillStyle=w,h?(x.clearRect(0,0,r,o),"bottom"==g?x.fillRect(0,0,r,1):x.fillRect(0,f.tickLength,r,1)):(x.clearRect(0,0,o,r),"right"==g?x.fillRect(0,0,1,r):x.fillRect(f.tickLength,0,1,r));for(var K,L,J=0;J<H;J++)K=A[J].position,h?(L=A[J].width/2,D?0==J?L*=2:J==H-1&&(L=0):0==J&&K<L?L=0:J==H-1&&K+L>r&&(L*=2),k[J].invisible||x.fillRect(K,1,1,f.tickLength),k[J].label&&k[J].label.css("left",K-L)):(K=r-1-K,L=A[J].height/2,D?0==J?L=0:J==H-1&&(L*=2):0==J&&K+L>r?L*=2:J==H-1&&K<L&&(L=0),k[J].invisible||x.fillRect(1,K,f.tickLength,1),k[J].label&&(k[J].label.css("top",K-L),"left"==g&&k[J].label.css("left",u-(this.rotateLabels?A[J].height:A[J].width))));var M=j.getSmallTicks(k);if(M.length>0){for(var N=Math.abs(d.getCoordinateFromTick(M[1])-d.getCoordinateFromTick(M[0])),O=1;O<M.length-1;O++)N=Math.min(N,Math.abs(d.getCoordinateFromTick(M[O+1])-d.getCoordinateFromTick(M[O])));if(N>=f.minTickSpace)for(var J=0,H=M.length;J<H;J++)K=d.getCoordinateFromTick(M[J]),"bottom"==g?x.fillRect(K,1,1,v):"top"==g?x.fillRect(K,f.tickLength-v,1,v):"left"==g?x.fillRect(f.tickLength-v,r-1-K,v,1):"right"==g&&x.fillRect(1,r-1-K,v,1)}};this.renderToSvg=function(a){var b,c,e="",i=function(a,b,c){e+="M"+a+" "+b+"h"+c},m=function(a,b,c){e+="M"+a+" "+b+"v"+c};h?(c=q-1,"bottom"==g?(i(0,0,r),b=f.tickLength-l):(i(0,c,r),b=-l)):(c=p-1,"right"==g?(m(0,0,r),b=f.tickLength+l):(m(c,0,r),b=0));var n,o,s,t,x=k.length;if(x>0){var y=window.getComputedStyle(k[0].label[0],null);s=parseFloat(y.getPropertyValue("font-size")),t=y.getPropertyValue("font-family")}for(var z=0;z<x;z++)if(n=A[z].position,h)o=A[z].width/2,D?0==z?o*=2:z==x-1&&(o=0):0==z&&n<o?o=0:z==x-1&&n+o>r&&(o*=2),k[z].invisible||("top"==g?m(n,c,-f.tickLength):m(n,0,f.tickLength)),k[z].label&&j.renderToSvg(k[z],a).translate(n-o,b).font({family:t,size:s});else if(n=r-1-n,o=.66*A[z].height,D?0==z?o=0:z==x-1&&(o*=2):0==z&&n+o>r?o*=2:z==x-1&&n<o&&(o=0),k[z].invisible||("left"==g?i(c,n,-f.tickLength):i(0,n,f.tickLength)),k[z].label){var B=0;"left"==g&&(B=u-(this.rotateLabels?A[z].height:A[z].width)+b),j.renderToSvg(k[z],a).translate(B+b,n-o).font({family:t,size:s})}var C=j.getSmallTicks(k);if(C.length>0){for(var E=Math.abs(d.getCoordinateFromTick(C[1])-d.getCoordinateFromTick(C[0])),F=1;F<C.length-1;F++)E=Math.min(E,Math.abs(d.getCoordinateFromTick(C[F+1])-d.getCoordinateFromTick(C[F])));if(E>=f.minTickSpace)for(var z=0,x=C.length;z<x;z++)n=d.getCoordinateFromTick(C[z]),"bottom"==g?m(n,0,v):"top"==g?m(n,c,-v):"left"==g?i(c,r-n,-v):"right"==g&&i(.5,r-n,v)}a.path(e).stroke(w).fill("none")};var F=function(a){for(var b,c=0,d=a.length;c<d;c++)if(b=a[c].label,b&&!b.hasClass("idd-axis-label")){var e=b[0];n[0].appendChild(e),b.addClass("idd-axis-label"),b._size={width:e.offsetWidth,height:e.offsetHeight}}};this.update=function(a){a&&(i=a),E()},this.destroy=function(){e[0].innerHTML="",e.removeClass("idd-axis"),e.removeClass("unselectable")},this.remove=function(){var a=e[0].parentElement;if(a){a.removeChild(e[0]);var b=a.parentElement;
b&&("idd-plot-master"==b.className||b.classList&&b.classList.contains("idd-plot-master"))&&b.plot.removeDiv(a)}this.destroy()},b&&(E(),b.addClass("idd-axis"),b.addClass("unselectable"))}},f.NumericAxis=function(a){this.base=f.TicksRenderer,a[0].axis=this,this.getCoordinateFromTick=function(a){var b=this.deltaRange;if(isFinite(b)){var c=a,d=this.dataTransform;return d&&(c=d.dataToPlot(a)),(c-this.range.min)*b}return this.axisSize/2},this.base(a,new f.NumericTickSource)},f.NumericAxis.prototype=new f.TicksRenderer,f.LogarithmicAxis=function(a){this.base=f.TicksRenderer;var b=Math.log(10);this.getCoordinateFromTick=function(a){var c=this.deltaRange;if(isFinite(c)){var d=Math.log(a)/b;return(d-this.range.min)*c}return this.axisSize/2},this.base(a,new f.LogarithmicTickSource)},f.LogarithmicAxis.prototype=new f.TicksRenderer,f.LabelledAxis=function(a,b){this.base=f.TicksRenderer;this.getCoordinateFromTick=function(a){var b=this.deltaRange;if(isFinite(b)){var c=a;return this.dataTransform&&(c=this.dataTransform.dataToPlot(a)),(c-this.range.min)*b}return this.axisSize/2},b&&b.rotate&&(this.rotateLabels=!0),this.base(a,new f.LabelledTickSource(b))},f.LabelledAxis.prototype=new f.TicksRenderer,f.TickSource=function(){var b=[],c=[],d=[],e=[],f=0;this.start,this.finish,this.getDiv=function(g){var h=this.getInnerText(g),i=d.indexOf(h);if(i!=-1){c[i]=!0,e[i].display="block";var j=b[i][0];return b[i]._size={width:j.offsetWidth,height:j.offsetHeight},b[i]}var i=c.indexOf(!1);if(i!=-1){c[i]=!0,e[i].display="block",d[i]=h;var j=b[i][0];return j.innerHTML=h,b[i]._size={width:j.offsetWidth,height:j.offsetHeight},b[i]}var j=a("<div>"+h+"</div>");return c[f]=!0,b[f]=j,d[f]=h,e[f]=j[0].style,j._size=void 0,f++,j},this.getInnerText=function(a){if(a)return a.toString()},this.refreshDivs=function(){for(var a=0;a<f;a++)c[a]?c[a]=!1:e[a].display="none"},this.getTicks=function(a){this.start=a.min,this.finish=a.max},this.decreaseTickCount=function(){},this.increaseTickCount=function(){},this.round=function(a,b){if(b<=0)return-b>15?parseFloat(a.toFixed(15)):parseFloat(a.toFixed(-b));var c=Math.pow(10,b-1);return Math.round(a/c)*c}},f.NumericTickSource=function(){this.base=f.TickSource,this.base();var a,b,c=this,d=1/Math.log(10);this.getInnerText=function(a){return 0==a?a.toString():b>=f.minNumOrder?this.round(a/Math.pow(10,b),-1)+"e+"+b:this.round(a,b).toString()},this.getTicks=function(c){return f.NumericTickSource.prototype.getTicks.call(this,c),a=1,b=Math.floor(Math.log(this.finish-this.start)*d),e()},this.renderToSvg=function(a,b){return b.text(c.getInnerText(a.position))};var e=function(){var d=[];if(c.start>c.finish)return d;if(isFinite(b))for(var e,f=a*Math.pow(10,b),g=Math.floor(c.start/f),h=Math.floor(c.finish/f)-g+2,i=0,j=g*f,k=0;k<h;k++)e=j+k*f,e>=c.start&&e<=c.finish&&(d[i]={position:e,label:c.getDiv(e)},i++);else d[0]={position:c.start,label:c.getDiv(c.start),invisible:!0};return c.refreshDivs(),d};this.decreaseTickCount=function(){return 1==a?a=2:2==a?a=5:5==a&&(a=1,b++),e()},this.increaseTickCount=function(){return 1==a?(a=5,b--):2==a?a=1:5==a&&(a=2),e()},this.getSmallTicks=function(a){var b=[],c=0;if(a.length>1){var d=a[0].position,e=Math.abs(a[1].position-d)/10;for(d-=e;d>this.start&&c<10;)b[c]=d,c++,d-=e;for(var f=a.length,g=0;g<f-1;g++){d=a[g].position+e;for(var h=0;h<9;h++)b[c]=d,c++,d+=e}d=a[f-1].position+e;for(var i=0;d<this.finish&&i<10;)b[c]=d,c++,d+=e,i++}return b},this.getMinTicks=function(){var e=[];if(b=Math.floor(Math.log(this.finish-this.start)*d),isFinite(b)){var f=Math.pow(10,b),g=Math.floor(c.start/f)*f;g<c.start&&(g+=f);var h=Math.floor(c.finish/f)*f;if(h>c.finish&&(h-=f),g!=h)e[0]={position:g,label:c.getDiv(c.round(g,b))},e[1]={position:h,label:c.getDiv(c.round(h,b))};else{b--,a=5,f=a*Math.pow(10,b),g=Math.floor(c.start/f);for(var i,j=Math.floor(c.finish/f)-g+2,k=0,l=g*f,m=0;m<j;m++)i=l+m*f,i>=c.start&&i<=c.finish&&(e[k]={position:i,label:c.getDiv(c.round(i,b))},k++)}}else e[0]={position:c.start,label:c.getDiv(c.start),invisible:!0};return this.refreshDivs(),e}},f.NumericTickSource.prototype=new f.TickSource,f.LogarithmicTickSource=function(){this.base=f.TickSource,this.base();var a,b,c=this,d=1,e=10;this.getInnerText=function(a){return Math.abs(a)<f.minLogOrder?Math.pow(10,a).toString():"10<sup>"+a+"</sup>"},this.getTicks=function(c){return f.LogarithmicTickSource.prototype.getTicks.call(this,c),a=Math.pow(10,this.start),b=Math.pow(10,this.finish),g()};var g=function(){var f=[];if(isFinite(Math.pow(10,-c.start))&&isFinite(b))if(a==b)f[0]={position:c.start,label:c.getDiv(c.start),invisible:!0};else for(var g=c.start/d|0,h=(c.finish/d|0)-g+3,i=(g-1)*d,j=Math.pow(10,i),k=0,l=0;l<h;l++)j>=a&&j<=b&&(f[k]={position:j,label:c.getDiv(i)},k++),i+=d,j*=e;return c.refreshDivs(),f};this.decreaseTickCount=function(){return d*=2,e=Math.pow(10,d),g()},this.increaseTickCount=function(){return d>1&&(d/=2,e=Math.pow(10,d)),g()},this.getSmallTicks=function(e){var f=[],g=isFinite(Math.pow(10,-c.start))&&isFinite(b),h=0;if(e.length>0&&1==d&&g){var i=e[0].position,j=i/10;for(i-=j;i>a&&h<10;)f[h]=i,h++,i-=j;for(var k=e.length,l=0;l<k-1;l++){i=e[l].position,j=(e[l+1].position-i)/10,i+=j;for(var m=0;m<9;m++)f[h]=i,h++,i+=j}for(i=e[k-1].position,j=i,i+=j;i<b;)f[h]=i,h++,i+=j}return f},this.getMinTicks=function(){var d=[],e=isFinite(Math.pow(10,-c.start))&&isFinite(b);return e?a==b&&(d[0]={position:c.start,label:c.getDiv(c.start),invisible:!0},this.refreshDivs()):(d[0]={position:1,label:c.getDiv(0)},this.refreshDivs()),d}},f.LogarithmicTickSource.prototype=new f.TickSource,f.LabelledTickSource=function(a){this.base=f.TickSource,this.base();var b=this,c=[],d=[];if(a&&a.labels){for(var e=a.labels.length,g=0;g<e;g++)c[g]=a.labels[g].toString();if(a.ticks)d=a.ticks;else for(var g=0;g<e;g++)d[g]=g}var h,i,j=1,k=d.length-c.length,l=!(!a||!a.rotate)&&a.rotate;this.renderToSvg=function(a,b){return b.text(a.text)},this.getTicks=function(a){if(f.LabelledTickSource.prototype.getTicks.call(this,a),j=1,k<=0){var b=0,c=d.length-1,e=0|this.start;if(e>d[b])for(;c-b>1;){var g=Math.round((b+c)/2);d[g]<e?b=g:c=g}if(h=b,b=0,c=d.length-1,e=1|this.finish,e<d[c])for(;c-b>1;){var g=Math.round((b+c)/2);d[g]<e?b=g:c=g}if(i=c,i>h)for(var l=(d.length-1)/(i-h);j<l;)j*=2}return m()};var m=function(){var a=[];if(k<=0){var e=Math.floor((d.length-1)/j);e>d.length-1?e=d.length-1:e<1&&(e=1);for(var f=0,g=0|b.start;d[f]<g;)f+=e;f-e>=0&&d[f]>g&&(f-=e);for(var m=i-h+1,n=0,o=0;o<m;o++){if(g=d[f],g>=b.start&&g<=b.finish){var p=b.getDiv(c[f]);l&&p.addClass("idd-verticalText"),a[n]={position:g,label:p,text:c[f]},n++}f+=e}}else{for(var q=0;d[q]<b.start;)q++;q>0&&q--;for(var r=d.length-1;d[r]>b.finish;)r--;r<d.length-1&&r++;for(var m=r-q+1,n=0,s=d[q],o=0;o<m;o++){g=s,g>=b.start&&g<=b.finish&&(a[n]={position:g},n++),q++,s=d[q];var t=1;if(j>1&&(t/=j),o!=m-1){var u=(Math.min(s,b.finish)+Math.max(g,b.start))/2;if(u>=b.start&&u<=b.finish){var p=b.getDiv(c[q-1]);l&&(p.addClass("idd-verticalText"),p.css("transform","rotate(-90deg) scale("+t+", "+t+")")),a[n]={position:u,label:p,invisible:!0,text:c[q-1]},n++}}}}return b.refreshDivs(),a};this.decreaseTickCount=function(){return k<=0?j/=2:j++,m()},this.increaseTickCount=function(){return k<=0?j*=2:j--,m()},this.getSmallTicks=function(a){var b=[];if(k<=0)for(var c=0,e=0,f=0;f<d.length;f++)a.length>e&&d[f]==a[e].position?e++:(b[c]=d[f],c++);return b},this.getMinTicks=function(){var a=[];if(k<=0&&0==c.length){var e=b.getDiv(c[0]);l&&e.addClass("idd-verticalText"),a[0]={position:d[0],label:e,text:c[0]},e=b.getDiv(c[c.length-1]),l&&e.addClass("idd-verticalText"),a[1]={position:d[d.length-1],label:e,text:c[c.length-1]},b.refreshDivs()}return a}},f.LabelledTickSource.prototype=new f.TickSource,f.TicksRenderer.getAxisType=function(a){return void 0===a?"numeric":a.type&&"log10"==a.type?"log":"numeric"},f=f||{},f.ColorPalette=function(a,b,c){var d,e,g,h=this;if(Object.defineProperty(this,"isNormalized",{get:function(){return d},configurable:!1}),Object.defineProperty(this,"range",{get:function(){return e},configurable:!1}),Object.defineProperty(this,"points",{get:function(){return g},configurable:!1}),d=a,e=d?{min:0,max:1}:{min:b.min,max:b.max},e.min>=e.max)throw"range is incorrect (min >= max)";if(void 0==c)throw"points are undefined";if(c.length<2)throw"Palette should have at least two points";g=c.slice(0),this.getRgba=function(a){var b=h.getHsla(a);return f.ColorPalette.HSLtoRGB(b)},this.getHsla=function(a){var b=g.length;if(a<=g[0].x)return g[0].leftColor;if(a>=g[b-1].x)return g[b-1].rightColor;for(var c=0,d=b-1;d-c>1;){var e=Math.round((c+d)/2);g[e].x<a?c=e:d=e}var f=g[c];f.x==a&&(d=c);var h=g[d],i=(a-f.x)/(h.x-f.x),j=f.rightColor,k=h.leftColor;0==j.h&&0==j.s&&(j.h=k.h),0==k.h&&0==k.s&&(k.h=j.h);var l=j.h,m=k.h;Math.abs(m-l)>3&&(l<m?l+=6:m+=6);var n={h:l+(m-l)*i,s:j.s+(k.s-j.s)*i,l:j.l+(k.l-j.l)*i,a:j.a+(k.a-j.a)*i};return n.h>=6&&(n.h-=6),n},this.absolute=function(a,b){for(var c=g.length,d=(b-a)/(e.max-e.min),h=new Array(c),i=0;i<c;i++){var j=g[i];h[i]={x:d*(j.x-e.min)+a,rightColor:j.rightColor,leftColor:j.leftColor}}return new f.ColorPalette(!1,{min:a,max:b},h)},this.relative=function(){if(d)return this;for(var a=g.length,b=1/(e.max-e.min),c=new Array(a),h=0;h<a;h++){var i=g[h];c[h]={x:b*(i.x-e.min),rightColor:i.rightColor,leftColor:i.leftColor}}return new f.ColorPalette(!0,{min:0,max:1},c)},this.banded=function(a){if(!a)throw"bands is undefined";var b=!1;if("number"==typeof a){if(a<1)throw new"number of bands is less than 1";b=!0;var c=a-1,g=(e.max-e.min)/a;a=new Array(c);for(var h=0;h<c;h++)a[h]=(h+1)*g+e.min}var i=a.length+2,j=a.length+1;if(i<2)throw"number of bands is less than 1";for(var k,l,m=new Array(i),n=this.getHsla(e.min),o=j>1?(e.max-e.min)/(j-1):.5*(e.max-e.min),h=0;h<i-1;h++){if(0==h)k=e.min,l=e.min;else{if(k=h==i-2?e.max:b?e.min+h*o:(a[h-1]+a[h])/2,l>=a[h-1])throw"bands points are incorrect";l=a[h-1]}var p=this.getHsla(k),q={x:l,rightColor:p,leftColor:n};m[h]=q,n=p}if(l>=e.max)throw"bands points are incorrect";return m[i-1]={x:e.max,rightColor:n,leftColor:n},new f.ColorPalette(d,e,m)}},f.ColorPalette.toArray=function(a,b){var c,d,e=new Uint8Array(b<<2),f=a.getRgba;a.isNormalized?(c=1/(b-1),d=0):(d=a.range.min,c=(a.range.max-a.range.min)/(b-1));for(var g,h,i=0,h=0;i<b;i++)g=f(i*c+d),e[h++]=g.r,e[h++]=g.g,e[h++]=g.b,e[h++]=255*g.a;return e},f.ColorPalette.create=function(){var a=arguments;if(!a||0==a.length)throw"colors is undefined or empty";var b=a.length;1==b&&(b++,a=[a[0],a[0]]);for(var c=new Array(b),d=1/(b-1),e=0;e<b;e++){var g=a[e],h="number"==typeof g.r?f.ColorPalette.RGBtoHSL(g):g;c[e]={x:e*d,rightColor:h,leftColor:h}}return new f.ColorPalette(!0,{min:0,max:1},c)},f.ColorPalette.parse=function(a){var b,c=!0,d=[];if(void 0==a&&(a=""),""==a)return f.palettes.grayscale;var e,g=new f.Lexer(a),h=-1;if(g.readNext()){if(d.push({x:0,rightColor:{h:0,s:0,l:0,a:1},leftColor:{h:0,s:0,l:1,a:1}}),"number"==g.currentLexeme){if(d[d.length-1].x=g.currentNumber,c=!1,g.readNext()&&("separator"!=g.currentLexeme||"equal"!=g.currentSeparator))throw g.position+": separator '=' expected";if(g.readNext()&&"color"!=g.currentLexeme)throw g.position+": color expected"}if("color"!=g.currentLexeme)throw g.position+": wrong lexeme";d[d.length-1].rightColor=g.currentColor,d[d.length-1].leftColor=g.currentColor,d.push({x:d[0].x,rightColor:g.currentColor,leftColor:g.currentColor})}for(e=d[0].x;g.readNext();){if("separator"!=g.currentLexeme)throw g.position+": separator expected";if("equal"==g.currentSeparator){if(g.readNext())if("number"==g.currentLexeme){if(g.currentNumber<e)throw g.position+": number is less than previous";if(e=g.currentNumber,h==-1)d[d.length-1].x=g.currentNumber,h=1;else{if(0!=h)throw g.position+": wrong lexeme";d[d.length-1].x=g.currentNumber,h=2}}else{if("color"!=g.currentLexeme)throw g.position+": wrong lexeme";if(1==h||2==h)d[d.length-1].rightColor=g.currentColor,h=-1;else{if(0!=h&&h!=-1)throw g.position+": wrong lexeme";d[d.length-1].x=d[0].x-1,d[d.length-1].rightColor=g.currentColor,h=-1}}}else if("comma"==g.currentSeparator&&g.readNext())if(1==h||h==-1||2==h)if("number"==g.currentLexeme){if(g.currentNumber<=e)throw g.position+": number is less than previous";if(e=g.currentNumber,!g.readNext()||"separator"!=g.currentLexeme||"equal"!=g.currentSeparator)throw g.position+": wrong lexeme";if(!g.readNext()||"color"!=g.currentLexeme)throw g.position+": color expected";h!=-1?d.push({x:g.currentNumber,rightColor:g.currentColor,leftColor:g.currentColor}):(d[d.length-1].x=g.currentNumber,d[d.length-1].rightColor=g.currentColor,d[d.length-1].leftColor=g.currentColor),h=-1}else{if("color"!=g.currentLexeme)throw g.position+": wrong lexeme";h==-1&&d.pop(),h=0}else if(0==h)if("number"==g.currentLexeme){if(g.currentNumber<=e)throw g.position+": number is less than previous";if(e=g.currentNumber,d[d.length-1].x=d[0].x-1,!g.readNext()||"separator"!=g.currentLexeme||"equal"!=g.currentSeparator)throw g.position+": wrong lexeme";if(!g.readNext()||"color"!=g.currentLexeme)throw g.position+": color expected";d.push({x:g.currentNumber,rightColor:g.currentColor,leftColor:g.currentColor}),h=-1}else{if("color"!=g.currentLexeme)throw g.position+": wrong lexeme";d[d.length-1].x=d[0].x-1,h=0}h==-1?d.push({x:d[0].x,rightColor:g.currentColor,leftColor:g.currentColor}):0==h&&d.push({x:d[0].x,rightColor:g.currentColor,leftColor:g.currentColor})}if("separator"==g.currentLexeme)throw g.position+": wrong lexeme";if("number"==g.currentLexeme&&c||"color"==g.currentLexeme&&!c)throw g.position+": wrong ending";if(c&&(d[d.length-1].x=1,d[d.length-1].x<d[d.length-2].x))throw g.position+": number is less than previous";if(d[d.length-1].rightColor=d[d.length-1].leftColor,d[0].x>=d[d.length-1].x)throw g.position+": wrong range of palette";b={min:d[0].x,max:d[d.length-1].x};for(var i=1,j=0,k=1,l=d.length;k<l;k++)if(d[k].x==d[0].x-1)0==j&&(i=k),j++;else if(0!=j){for(var m=(d[i+j].x-d[i-1].x)/(j+1),n=0;n<j;n++)d[i+n].x=d[i-1].x+m*(n+1);j=0,i=1}return new f.ColorPalette(c,b,d)},f.Lexer=function(a){if("string"!=typeof a)throw"wrong definition of palette: must be a string";var b,c,d,e,g=a,h=0;Object.defineProperty(this,"position",{get:function(){return h},configurable:!1}),Object.defineProperty(this,"paletteString",{get:function(){return g},configurable:!1}),Object.defineProperty(this,"currentSeparator",{get:function(){return e},configurable:!1}),Object.defineProperty(this,"currentLexeme",{get:function(){return d},configurable:!1}),Object.defineProperty(this,"currentNumber",{get:function(){return c},configurable:!1}),Object.defineProperty(this,"currentColor",{get:function(){return b},configurable:!1}),this.readNext=function(){if(h>=g.length)return!1;for(;" "===g[h];)h++;if("#"===g[h]||/^[a-z]/.test(g[h].toLowerCase())){d="color";for(var a=h;h<g.length&&" "!=g[h]&&"="!=g[h]&&","!=g[h];)h++;var i=f.ColorPalette.colorFromString(g.substring(a,h));b=f.ColorPalette.RGBtoHSL(i)}else if("="===g[h]||","===g[h])d="separator",e="="==g[h]?"equal":"comma",h++;else{d="number";for(var a=h;h<g.length&&" "!=g[h]&&"="!=g[h]&&","!=g[h];)h++;var j=g.substring(a,h),k=j.replace(/[^0-9+-Ee.]/g,"");if(j!=k)throw"wrong number value";c=parseFloat(g.substring(a,h))}return!0}},f.ColorPalette.colorFromString=function(a){var b={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};if("string"!=typeof a)throw"wrong definition of color: must be a string";var c,d,e,f;if(b[a.toLowerCase()]){var g=b[a.toLowerCase()];a=g}if("#"!=a.charAt(0))throw"wrong definition of hex color";if(7==a.length)f=1,c=parseInt(a.substring(1,3),16),d=parseInt(a.substring(3,5),16),e=parseInt(a.substring(5,7),16);else{if(9!=a.length)throw"wrong definition of hex color";c=parseInt(a.substring(1,3),16),d=parseInt(a.substring(3,5),16),e=parseInt(a.substring(5,7),16),f=parseInt(a.substring(7,9),16)/255}if(isNaN(c)||isNaN(d)||isNaN(e)||isNaN(f))throw"wrong definition of hex color";return{r:c,g:d,b:e,a:f}},f.ColorPalette.RGBtoHSL=function(a){var b,c,d,e;e=a.a;var f=a.r/255,g=a.g/255,h=a.b/255,i=Math.max(f,g);i=Math.max(i,h);var j=Math.min(f,g);return j=Math.min(j,h),d=(i+j)/2,c=i==j?0:d<.5?(i-j)/(i+j):(i-j)/(2-i-j),i==j?b=0:i==f?b=g>=h?(g-h)/(i-j):(g-h)/(i-j)+6:i==g?b=2+(h-f)/(i-j):i==h&&(b=4+(f-g)/(i-j)),{h:b,s:c,l:d,a:e}},f.ColorPalette.HSLtoRGB=function(a){var b,c,d,e;e=a.a;var f=a.h,g=a.s,h=a.l,i=(1-Math.abs(2*h-1))*g,j=i*(1-Math.abs(f%2-1));f<2?(d=0,f<1?(b=Math.round(255*i),c=Math.round(255*j)):(b=Math.round(255*j),c=Math.round(255*i))):f<4?(b=0,f<3?(c=Math.round(255*i),d=Math.round(255*j)):(c=Math.round(255*j),d=Math.round(255*i))):f<6&&(c=0,f<5?(b=Math.round(255*j),d=Math.round(255*i)):(b=Math.round(255*i),d=Math.round(255*j)));var k=255*(h-i/2),l=b+k;return b=l>255?255:l<0?0:Math.round(l),l=c+k,c=l>255?255:l<0?0:Math.round(l),l=d+k,d=l>255?255:l<0?0:Math.round(l),{r:b,g:c,b:d,a:e}},f.ColorPaletteViewer=function(b,c,d){function e(){p=a("<div data-idd-placement='bottom' style='width: "+i+"px; color: rgb(0,0,0)'></div>"),h[0].appendChild(p[0]),q=new f.NumericAxis(p),l&&!l.isNormalized?q.update({min:l.range.min,max:l.range.max}):m&&q.update({min:m.min,max:m.max})}function g(){h[0].removeChild(p[0]),p=null,q=null}var h=b,i=h.width(),j=20,k=!0,l=c,m=void 0;void 0!==d&&(void 0!==d.height&&(j=d.height),void 0!==d.width&&(i=d.width),void 0!==d.axisVisible&&(k=d.axisVisible));var n=a("<canvas height='"+j+"px'width='"+i+"px' style='display: block'></canvas>");h[0].appendChild(n[0]);var o=n.get(0).getContext("2d"),p=null,q=null;k&&e(),Object.defineProperty(this,"axisVisible",{get:function(){return k},set:function(a){a=!!a,k!=a&&(k=a,k?e():g())},configurable:!1}),Object.defineProperty(this,"palette",{get:function(){return l},set:function(a){a&&(l=a,!k||l.isNormalized&&m||q.update({min:l.range.min,max:l.range.max}),r())},configurable:!1}),Object.defineProperty(this,"dataRange",{get:function(){return m},set:function(a){a&&(m=a,!k||l&&!l.isNormalized||q.update({min:m.min,max:m.max}))},configurable:!1});var r=function(){for(var a,b=(l.range.max-l.range.min)/i,c=o.createLinearGradient(0,0,i,0),d=l.range.min,e=0;e<i;e++)a=l.getRgba(d),c.addColorStop(e/i,"rgba("+a.r+","+a.g+","+a.b+","+a.a+")"),d+=b;o.fillStyle=c,o.fillRect(0,0,i,j)};l&&r()},f.SvgColorPaletteViewer=function(a,b,c,d){function e(){var a=c.children[1];a.axis.renderToSvg(j),j.translate(0,g+.5)}var f=170,g=20,h=!0,i=b;void 0!==d&&(void 0!==d.height&&(g=d.height),void 0!==d.width&&(f=d.width),void 0!==d.axisVisible&&(h=d.axisVisible));var j=a.group();h&&e();var k=function(){var b,c=(i.range.max-i.range.min)/f,d=a.gradient("linear",function(a){for(var d=i.range.min,e=0;e<f;e++)b=i.getRgba(d),a.at(e/f,"rgba("+b.r+","+b.g+","+b.b+","+b.a+")"),d+=c});a.rect(f,g).fill(d)};i&&k()},f.SizePalette=function(a,b,c){var d,e,f;if(Object.defineProperty(this,"isNormalized",{get:function(){return d},configurable:!1}),Object.defineProperty(this,"range",{get:function(){return e},configurable:!1}),Object.defineProperty(this,"sizeRange",{get:function(){return f},configurable:!1}),d=a,e=d?{min:0,max:1}:{min:c.min,max:c.max},f={min:b.min,max:b.max},e.min>e.max)throw"valueRange is incorrect (min >= max)";var g=(f.max-f.min)/(e.max-e.min);this.getSize=function(a){return a<=e.min?f.min:a>=e.max?f.max:g*(a-e.min)+f.min}},f.SizePalette.Create=function(a){if(a instanceof f.SizePalette)return a;var b=a.sizeRange,c=a.valueRange;return new f.SizePalette("undefined"==typeof c,b,c)},f.SizePaletteViewer=function(b,c,d){function e(){o=a("<div data-idd-placement='bottom' style='width: "+i+"px; margin-top: -1px; color: rgb(0,0,0)'></div>"),n=new f.NumericAxis(o),h[0].appendChild(o[0]),l?l.isNormalized||n.update({min:l.range.min,max:l.range.max}):p&&n.update({min:p.min,max:p.max})}function g(){h[0].removeChild(o[0]),o=null,n=null}var h=b,i=h.width(),j=35,k=!0,l=c;void 0!==d&&(void 0!==d.axisVisible&&(k=d.axisVisible),void 0!==d.width&&(i=d.width),void 0!==d.height&&(j=d.height));var m=a("<canvas height='"+j+"px'width='"+i+"px' style='display: block'></canvas>");h[0].appendChild(m[0]);var n=null,o=null;k&&e(),Object.defineProperty(this,"axisVisible",{get:function(){return k},set:function(a){a=!!a,k!=a&&(k=a,k?e():g())},configurable:!1}),Object.defineProperty(this,"palette",{get:function(){return l},set:function(a){a&&(l=a,k&&!l.isNormalized&&n.update({min:l.range.min,max:l.range.max}),r())},configurable:!1});var p=void 0;Object.defineProperty(this,"dataRange",{get:function(){return p},set:function(a){a&&(p=a,!k||l&&!l.isNormalized||n.update({min:p.min,max:p.max}))},configurable:!1});var q=m.get(0).getContext("2d"),r=function(){q.clearRect(0,0,i,j),q.fillStyle="lightgray",q.strokeStyle="black";var a=0,b=j;l&&l.sizeRange&&(a=l.sizeRange.min,b=l.sizeRange.max);var c=j*i/Math.max(b,a);q.beginPath(),q.moveTo(0,j),0!=a&&q.lineTo(0,Math.max(0,j-a)),c<i?(q.lineTo(c,0),a<=b?q.lineTo(i,0):q.lineTo(i,Math.max(0,j-b))):q.lineTo(i,Math.max(0,j-b)),q.lineTo(i,j),q.lineTo(0,j),q.closePath(),q.fill(),q.stroke()};r()},f.SvgSizePaletteViewer=function(a,b,c,d){function e(){var b=c.children[1],d=a.group();b.axis.renderToSvg(d),d.translate(0,g)}var f=170,g=75,h=!0,i=b;void 0!==d&&(void 0!==d.axisVisible&&(h=d.axisVisible),void 0!==d.width&&(f=d.width),void 0!==d.height&&(g=d.height));h&&e();var j=function(){var b=0,c=g;i.sizeRange&&(b=i.sizeRange.min,c=i.sizeRange.max);var d=g*f/Math.max(c,b),e=[];0!=b?e.push([0,Math.max(0,g-b)]):e.push([0,g]),d<f?(e.push([d,0]),b<=c?e.push([f,0]):e.push([f,Math.max(0,g-c)])):(e.push([f,Math.max(0,g-c)]),e.push([f,Math.max(0,g-c)])),a.polyline([[0,g],e[0],e[1],e[2],[f,g],[0,g]]).fill("lightgray").stroke("black")};j()},f.UncertaintySizePaletteViewer=function(b,c){var d=b,e=d.width(),g=65;void 0!==c&&(void 0!==c.width&&(e=c.width),void 0!==c.height&&(g=c.height));var h=void 0;Object.defineProperty(this,"maxDelta",{get:function(){return h},set:function(a){a&&(h=a,l())}});var i=a("<canvas height='50px'></canvas>");d[0].appendChild(i[0]);var j=i[0].getContext("2d"),k=[{x:25,y:20,min:16,max:16},{x:75,y:20,min:10,max:16},{x:125,y:20,min:0,max:16}],l=function(){for(var a=0;a<k.length;a++)f.Petal.drawSample(j,k[a].x,k[a].y,k[a].min,k[a].max,"#484848");j.lineWidth=1,j.beginPath(),j.moveTo(20,45.5),j.lineTo(118,45.5),j.stroke(),j.closePath(),j.beginPath(),j.moveTo(118,45.5),j.lineTo(103.5,40.5),j.lineTo(103.5,49.5),j.lineTo(118,45.5),j.stroke(),j.closePath(),j.fill(),j.strokeStyle="black",j.fillStyle="black",j.lineWidth=1,h&&(j.fillText("X",9,49),j.fillText("X",122,49),j.beginPath(),j.moveTo(134,44.5),j.lineTo(141,44.5),j.stroke(),j.closePath(),j.beginPath(),j.moveTo(134,48.5),j.lineTo(141,48.5),j.stroke(),j.closePath(),j.beginPath(),j.moveTo(137.5,41),j.lineTo(137.5,48),j.stroke(),j.closePath(),j.fillText("",round(h,{min:0,max:h},!1),145,49))};l(),a("<div style='margin-left: 30px; margin-top: -10px'>uncertainty</div>").appendTo(d)},f.palettes={grayscale:new f.ColorPalette(!0,{min:0,max:1},[{x:0,rightColor:{h:0,s:0,l:0,a:1},leftColor:{h:0,s:0,l:0,a:1}},{x:1,rightColor:{h:0,s:0,l:1,a:1},leftColor:{h:0,s:0,l:1,a:1}}])},f.Gestures={},f.Gestures.FullEventList=["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel","gesturestart","gesturechange","gestureend","MSGestureStart","MSGestureChange","MSGestureEnd","MSGestureCancel","MSPointerDown"],f.Gestures.zoomLevelFactor=1.4,f.Gestures.getXBrowserMouseOrigin=function(a,b){var c=function(a){for(var b=0,c=0;a;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return{left:b,top:c}},d=c(a[0]),e=b.pageX-d.left,f=b.pageY-d.top;return{x:e,y:f}},f.Gestures.PanGesture=function(a,b,c){this.Type="Pan",this.Source=c,this.xOffset=a,this.yOffset=b},f.Gestures.ZoomGesture=function(a,b,c,d){this.Type="Zoom",this.Source=d,this.xOrigin=a,this.yOrigin=b,this.scaleFactor=c},f.Gestures.PinGesture=function(a){this.Type="Pin",this.Source=a},f.Gestures.createPanSubject=function(c){var d=a(document),e=b.Observable.fromEvent(c,"mousedown"),g=b.Observable.fromEvent(c,"mousemove"),h=b.Observable.fromEvent(d,"mouseup"),i=g.skip(1).zip(g,function(a,b){return new f.Gestures.PanGesture(a.clientX-b.clientX,a.clientY-b.clientY,"Mouse")}),j=h,k=e.selectMany(function(a){return i.takeUntil(j)});return k},f.Gestures.createPinSubject=function(a){var c=b.Observable.fromEvent(a,"mousedown");return c.select(function(a){return new f.Gestures.PinGesture("Mouse")})},f.Gestures.createZoomSubject=function(a){a.mousewheel(function(b,c){b.preventDefault();var d=jQuery.Event("xbrowserwheel");d.delta=c,d.origin=f.Gestures.getXBrowserMouseOrigin(a,b),a.trigger(d)});var c=b.Observable.fromEvent(a,"xbrowserwheel"),d=c.zip(c,function(a){return new f.Gestures.ZoomGesture(a.origin.x,a.origin.y,a.delta>0?1/f.Gestures.zoomLevelFactor:1*f.Gestures.zoomLevelFactor,"Mouse")}),e=b.Observable.fromEvent(a,"dblclick");e.zip(e,function(b){var c=f.Gestures.getXBrowserMouseOrigin(a,b);return new f.Gestures.ZoomGesture(c.x,c.y,1/f.Gestures.zoomLevelFactor,"Mouse")});return d},f.Gestures.createTouchPanSubject=function(c){var d=a(document),e=b.Observable.fromEvent(c,"touchstart"),g=b.Observable.fromEvent(c,"touchmove"),h=b.Observable.fromEvent(d,"touchend"),i=b.Observable.fromEvent(d,"touchcancel"),j=e.selectMany(function(a){return g.takeUntil(h.merge(i)).skip(1).zip(g,function(a,b){return{left:a.originalEvent,right:b.originalEvent}}).where(function(a){return 1==a.left.targetTouches.length&&1==a.right.targetTouches.length&&1==a.left.changedTouches.length&&1==a.right.changedTouches.length}).select(function(a){return new f.Gestures.PanGesture(a.left.targetTouches[0].pageX-a.right.targetTouches[0].pageX,a.left.targetTouches[0].pageY-a.right.targetTouches[0].pageY,"Touch")})});return j},f.Gestures.createTouchPinSubject=function(a){var c=b.Observable.fromEvent(a,"touchstart");return c.select(function(a){return new f.Gestures.PinGesture("Touch")})},f.Gestures.createTouchZoomSubject=function(c){var d=a(document),e=b.Observable.fromEvent(c,"touchstart"),g=b.Observable.fromEvent(c,"touchmove"),h=b.Observable.fromEvent(d,"touchend"),i=b.Observable.fromEvent(d,"touchcancel"),j=e.selectMany(function(a){return g.takeUntil(h.merge(i)).skip(1).zip(g,function(a,b){return{left:a.originalEvent,right:b.originalEvent}}).where(function(a){return 2==a.left.targetTouches.length&&2==a.right.targetTouches.length}).select(function(a){var b=Math.sqrt((a.left.targetTouches[0].pageX-a.left.targetTouches[1].pageX)*(a.left.targetTouches[0].pageX-a.left.targetTouches[1].pageX)+(a.left.targetTouches[0].pageY-a.left.targetTouches[1].pageY)*(a.left.targetTouches[0].pageY-a.left.targetTouches[1].pageY)),c=Math.sqrt((a.right.targetTouches[0].pageX-a.right.targetTouches[1].pageX)*(a.right.targetTouches[0].pageX-a.right.targetTouches[1].pageX)+(a.right.targetTouches[0].pageY-a.right.targetTouches[1].pageY)*(a.right.targetTouches[0].pageY-a.right.targetTouches[1].pageY)),d=b/c,e={x:Math.abs(a.right.targetTouches[1].pageX-a.right.targetTouches[0].pageX),y:Math.abs(a.right.targetTouches[1].pageY-a.right.targetTouches[0].pageY)};return new f.Gestures.ZoomGesture(e.x,e.y,1/d,"Touch")})});return j},f.Gestures.createTouchPanSubjectWin8=function(c){var d=b.Observable.fromEvent(c,"MSGestureStart"),e=b.Observable.fromEvent(c,"MSGestureChange"),g=b.Observable.fromEvent(a(document),"MSGestureEnd"),h=d.selectMany(function(a){var b=e.startWith({originalEvent:{offsetX:a.originalEvent.offsetX,offsetY:a.originalEvent.offsetY}});return b.takeUntil(g).skip(1).zip(b,function(a,b){return{left:a.originalEvent,right:b.originalEvent}}).where(function(a){return a.left.scale===a.right.scale&&a.left.detail!=a.left.MSGESTURE_FLAG_INERTIA&&a.right.detail!=a.right.MSGESTURE_FLAG_INERTIA}).select(function(a){return new f.Gestures.PanGesture(a.left.offsetX-a.right.offsetX,a.left.offsetY-a.right.offsetY,"Touch")})});return h},f.Gestures.createTouchPinSubjectWin8=function(a){var c=b.Observable.fromEvent(a,"MSPointerDown");return c.select(function(a){return new f.Gestures.PinGesture("Touch")})},f.Gestures.createTouchZoomSubjectWin8=function(a){var c=b.Observable.fromEvent(a,"MSGestureStart"),d=b.Observable.fromEvent(a,"MSGestureChange"),e=b.Observable.fromEvent(a,"MSGestureEnd"),g=c.selectMany(function(a){return d.takeUntil(e).where(function(a){return 1!==a.originalEvent.scale&&0!==a.originalEvent.scale&&a.originalEvent.detail!=a.originalEvent.MSGESTURE_FLAG_INERTIA}).select(function(b){return new f.Gestures.ZoomGesture(a.originalEvent.offsetX,a.originalEvent.offsetY,1/b.originalEvent.scale,"Touch")})});return g},f.Gestures.GesturesPool=function(){var a=[];this.addMSGestureSource=function(b){a.forEach(function(a){}),a.push(b),b.addEventListener("MSPointerDown",function(a){if(void 0===b.gesture){var c=new MSGesture;c.target=b,b.gesture=c}b.gesture.addPointer(a.pointerId)},!1)}},f.Gestures.GesturesPool=new f.Gestures.GesturesPool,f.Gestures.getGesturesStream=function(a){var b,c,d;if(window.navigator.msPointerEnabled&&"undefined"!=typeof MSGesture){var e=a[0];f.Gestures.GesturesPool.addMSGestureSource(e),b=f.Gestures.createTouchPanSubjectWin8(a);var g=f.Gestures.createTouchZoomSubjectWin8(a),h=f.Gestures.createZoomSubject(a);c=g.merge(h),d=f.Gestures.createTouchPinSubjectWin8(a)}else b=f.Gestures.createPanSubject(a),c=f.Gestures.createZoomSubject(a),d=f.Gestures.createPinSubject(a);var i=d.merge(b.merge(c));return"ontouchstart"in document.documentElement&&(b=f.Gestures.createTouchPanSubject(a),
c=f.Gestures.createTouchZoomSubject(a),d=f.Gestures.createTouchPinSubject(a),i=i.merge(d.merge(b.merge(c)))),i},f.Gestures.applyHorizontalBehavior=function(a){return a.select(function(a){return"Pan"==a.Type?a.yOffset=0:"Zoom"==a.Type&&(a.preventVertical=!0),a})},f.Gestures.applyVerticalBehavior=function(a){return a.select(function(a){return"Pan"==a.Type?a.xOffset=0:"Zoom"==a.Type&&(a.preventHorizontal=!0),a})},f="undefined"==typeof f?{}:f,f.DataTransform=function(a,b,c,d){this.dataToPlot=a,this.plotToData=b,this.domain=c||{isInDomain:function(a){return!0}},this.type=d};var d=85.05112878,e=d/Math.log(Math.tan(d*Math.PI/360+Math.PI/4));f.mercatorTransform=new f.DataTransform(function(a){return a>=-d&&a<=d?e*Math.log(Math.tan(Math.PI*(a+90)/360)):a},function(a){return-d<=a&&a<=d?360*Math.atan(Math.exp(a/e))/Math.PI-90:a},void 0,"mercator"),Math.LOGE10=Math.log(10),f.logTransform=new f.DataTransform(function(a){return Math.log(a)/Math.LOGE10},function(a){return Math.pow(10,a)},{isInDomain:function(a){return a>0}},"log10"),f.AnimationBase=function(){var a=void 0,c=this;this.isInAnimation=!1;var d=b.Observable.create(function(b){return a=b,function(){}});Object.defineProperty(this,"currentObserver",{get:function(){return a},configurable:!1}),Object.defineProperty(this,"currentObservable",{get:function(){return d},configurable:!1}),this.targetPlotRect=void 0,this.getCurrentPlotRect=function(){},this.stop=function(){c.isInAnimation&&(c.isInAnimation=!1),a&&(a.onNext({plotRect:c.getCurrentPlotRect(),isLast:!0}),a.onCompleted(),a=void 0),this.additionalStopRutines()},this.additionalStopRutines=function(){},this.animate=function(a,b){}},f.PanZoomAnimation=function(){this.base=f.AnimationBase,this.base();var a=this,b=void 0,c=void 0,d=void 0,e=new Date,g=void 0,h=void 0,i=void 0,j=0,k=void 0,l=void 0,m=0,n=0;this.getCurrentPlotRect=function(){return g},Object.defineProperty(this,"previousEstimatedPlotRect",{get:function(){return h},configurable:!1});var o=function(){var b=a.currentObserver;if(b){var f=new Date,h=f.getTime()-e.getTime(),k=l*h,o=d.x-g.x,p=d.y-g.y,q=Math.max(d.width/1e3,Math.sqrt(o*o+p*p)),r=g.x+q*k*i.x,s=g.y+q*k*i.y,t=(d.width-g.width)*k+g.width,u=(d.height-g.height)*k+g.height;e=f,o=r-c.x,p=s-c.y;var v=Math.sqrt(o*o+p*p),w=t-c.width,x=u-c.height;v>=j||Math.abs(w)>Math.abs(m)||Math.abs(x)>Math.abs(n)?(a.isInAnimation=!1,g=d,a.stop()):(g={x:r,y:s,width:t,height:u},a.currentPlotRect=g,b.onNext({plotRect:g,isLast:!1}))}},p=function(){o(),a.isInAnimation&&(k=setTimeout(function(){p()},1e3/60))};this.animate=function(b,e){1.2!=f.Gestures.zoomLevelFactor&&(f.Gestures.zoomLevelFactor=1.2),void 0!==k&&(clearTimeout(k),k=void 0),h=e;var o=b();c=void 0===g?o.plotRect:g,d=e,g=c,i={x:d.x-c.x,y:d.y-c.y},j=Math.sqrt(i.x*i.x+i.y*i.y),i=j>1e-10?{x:i.x/j,y:i.y/j}:{x:0,y:0},m=e.width-c.width,n=e.height-c.height,l=0!=m||0!=n?.008:.009,a.isInAnimation=!0,p()},this.additionalStopRutines=function(){void 0!==k&&(clearTimeout(k),k=void 0),a.isInAnimation=!1,b=void 0,c=void 0,startCS=void 0,d=void 0,e=new Date,g=void 0,h=void 0,i=void 0,j=0,startScreenCenter=void 0,previousFrameScreenCenter=void 0,endScreenCenter=void 0,k=void 0,m=0,n=0}},f.PanZoomAnimation.prototype=new f.AnimationBase,f.Utils.getPlotRectForMap=function(a,b){var c=85.05112878,d=void 0===b?{width:a.getWidth(),height:a.getHeight()}:b,e=a.getCenter(),g=d.width,h=d.height,i=30,j=a.tryLocationToPixel({latitude:0,longitude:e.longitude},Microsoft.Maps.PixelReference.control),k=a.tryLocationToPixel({latitude:0,longitude:e.longitude+i},Microsoft.Maps.PixelReference.control),l=k.x-j.x;l<0&&(l=j.x-a.tryLocationToPixel({latitude:0,longitude:e.longitude-i},Microsoft.Maps.PixelReference.control).x);var m=l/i,n=e.longitude-j.x/m,o=e.longitude+(g-j.x)/m,p=a.getBounds(),q=p.getNorth(),r=p.getSouth(),s=0;if(q>=c){q=c;var t=a.tryLocationToPixel({latitude:q,longitude:e.longitude},Microsoft.Maps.PixelReference.control);s=t.y}var u=0;if(r<=-c){r=-c;var v=a.tryLocationToPixel({latitude:r,longitude:e.longitude},Microsoft.Maps.PixelReference.control);u=h-v.y}var w=o-n;w<0&&(w=p.width);var x={y:r,x:n,width:w,height:q-r},y=f.mercatorTransform.dataToPlot(x.y),z=f.mercatorTransform.dataToPlot(x.y+x.height);if(x.y=y,x.height=z-y,0!=u||0!=s){var A=h-s-u,B=x.height/A,C=u*B,D=s*B,E=x.y-C,F=x.y+x.height+D;x.y=E,x.height=F-E}return x},f.BingMapsAnimation=function(a){this.base=f.AnimationBase,this.base();var b=this,c=a,d=void 0,e=void 0,g=new Date,h=void 0,i=void 0,j=void 0,k=0,l=void 0,m=void 0,n=0,o=0,p=!1;Object.defineProperty(this,"previousEstimatedPlotRect",{get:function(){return i},configurable:!1});var q=function(){var a=b.currentObserver;if(a){var c=new Date,f=c.getTime()-g.getTime(),i=m*f,l=e.x-h.x,n=e.y-h.y,o=Math.max(e.width/1e3,Math.sqrt(l*l+n*n)),p=h.x+o*i*j.x,q=h.y+o*i*j.y,r=(e.width-h.width)*i+h.width,s=(e.height-h.height)*i+h.height;g=c,l=p-d.x,n=q-d.y;var t=Math.sqrt(l*l+n*n);t>=k?(b.isInAnimation=!1,v(e),b.stop()):(h={x:p,y:q,width:r,height:s},b.currentPlotRect=h,v(h))}},r=function(){q(),b.isInAnimation&&(l=setTimeout(function(){r()},1e3/60))};this.animate=function(a,c,g){if(1.4!=f.Gestures.zoomLevelFactor&&(f.Gestures.zoomLevelFactor=1.4),void 0!==l&&(clearTimeout(l),l=void 0),i=c,b.isInAnimation=!0,g&&g.isFirstFrame&&x(!0),g&&"Pan"==g.gestureType){p=!1;var n=a();d=void 0===h?n.plotRect:h,e=c,h=d,j={x:e.x-d.x,y:e.y-d.y},k=Math.sqrt(j.x*j.x+j.y*j.y),j=k>1e-10?{x:j.x/k,y:j.y/k}:{x:0,y:0},m=.008,r()}else p=!0,v(c)};var s=function(a,b,c){var d=Math.max(1,Math.log(b.width/a.width*360/256)/Math.log(2)),e=f.mercatorTransform.plotToData(a.y),g=f.mercatorTransform.plotToData(a.y+a.height),h=Math.max(1,Math.log(b.height/(g-e)*180/256)/Math.log(2));return c===!0&&(d=Math.ceil(d)-1,h=Math.ceil(h)),Math.min(d,h)},t=function(a,b){return{width:360*b.width/(256*Math.pow(2,a)),height:180*b.height/(256*Math.pow(2,a))}};this.setMapView=function(a,b){var d=b;void 0===b&&(d={width:c.getWidth(),height:c.getHeight()});var e=s(a,d,!0),g=(c.getZoom(),{x:a.x+a.width/2,y:f.mercatorTransform.plotToData(a.y+a.height/2)});c.setView({center:new Microsoft.Maps.Location(g.y,g.x),zoom:e,animate:!1})};var u=0,v=function(a){var d,e=c.getZoom()+u;u=0,d=p?s(a,{width:c.getWidth(),height:c.getHeight()}):e;var g={x:a.x+a.width/2,y:f.mercatorTransform.plotToData(a.y+a.height/2)};if(p)if(e>1||d>e){var h=Math.round(d),j=t(h,{width:c.getWidth(),height:c.getHeight()});if(a.zoomOrigin)var k={x:a.zoomOrigin.x,y:f.mercatorTransform.plotToData(a.zoomOrigin.y)},l={x:k.x-g.x,y:k.y-g.y},m={x:j.width/a.width,y:j.height/a.height},n={x:k.x-l.x*m.x,y:k.y-l.y*m.y};else var n=g;c.setView({center:new Microsoft.Maps.Location(n.y,n.x),zoom:d,animate:!0})}else x(),i=b.getCurrentPlotRect(),b.stop();else c.setView({center:new Microsoft.Maps.Location(g.y,g.x),zoom:d,animate:!1})},w=function(){return f.Utils.getPlotRectForMap(c)};this.getCurrentPlotRect=function(){return w(c.getBounds(),c.getCenter())};var x=function(a){var c=b.currentObserver;if(void 0!==c){var d=b.getCurrentPlotRect(),e={plotRect:d,isLast:!1};void 0!==a&&(e.syncUpdate=a),c.onNext(e)}};Microsoft.Maps.Events.addHandler(c,"viewchange",function(a){x()}),Microsoft.Maps.Events.addHandler(c,"viewchangeend",function(a){i=b.getCurrentPlotRect(),p||!b.isInAnimation?b.stop():x()}),this.additionalStopRutines=function(){void 0!==l&&(clearTimeout(l),l=void 0),b.isInAnimation=!1,d=void 0,e=void 0,i=void 0,g=new Date,h=void 0,j=void 0,k=0,l=void 0,n=0,o=0}},f.BingMapsAnimation.prototype=new f.AnimationBase,f.Navigation=function(a,b){var c=a,d=this,e=b,g=void 0,h=void 0,i=void 0,j=void 0;Object.defineProperty(this,"animation",{get:function(){return i},set:function(a){d.stop(),i=a},configurable:!1});var k=f.NavigationUtils.calcPannedRect,l=f.NavigationUtils.calcZoomedRect,m=function(){var a=c.screenSize,b=c.coordinateTransform,d=b.getPlotRect({x:0,y:0,width:a.width,height:a.height});return{plotRect:d,screenSize:a,cs:b}},n=function(){if(i)return i.currentObservable.subscribe(function(a){a.isLast&&(c.isInAnimation=!1),e(a.plotRect,{syncUpdate:a.syncUpdate})},function(a){},function(){})};this.setVisibleRect=function(a,b,f){if(d.stop(),j=a,b)d.animation.isInAnimation||n(),c.isInAnimation=!0,d.animation.animate(m,a);else{var g=a;d.animation&&d.animation.constraint&&(g=d.animation.constraint(g)),e(g,f)}};var o=function(a){var b,g,h=c.screenSize,i=void 0!==d.animation?d.animation.previousEstimatedPlotRect:j;if(void 0!==i?(b=f.Utils.calcCSWithPadding(i,{width:h.width,height:h.height},{left:0,top:0,bottom:0,right:0},c.aspectRatio),g=i):(b=c.coordinateTransform,g=b.getPlotRect({x:0,y:0,width:h.width,height:h.height})),"Pin"==a.Type)return void(d.animation&&d.animation.isInAnimation&&d.stop());var o=void 0;if("Pan"==a.Type?(o=k(g,h,a),j=o):"Zoom"==a.Type&&(o=l(g,b,a),o.width<1e-9&&(o.width=g.width,o.x=g.x),o.height<1e-9&&(o.height=g.height,o.y=g.y),j=o),o)if(d.animation){var p=!d.animation.isInAnimation;p&&n(),c.isInAnimation=!0,d.animation.animate(m,o,{gestureType:a.Type,isFirstFrame:p})}else e(o)};this.stop=function(){c.isInAnimation=!1,j=void 0,d.animation&&d.animation.stop()},Object.defineProperty(this,"gestureSource",{get:function(){return g},set:function(a){g!=a&&(h&&h.dispose(),g=a,void 0!==g&&(h=g.subscribe(function(a){o(a)})))},configurable:!1}),d.animation=new f.PanZoomAnimation},f.NavigationUtils={},f.NavigationUtils.SuppressDefaultMultitouch=function(){if(navigator.userAgent.match(/(iPhone|iPod|iPad)/)&&document.addEventListener("touchmove",function(a){a.preventDefault()},!1),navigator.userAgent.indexOf("Mac")!=-1){var a=document.getElementsByTagName("body")[0];a.style.overflow="hidden"}},f.NavigationUtils.calcPannedRect=function(a,b,c){var d={x:a.width/b.width,y:a.height/b.height},e=c.xOffset*d.x,f=-c.yOffset*d.y;return{x:a.x-e,y:a.y-f,width:a.width,height:a.height}},f.NavigationUtils.calcZoomedRect=function(a,b,c){var d=b.getScale(),e=b.plotToScreenX(a.x+a.width/2),f=b.plotToScreenY(a.y+a.height/2),g=c.preventHorizontal?0:c.xOrigin-e,h=c.preventVertical?0:c.yOrigin-f,i={x:a.x+g/d.x,y:a.y-h/d.y,width:a.width,height:a.height},j=a.width*(c.preventHorizontal?1:c.scaleFactor),k=a.height*(c.preventVertical?1:c.scaleFactor),l=i.x+i.width/2-j/2,m=i.y+i.height/2-k/2;return{x:l-c.scaleFactor*g/d.x,y:m+c.scaleFactor*h/d.y,width:j,height:k,zoomOrigin:{x:b.screenToPlotX(c.xOrigin),y:b.screenToPlotY(c.yOrigin)}}},f.SharedRenderWorker=function(a,b){var c=!!window.Worker;!c&&window.console&&console.log("Web workers are not available");var d=null;try{d=c?new Worker(a):null}catch(e){console.error("Error creating Web worker from "+a+": "+e.message)}var f=!1,g=[],h=function(a,b){for(var c=g.length,d=0;d<c;d++)if(g[d].source==a)return g[d];if(!b){var e={source:a,pendingTask:void 0,index:c};return g.push(e),e}},i=function(a){var b=g.length,c=0;if(a){c=a.index;for(var d=c+1;d<b;d++)if(g[d].pendingTask)return g[d];for(var d=0;d<c;d++)if(g[d].pendingTask)return g[d];if(g[c].pendingTask)return g[c]}else for(var d=0;d<b;d++)if(g[d].pendingTask)return g[d]};d&&(d.onmessage=function(a){var c=a.data,e=g[c.sourceIndex],h=i(e);h?(f=!0,d.postMessage(h.pendingTask),h.pendingTask=void 0):f=!1,b&&b(e.source,c)},d.onerror=function(a){var b=a.message+" ("+a.filename+":"+a.lineno+")";"object"==typeof console&&console.log(b)}),this.enqueue=function(a,b){var c=h(b);a.sourceIndex=c.index,f?c.pendingTask=a:(f=!0,c.pendingTask=void 0,d.postMessage(a))},this.cancelPending=function(a){var b=h(a,!0);b&&(b.pendingTask=void 0)},c||(this.enqueue=function(a,b){},this.cancelPending=function(a){})},f.heatmapBackgroundRendererCodeBase64="SW50ZXJhY3RpdmVEYXRhRGlzcGxheSA9IHR5cGVvZiBJbnRlcmFjdGl2ZURhdGFEaXNwbGF5ID09ICd1bmRlZmluZWQnID8ge30gOiBJbnRlcmFjdGl2ZURhdGFEaXNwbGF5Ow0KIA0KSW50ZXJhY3RpdmVEYXRhRGlzcGxheS5EYXRhVHJhbnNmb3JtID0gZnVuY3Rpb24gKGRhdGFUb1Bsb3QsIHBsb3RUb0RhdGEsIGRvbWFpbiwgdHlwZSkgew0KICAgIHRoaXMuZGF0YVRvUGxvdCA9IGRhdGFUb1Bsb3Q7DQogICAgdGhpcy5wbG90VG9EYXRhID0gcGxvdFRvRGF0YTsNCg0KICAgIHRoaXMuZG9tYWluID0gZG9tYWluIHx8IHsNCiAgICAgICAgaXNJbkRvbWFpbjogZnVuY3Rpb24gKHZhbHVlKSB7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgIH07DQoNCiAgICB0aGlzLnR5cGUgPSB0eXBlOw0KfTsNCg0KdmFyIG1lcmNhdG9yX21heFBoaSA9IDg1LjA1MTEyODc4OyAvLzg3LjExNDc1NzYzNjMzODQ7IC8vIGRlZw0KdmFyIG1lcmNhdG9yX1IgPSBtZXJjYXRvcl9tYXhQaGkgLyBNYXRoLmxvZyhNYXRoLnRhbihtZXJjYXRvcl9tYXhQaGkgKiBNYXRoLlBJIC8gMzYwLjAgKyBNYXRoLlBJIC8gNCkpOw0KSW50ZXJhY3RpdmVEYXRhRGlzcGxheS5tZXJjYXRvclRyYW5zZm9ybSA9IG5ldyBJbnRlcmFjdGl2ZURhdGFEaXNwbGF5LkRhdGFUcmFuc2Zvcm0oDQogICAgZnVuY3Rpb24gKHBoaV9kZWcpIHsNCiAgICAgICAgaWYgKHBoaV9kZWcgPj0gLW1lcmNhdG9yX21heFBoaSAmJiBwaGlfZGVnIDw9IG1lcmNhdG9yX21heFBoaSkNCiAgICAgICAgICAgIHJldHVybiBtZXJjYXRvcl9SICogTWF0aC5sb2coTWF0aC50YW4oTWF0aC5QSSAqIChwaGlfZGVnICsgOTApIC8gMzYwKSk7DQogICAgICAgIGVsc2UgcmV0dXJuIHBoaV9kZWc7DQogICAgfSwNCiAgICBmdW5jdGlvbiAoeSkgew0KICAgICAgICBpZiAoLW1lcmNhdG9yX21heFBoaSA8PSB5ICYmIHkgPD0gbWVyY2F0b3JfbWF4UGhpKSB7DQogICAgICAgICAgICByZXR1cm4gMzYwICogTWF0aC5hdGFuKE1hdGguZXhwKHkgLyBtZXJjYXRvcl9SKSkgLyBNYXRoLlBJIC0gOTA7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHk7DQogICAgfSwNCiAgICB1bmRlZmluZWQsDQogICAgIm1lcmNhdG9yIg0KKTsNCg0KDQpNYXRoLkxPR0UxMCA9IE1hdGgubG9nKDEwKTsNCg0KSW50ZXJhY3RpdmVEYXRhRGlzcGxheS5sb2dUcmFuc2Zvcm0gPSBuZXcgSW50ZXJhY3RpdmVEYXRhRGlzcGxheS5EYXRhVHJhbnNmb3JtKA0KICAgIGZ1bmN0aW9uICh4X2QpIHsNCiAgICAgICAgcmV0dXJuIE1hdGgubG9nKHhfZCkgLyBNYXRoLkxPR0UxMDsNCiAgICB9LA0KICAgIGZ1bmN0aW9uICh4X3ApIHsNCiAgICAgICAgcmV0dXJuIE1hdGgucG93KDEwLCB4X3ApOw0KICAgIH0sDQogICAgeyBpc0luRG9tYWluOiBmdW5jdGlvbiAoeCkgeyByZXR1cm4geCA+IDA7IH0gfSwNCiAgICAibG9nMTAiDQopOztzZWxmLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkgew0KICAgIHZhciB4c2NhbGUgPSBldmVudC5kYXRhLnNjYWxlWCwgeG9mZnNldCA9IGV2ZW50LmRhdGEub2Zmc2V0WCwgeXNjYWxlID0gZXZlbnQuZGF0YS5zY2FsZVksIHlvZmZzZXQgPSBldmVudC5kYXRhLm9mZnNldFk7DQogICAgdmFyIGRhdGFUb1NjcmVlblgsIGRhdGFUb1NjcmVlblk7DQogICAgdmFyIGhhc2R0WCwgaGFzZHRZOw0KDQogICAgaWYgKHR5cGVvZiBldmVudC5kYXRhLnhEYXRhVHJhbnNmb3JtID09ICdzdHJpbmcnKSB7DQogICAgICAgIHZhciBkdCA9IGdldERhdGFUcmFuc2Zvcm0oZXZlbnQuZGF0YS54RGF0YVRyYW5zZm9ybSk7DQogICAgICAgIHZhciBmID0gZHQuZGF0YVRvUGxvdDsNCiAgICAgICAgaGFzZHRYID0gdHJ1ZTsNCiAgICAgICAgZGF0YVRvU2NyZWVuWCA9IGZ1bmN0aW9uICh4KSB7DQogICAgICAgICAgICByZXR1cm4gZih4KSAqIHhzY2FsZSArIHhvZmZzZXQ7DQogICAgICAgIH07DQogICAgfSBlbHNlIHsNCiAgICAgICAgaGFzZHRYID0gZmFsc2U7DQogICAgICAgIGRhdGFUb1NjcmVlblggPSBmdW5jdGlvbiAoeCkgew0KICAgICAgICAgICAgcmV0dXJuIHhzY2FsZSAqIHggKyB4b2Zmc2V0Ow0KICAgICAgICB9Ow0KICAgIH0NCiAgICBpZiAodHlwZW9mIGV2ZW50LmRhdGEueURhdGFUcmFuc2Zvcm0gPT0gJ3N0cmluZycpIHsNCiAgICAgICAgdmFyIGR0ID0gZ2V0RGF0YVRyYW5zZm9ybShldmVudC5kYXRhLnlEYXRhVHJhbnNmb3JtKTsNCiAgICAgICAgdmFyIGYgPSBkdC5kYXRhVG9QbG90Ow0KICAgICAgICBoYXNkdFkgPSB0cnVlOw0KICAgICAgICBkYXRhVG9TY3JlZW5ZID0gZnVuY3Rpb24gKHkpIHsNCiAgICAgICAgICAgIHJldHVybiB5b2Zmc2V0IC0gZih5KSAqIHlzY2FsZTsNCiAgICAgICAgfTsNCiAgICB9IGVsc2Ugew0KICAgICAgICBoYXNkdFkgPSBmYWxzZTsNCiAgICAgICAgZGF0YVRvU2NyZWVuWSA9IGZ1bmN0aW9uICh5KSB7DQogICAgICAgICAgICByZXR1cm4geW9mZnNldCAtIHkgKiB5c2NhbGU7DQogICAgICAgIH07DQogICAgfQ0KDQogICAgdmFyIHdpZHRoID0gZXZlbnQuZGF0YS53aWR0aDsNCiAgICB2YXIgaGVpZ2h0ID0gZXZlbnQuZGF0YS5oZWlnaHQ7DQoNCiAgICBpZiAoZXZlbnQuZGF0YS54Lmxlbmd0aCAhPSBldmVudC5kYXRhLmYubGVuZ3RoKSB7DQogICAgICAgIHJlbmRlck1hdHJpeChldmVudC5kYXRhLmltYWdlLCB3aWR0aCwgaGVpZ2h0LCBldmVudC5kYXRhLngsIGV2ZW50LmRhdGEueSwgZXZlbnQuZGF0YS5mLCBldmVudC5kYXRhLmZtaW4sIGV2ZW50LmRhdGEuZm1heCwgZXZlbnQuZGF0YS5wYWxldHRlLCBldmVudC5kYXRhLnBsb3RSZWN0LCBkYXRhVG9TY3JlZW5YLCBkYXRhVG9TY3JlZW5ZLCBoYXNkdFgsIGhhc2R0WSk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgdmFyIHNjcmVlblRvRGF0YVgsIHNjcmVlblRvRGF0YVk7DQogICAgICAgIHhzY2FsZV9yID0gMSAvIHhzY2FsZTsNCiAgICAgICAgeXNjYWxlX3IgPSAxIC8geXNjYWxlOw0KICAgICAgICBpZiAoaGFzZHRYKSB7DQogICAgICAgICAgICB2YXIgcGxvdFRvRGF0YSA9IGR0LnBsb3RUb0RhdGE7DQogICAgICAgICAgICBzY3JlZW5Ub0RhdGFYID0gZnVuY3Rpb24gKHhzKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHBsb3RUb0RhdGEoKHhzIC0geG9mZnNldCkgKiB4c2NhbGVfcik7DQogICAgICAgICAgICB9Ow0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgc2NyZWVuVG9EYXRhWCA9IGZ1bmN0aW9uICh4cykgew0KICAgICAgICAgICAgICAgIHJldHVybiAoeHMgLSB4b2Zmc2V0KSAqIHhzY2FsZV9yOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoaGFzZHRZKSB7DQogICAgICAgICAgICB2YXIgcGxvdFRvRGF0YSA9IGR0LnBsb3RUb0RhdGE7DQogICAgICAgICAgICBzY3JlZW5Ub0RhdGFZID0gZnVuY3Rpb24gKHlzKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHBsb3RUb0RhdGEoKHlvZmZzZXQgLSB5cykgKiB5c2NhbGVfcik7DQogICAgICAgICAgICB9Ow0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgc2NyZWVuVG9EYXRhWSA9IGZ1bmN0aW9uICh5cykgew0KICAgICAgICAgICAgICAgIHJldHVybiAoeW9mZnNldCAtIHlzKSAqIHlzY2FsZV9yOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgfQ0KICAgICAgICByZW5kZXJHcmFkaWVudChldmVudC5kYXRhLmltYWdlLCB3aWR0aCwgaGVpZ2h0LCBldmVudC5kYXRhLngsIGV2ZW50LmRhdGEueSwgZXZlbnQuZGF0YS5mLCBldmVudC5kYXRhLmZtaW4sIGV2ZW50LmRhdGEuZm1heCwgZXZlbnQuZGF0YS5wYWxldHRlLCBldmVudC5kYXRhLnBsb3RSZWN0LCBkYXRhVG9TY3JlZW5YLCBzY3JlZW5Ub0RhdGFYLCBkYXRhVG9TY3JlZW5ZLCBzY3JlZW5Ub0RhdGFZLCBoYXNkdFgsIGhhc2R0WSk7DQogICAgfQ0KICAgIGV2ZW50LmRhdGEueCA9IHVuZGVmaW5lZDsNCiAgICBldmVudC5kYXRhLnkgPSB1bmRlZmluZWQ7DQogICAgZXZlbnQuZGF0YS5mID0gdW5kZWZpbmVkOw0KICAgIGV2ZW50LmRhdGEucGFsZXR0ZSA9IHVuZGVmaW5lZDsNCiAgICBzZWxmLnBvc3RNZXNzYWdlKGV2ZW50LmRhdGEpOw0KfTsNCg0KdmFyIGdldERhdGFUcmFuc2Zvcm0gPSBmdW5jdGlvbiAodHlwZSkgew0KICAgIGlmICh0eXBlID09ICdtZXJjYXRvcicpDQogICAgICAgIHJldHVybiBJbnRlcmFjdGl2ZURhdGFEaXNwbGF5Lm1lcmNhdG9yVHJhbnNmb3JtOw0KICAgIHRocm93ICdVbmtub3duIGRhdGEgdHJhbnNmb3JtJzsNCn07DQoNCg0KdmFyIHJlbmRlck1hdHJpeCA9IGZ1bmN0aW9uIChpbWFnZSwgd2lkdGgsIGhlaWdodCwgeCwgeSwgZiwgZm1pbiwgZm1heCwgcGFsZXR0ZSwgcGxvdFJlY3QsIGRhdGFUb1NjcmVlblgsIGRhdGFUb1NjcmVlblksIGhhc0RhdGFUcmFuc2Zvcm1YLCBoYXNEYXRhVHJhbnNmb3JtWSkgew0KICAgIHZhciBuID0geC5sZW5ndGg7DQogICAgdmFyIG0gPSB5Lmxlbmd0aDsNCiAgICB2YXIgaW1hZ2VEYXRhID0gaW1hZ2UuZGF0YTsNCiAgICB2YXIgdyA9IHdpZHRoOw0KICAgIHZhciBoID0gaGVpZ2h0Ow0KDQogICAgdmFyIGkwLCBqMDsNCiAgICB2YXIgeDAsIHkwOyAvLyBpbiBkYXRhIHNwYWNlDQoNCg0KICAgIC8vIHByZWNvbXB1dGluZyB5IGluIHNjcmVlbiBjb29yZGluYXRlczoNCiAgICB2YXIgeXNjciA9IG5ldyBGbG9hdDMyQXJyYXkobSk7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtOyBpKyspDQogICAgICAgIHlzY3JbaV0gPSBkYXRhVG9TY3JlZW5ZKHlbaV0pIHwgMDsgLy8gZmxvb3I7DQoNCiAgICAvLyBzdGFydCBjZWxsDQogICAgdmFyIGxlZnRwID0gcGxvdFJlY3QueDsNCiAgICB2YXIgcmlnaHRwID0gbGVmdHAgKyBwbG90UmVjdC53aWR0aDsNCiAgICBpZiAoaGFzRGF0YVRyYW5zZm9ybVgpIHsNCiAgICAgICAgZm9yIChpMCA9IDA7IGkwIDwgbjsgaTArKykgew0KICAgICAgICAgICAgaWYgKGRhdGFUb1NjcmVlblgoeFtpMF0pID49IDApIHsNCiAgICAgICAgICAgICAgICBpZiAoaTAgPT0gMCkgaTArKzsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICAgIGZvciAoaTAgPSAwOyBpMCA8IG47IGkwKyspIHsNCiAgICAgICAgICAgIGlmICh4W2kwXSA+PSBsZWZ0cCkgew0KICAgICAgICAgICAgICAgIGlmIChpMCA9PSAwKSBpMCsrOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIGlmIChpMCA9PSBuKSByZXR1cm47DQoNCiAgICB2YXIgYm90dG9tcCA9IHBsb3RSZWN0Lnk7DQogICAgdmFyIHRvcHAgPSBib3R0b21wICsgcGxvdFJlY3QuaGVpZ2h0Ow0KICAgIGZvciAoajAgPSAwOyBqMCA8IG07IGowKyspIHsNCiAgICAgICAgaWYgKHlzY3JbajBdIDwgaCkgew0KICAgICAgICAgICAgaWYgKGowID09IDApIGowKys7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBpZiAoajAgPT0gbSkgcmV0dXJuOw0KDQogICAgLy8gcmVuZGVyaW5nIGZyb20gbGVmdCB0byByaWdodCwgYm90dG9tIHRvIHRvcA0KICAgIHZhciBjZWxsTGVmdF9zID0gMCwgY2VsbFJpZ2h0X3MgPSAwOw0KDQogICAgdmFyIGlzTm9ybWFsaXplZCA9IHBhbGV0dGUuaXNOb3JtYWxpemVkOw0KICAgIHZhciBjb2xvcnMgPSBwYWxldHRlLmNvbG9yczsNCiAgICB2YXIgY29sTiA9IChjb2xvcnMubGVuZ3RoID4+IDIpIC0gMTsNCiAgICBpZiAoIWlzTm9ybWFsaXplZCkgew0KICAgICAgICBmbWF4ID0gcGFsZXR0ZS5yYW5nZS5tYXg7DQogICAgICAgIGZtaW4gPSBwYWxldHRlLnJhbmdlLm1pbjsNCiAgICB9DQogICAgdmFyIHBhbGV0dGVLID0gZm1heCAhPT0gZm1pbiA/IDEuMCAvIChmbWF4IC0gZm1pbikgOiAwOw0KDQogICAgZm9yICh2YXIgaSA9IGkwOyBpIDwgbiAmJiBjZWxsUmlnaHRfcyA8IHc7IGkrKykgew0KICAgICAgICAvLyBpMCBpcyB0aGUgcmlnaHQgdmlzaWJsZSBlZGdlIG9mIHRoZSBjZWxsDQogICAgICAgIHgwID0geFtpIC0gMV07DQogICAgICAgIHZhciB4MSA9IHhbaV07DQoNCiAgICAgICAgaWYgKHgwICE9IHgwIHx8IHgxICE9IHgxKSB7DQogICAgICAgICAgICBjZWxsUmlnaHRfcyA9IHVuZGVmaW5lZDsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGNlbGxSaWdodF9zKQ0KICAgICAgICAgICAgY2VsbExlZnRfcyA9IGNlbGxSaWdodF9zOw0KICAgICAgICBlbHNlDQogICAgICAgICAgICBjZWxsTGVmdF9zID0gTWF0aC5jZWlsKGRhdGFUb1NjcmVlblgoeDApKTsNCg0KICAgICAgICBjZWxsUmlnaHRfcyA9IE1hdGguY2VpbChkYXRhVG9TY3JlZW5YKHgxKSk7DQogICAgICAgIGlmIChjZWxsTGVmdF9zIDwgMCkgY2VsbExlZnRfcyA9IDA7DQogICAgICAgIGlmIChjZWxsUmlnaHRfcyA+PSB3KSBjZWxsUmlnaHRfcyA9IHc7DQoNCiAgICAgICAgLy9pZiAoaSA9PSBuIC0gMSkgY2VsbFJpZ2h0X3MrKzsNCiAgICAgICAgaWYgKGNlbGxSaWdodF9zIC0gY2VsbExlZnRfcyA9PSAwKSBjb250aW51ZTsNCg0KICAgICAgICB5MCA9IHlbajAgLSAxXTsNCiAgICAgICAgdmFyIGNlbGxCb3R0b21fcyA9IDAsDQogICAgICAgICAgICBjZWxsVG9wX3MgPSB5c2NyW2owIC0gMV07DQogICAgICAgIGZvciAodmFyIGogPSBqMDsgaiA8IG0gJiYgY2VsbEJvdHRvbV9zID49IDA7IGorKykgew0KICAgICAgICAgICAgeTAgPSB5W2ogLSAxXTsNCiAgICAgICAgICAgIHZhciB5MSA9IHlbal07DQoNCiAgICAgICAgICAgIGlmICh5MCAhPSB5MCB8fCB5MSAhPSB5MSkgew0KICAgICAgICAgICAgICAgIGNlbGxUb3BfcyA9IHVuZGVmaW5lZDsNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKGNlbGxUb3BfcykNCiAgICAgICAgICAgICAgICBjZWxsQm90dG9tX3MgPSBjZWxsVG9wX3M7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgY2VsbEJvdHRvbV9zID0geXNjcltqIC0gMV07DQogICAgICAgICAgICBjZWxsVG9wX3MgPSB5c2NyW2pdOw0KICAgICAgICAgICAgaWYgKGNlbGxUb3BfcyA8IDApIGNlbGxUb3BfcyA9IC0xOw0KICAgICAgICAgICAgaWYgKGNlbGxCb3R0b21fcyA+PSBoKSBjZWxsQm90dG9tX3MgPSBoIC0gMTsNCg0KICAgICAgICAgICAgaWYgKGNlbGxUb3BfcyAtIGNlbGxCb3R0b21fcyA9PSAwKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgdmFyIF9mID0gZltpIC0gMV1baiAtIDFdOw0KICAgICAgICAgICAgaWYgKF9mICE9IF9mKSBjb250aW51ZTsNCiAgICAgICAgICAgIHZhciBwYWxldHRlVmFsID0gcGFsZXR0ZUsgKiAoX2YgLSBmbWluKTsNCiAgICAgICAgICAgIHZhciBrID0gKHBhbGV0dGVWYWwgKiBjb2xOKSB8IDA7DQogICAgICAgICAgICBpZiAoayA8IDApIGsgPSAwOw0KICAgICAgICAgICAgZWxzZSBpZiAoayA+IGNvbE4pIGsgPSBjb2xOOw0KICAgICAgICAgICAgayA9IGsgPDwgMjsNCg0KICAgICAgICAgICAgLy8gZmlsbHMgdGhlIGNlbGwgd2l0aCBzYW1lIGNvbG9yDQogICAgICAgICAgICBmb3IgKHZhciB5cyA9IGNlbGxUb3BfcyArIDE7IHlzIDw9IGNlbGxCb3R0b21fczsgeXMrKykgew0KICAgICAgICAgICAgICAgIHZhciBpbmRleCA9ICh3ICogeXMgKyBjZWxsTGVmdF9zKSA8PCAyOw0KICAgICAgICAgICAgICAgIGZvciAodmFyIHhzID0gY2VsbExlZnRfczsgeHMgPCBjZWxsUmlnaHRfczsgeHMrKykgew0KICAgICAgICAgICAgICAgICAgICBpbWFnZURhdGFbaW5kZXgrK10gPSBjb2xvcnNba107DQogICAgICAgICAgICAgICAgICAgIGltYWdlRGF0YVtpbmRleCsrXSA9IGNvbG9yc1trICsgMV07DQogICAgICAgICAgICAgICAgICAgIGltYWdlRGF0YVtpbmRleCsrXSA9IGNvbG9yc1trICsgMl07DQogICAgICAgICAgICAgICAgICAgIGltYWdlRGF0YVtpbmRleCsrXSA9IGNvbG9yc1trICsgM107DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGNlbGxUb3BfcyA8PSAwKSBicmVhazsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoY2VsbFJpZ2h0X3MgPj0gdykgYnJlYWs7DQogICAgfQ0KfTsNCg0KDQp2YXIgcmVuZGVyR3JhZGllbnQgPSBmdW5jdGlvbiAoaW1hZ2UsIHdpZHRoLCBoZWlnaHQsIHgsIHksIGYsIGZtaW4sIGZtYXgsIHBhbGV0dGUsIHBsb3RSZWN0LCBkYXRhVG9TY3JlZW5YLCBzY3JlZW5Ub0RhdGFYLCBkYXRhVG9TY3JlZW5ZLCBzY3JlZW5Ub0RhdGFZLCBoYXNEYXRhVHJhbnNmb3JtWCwgaGFzRGF0YVRyYW5zZm9ybVkpIHsNCiAgICB2YXIgbiA9IHgubGVuZ3RoOw0KICAgIHZhciBtID0geS5sZW5ndGg7DQogICAgdmFyIGltYWdlRGF0YSA9IGltYWdlLmRhdGE7DQogICAgdmFyIHcgPSB3aWR0aDsNCiAgICB2YXIgaCA9IGhlaWdodDsNCg0KICAgIC8vIHByZWNvbXB1dGluZyB5IGluIHNjcmVlbiBjb29yZGluYXRlczoNCiAgICB2YXIgeXNjciA9IG5ldyBGbG9hdDMyQXJyYXkobSk7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtOyBpKyspDQogICAgICAgIHlzY3JbaV0gPSBkYXRhVG9TY3JlZW5ZKHlbaV0pIHwgMDsgLy8gZmxvb3I7DQoNCiAgICAvLyBwcmVwYXJpbmcgc2NyZWVuIHRvIGRhdGEgbWFwcGluZw0KICAgIHZhciBtYXBTY3JlZW5Ub0RhdGFYID0gbmV3IEZsb2F0MzJBcnJheSh3KTsNCiAgICBmb3IgKHZhciB4cyA9IDA7IHhzIDwgdzsgeHMrKykgew0KICAgICAgICBtYXBTY3JlZW5Ub0RhdGFYW3hzXSA9IHNjcmVlblRvRGF0YVgoeHMgKyAwLjUpOyAvLyB0b2RvOiBtYWtlIGlubGluZSB0cmFuc2Zvcm0gZm9yIGxpbmVhciBjYXNlDQogICAgfQ0KICAgIHZhciBtYXBTY3JlZW5Ub0RhdGFZID0gbmV3IEZsb2F0MzJBcnJheShoKTsNCiAgICBmb3IgKHZhciB5cyA9IDA7IHlzIDwgaDsgeXMrKykgew0KICAgICAgICBtYXBTY3JlZW5Ub0RhdGFZW3lzXSA9IHNjcmVlblRvRGF0YVkoeXMgKyAwLjUpOyAvLyB0b2RvOiBtYWtlIGlubGluZSB0cmFuc2Zvcm0gZm9yIGxpbmVhciBjYXNlDQogICAgfQ0KDQogICAgdmFyIGkwLCBqMDsNCiAgICB2YXIgeDAsIHkwOyAvLyBpbiBkYXRhIHNwYWNlDQoNCiAgICAvLyBzdGFydCBjZWxsDQogICAgdmFyIGxlZnRwID0gcGxvdFJlY3QueDsNCiAgICB2YXIgcmlnaHRwID0gbGVmdHAgKyBwbG90UmVjdC53aWR0aDsNCiAgICBpZiAoaGFzRGF0YVRyYW5zZm9ybVgpIHsNCiAgICAgICAgZm9yIChpMCA9IDA7IGkwIDwgbjsgaTArKykgew0KICAgICAgICAgICAgaWYgKGRhdGFUb1NjcmVlblgoeFtpMF0pID49IDApIHsNCiAgICAgICAgICAgICAgICBpZiAoaTAgPT0gMCkgaTArKzsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICAgIGZvciAoaTAgPSAwOyBpMCA8IG47IGkwKyspIHsNCiAgICAgICAgICAgIGlmICh4W2kwXSA+PSBsZWZ0cCkgew0KICAgICAgICAgICAgICAgIGlmIChpMCA9PSAwKSBpMCsrOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIGlmIChpMCA9PSBuKSByZXR1cm47DQoNCiAgICB2YXIgYm90dG9tcCA9IHBsb3RSZWN0Lnk7DQogICAgdmFyIHRvcHAgPSBib3R0b21wICsgcGxvdFJlY3QuaGVpZ2h0Ow0KICAgIGZvciAoajAgPSAwOyBqMCA8IG07IGowKyspIHsNCiAgICAgICAgaWYgKHlzY3JbajBdIDwgaCkgew0KICAgICAgICAgICAgaWYgKGowID09IDApIGowKys7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBpZiAoajAgPT0gbSkgcmV0dXJuOw0KDQogICAgLy8gcmVuZGVyaW5nIGZyb20gbGVmdCB0byByaWdodCwgYm90dG9tIHRvIHRvcA0KICAgIHZhciBjZWxsTGVmdF9zID0gMCwgY2VsbFJpZ2h0X3MgPSAwOw0KDQogICAgdmFyIGlzTm9ybWFsaXplZCA9IHBhbGV0dGUuaXNOb3JtYWxpemVkOw0KICAgIHZhciBjb2xvcnMgPSBwYWxldHRlLmNvbG9yczsNCiAgICB2YXIgY29sTiA9IChjb2xvcnMubGVuZ3RoID4+IDIpIC0gMTsNCiAgICBpZiAoIWlzTm9ybWFsaXplZCkgew0KICAgICAgICBmbWF4ID0gcGFsZXR0ZS5yYW5nZS5tYXg7DQogICAgICAgIGZtaW4gPSBwYWxldHRlLnJhbmdlLm1pbjsNCiAgICB9DQogICAgdmFyIHBhbGV0dGVLID0gZm1heCAhPT0gZm1pbiA/IDEuMCAvIChmbWF4IC0gZm1pbikgOiAwOw0KDQogICAgdmFyIGZsYiwgZmx0LCBmcnQsIGZyYjsNCiAgICB2YXIgZmksIGZpMTsNCg0KICAgIC8vIHJlbmRlcmluZyB0aGUgaW1hZ2UNCiAgICBmb3IgKHZhciBpID0gaTA7IGkgPCBuICYmIGNlbGxSaWdodF9zIDwgdzsgaSsrKSB7DQogICAgICAgIC8vIGkwIGlzIHRoZSByaWdodCB2aXNpYmxlIGVkZ2Ugb2YgdGhlIGNlbGwNCiAgICAgICAgeDAgPSB4W2kgLSAxXTsNCiAgICAgICAgdmFyIHgxID0geFtpXTsNCiAgICAgICAgaWYgKHgwICE9IHgwIHx8IHgxICE9IHgxKSB7IC8vIGEgIT0gYSAgZXF1aXYuIGlzTmFOKGEpDQogICAgICAgICAgICBjZWxsUmlnaHRfcyA9IHVuZGVmaW5lZDsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGNlbGxSaWdodF9zKQ0KICAgICAgICAgICAgY2VsbExlZnRfcyA9IGNlbGxSaWdodF9zOw0KICAgICAgICBlbHNlDQogICAgICAgICAgICBjZWxsTGVmdF9zID0gTWF0aC5jZWlsKGRhdGFUb1NjcmVlblgoeDApKTsNCiAgICAgICAgY2VsbFJpZ2h0X3MgPSBNYXRoLmNlaWwoZGF0YVRvU2NyZWVuWCh4MSkpOw0KICAgICAgICBpZiAoY2VsbExlZnRfcyA8IDApIGNlbGxMZWZ0X3MgPSAwOw0KICAgICAgICBpZiAoY2VsbFJpZ2h0X3MgPj0gdykgY2VsbFJpZ2h0X3MgPSB3Ow0KICAgICAgICBpZiAoY2VsbFJpZ2h0X3MgLSBjZWxsTGVmdF9zID09IDApIGNvbnRpbnVlOw0KDQogICAgICAgIHZhciBjZWxsQm90dG9tX3MgPSAwLCBjZWxsVG9wX3MgPSAwOw0KICAgICAgICBmaSA9IGZbaV07DQogICAgICAgIGZpMSA9IGZbaSAtIDFdOw0KICAgICAgICBmb3IgKHZhciBqID0gajA7IGogPCBtICYmIGNlbGxCb3R0b21fcyA+PSAwOyBqKyspIHsNCiAgICAgICAgICAgIHkwID0geVtqIC0gMV07DQogICAgICAgICAgICB2YXIgeTEgPSB5W2pdOw0KICAgICAgICAgICAgaWYgKHkwICE9IHkwIHx8IHkxICE9IHkxKSB7DQogICAgICAgICAgICAgICAgY2VsbFRvcF9zID0gdW5kZWZpbmVkOw0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoY2VsbFRvcF9zKQ0KICAgICAgICAgICAgICAgIGNlbGxCb3R0b21fcyA9IGNlbGxUb3BfczsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBjZWxsQm90dG9tX3MgPSB5c2NyW2ogLSAxXTsNCiAgICAgICAgICAgIGNlbGxUb3BfcyA9IHlzY3Jbal07DQogICAgICAgICAgICBpZiAoY2VsbFRvcF9zIDwgMCkgY2VsbFRvcF9zID0gLTE7DQogICAgICAgICAgICBpZiAoY2VsbEJvdHRvbV9zID49IGgpIGNlbGxCb3R0b21fcyA9IGggLSAxOw0KICAgICAgICAgICAgaWYgKGNlbGxCb3R0b21fcyAtIGNlbGxUb3BfcyA9PSAwKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgLy8gZmlsbHMgdGhlIGNlbGwNCiAgICAgICAgICAgIGZsdCA9IGZpMVtqXTsNCiAgICAgICAgICAgIGZsYiA9IGZpMVtqIC0gMV07DQogICAgICAgICAgICBmcnQgPSBmaVtqXTsNCiAgICAgICAgICAgIGZyYiA9IGZpW2ogLSAxXTsNCg0KICAgICAgICAgICAgaWYgKGZsdCAhPSBmbHQgfHwgZmxiICE9IGZsYiB8fCBmcnQgIT0gZnJ0IHx8IGZyYiAhPSBmcmIpDQogICAgICAgICAgICAgICAgY29udGludWU7DQoNCiAgICAgICAgICAgIHZhciBreUxlZnQgPSAoZmx0IC0gZmxiKSAvICh5MSAtIHkwKTsNCiAgICAgICAgICAgIHZhciBreVJpZ2h0ID0gKGZydCAtIGZyYikgLyAoeTEgLSB5MCk7DQogICAgICAgICAgICBmb3IgKHZhciB5cyA9IGNlbGxUb3BfcyArIDE7IHlzIDw9IGNlbGxCb3R0b21fczsgeXMrKykgew0KICAgICAgICAgICAgICAgIHZhciBpbmRleCA9ICh3ICogeXMgKyBjZWxsTGVmdF9zKSA8PCAyOw0KICAgICAgICAgICAgICAgIHZhciBfeSA9IG1hcFNjcmVlblRvRGF0YVlbeXNdOw0KICAgICAgICAgICAgICAgIHZhciBmbGVmdCA9IGt5TGVmdCAqIChfeSAtIHkwKSArIGZsYjsNCiAgICAgICAgICAgICAgICB2YXIgZnJpZ2h0ID0ga3lSaWdodCAqIChfeSAtIHkwKSArIGZyYjsNCiAgICAgICAgICAgICAgICB2YXIga3ggPSAoZnJpZ2h0IC0gZmxlZnQpIC8gKHgxIC0geDApOw0KDQogICAgICAgICAgICAgICAgZm9yICh2YXIgeHMgPSBjZWxsTGVmdF9zOyB4cyA8IGNlbGxSaWdodF9zOyB4cysrKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBfeCA9IG1hcFNjcmVlblRvRGF0YVhbeHNdOw0KICAgICAgICAgICAgICAgICAgICB2YXIgX2YgPSBreCAqIChfeCAtIHgwKSArIGZsZWZ0Ow0KICAgICAgICAgICAgICAgICAgICB2YXIgcGFsZXR0ZVZhbCA9IHBhbGV0dGVLICogKF9mIC0gZm1pbik7DQogICAgICAgICAgICAgICAgICAgIHZhciBrID0gKHBhbGV0dGVWYWwgKiBjb2xOKSB8IDA7DQogICAgICAgICAgICAgICAgICAgIGlmIChrIDwgMCkgayA9IDA7DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGsgPiBjb2xOKSBrID0gY29sTjsNCiAgICAgICAgICAgICAgICAgICAgayA9IGsgPDwgMjsNCg0KICAgICAgICAgICAgICAgICAgICAvL3ZhciBjb2xvciA9IGdldENvbG9yKHBhbGV0dGVWYWwpOw0KICAgICAgICAgICAgICAgICAgICAvL2lmICh4cyA9PSBjZWxsTGVmdF9zIHx8IHhzID09IGNlbGxSaWdodF9zIC0gMSB8fCAgLyogdW5jb21tZW50IHRvIGRyYXcgdGhlIGJvcmRlciBvZiBjZWxscyAqLw0KICAgICAgICAgICAgICAgICAgICAvLyAgICB5cyA9PSBjZWxsVG9wX3MgKyAxIHx8IHlzID09IGNlbGxCb3R0b21fcykNCiAgICAgICAgICAgICAgICAgICAgLy8gICAgY29sb3IgPSB7IGE6IDEsIHI6IDAsIGc6IDAsIGI6IDI1NSB9Ow0KDQogICAgICAgICAgICAgICAgICAgIGltYWdlRGF0YVtpbmRleCsrXSA9IGNvbG9yc1trKytdOw0KICAgICAgICAgICAgICAgICAgICBpbWFnZURhdGFbaW5kZXgrK10gPSBjb2xvcnNbaysrXTsNCiAgICAgICAgICAgICAgICAgICAgaW1hZ2VEYXRhW2luZGV4KytdID0gY29sb3JzW2srK107DQogICAgICAgICAgICAgICAgICAgIGltYWdlRGF0YVtpbmRleCsrXSA9IGNvbG9yc1trXTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoY2VsbFRvcF9zIDw9IDApIGJyZWFrOw0KICAgICAgICB9DQogICAgICAgIGlmIChjZWxsUmlnaHRfcyA+PSB3KSBicmVhazsNCiAgICB9DQp9Ow0K",f.Figure=function(b,c){if(void 0!==c)throw"Figure cannot be a dependent plot";if(b){var d;b&&(d=a("<div data-idd-plot='plot' data-idd-placement='center'></div>"),d.css("z-index",f.ZIndexNavigationLayer).css("background-color","rgba(0,0,0,0)"));var e=b.children().toArray();d.appendTo(b),this.base=f.Plot,this.base(b,c,d);var g=this;d.dblclick(function(){g.master.fitToView()});var h=function(a){var b=a.css("position");return"static"==b?a.css("position","relative"):"inherit"==b&&a.css("position","relative"),void 0!==b&&""!=b||a.css("position","relative"),"relative"==a.css("position")},i=[],j=[],k=[],l=[],m=[],n=function(b,c,d){var e=a("<div></div>");e.appendTo(g.host).addClass("idd-figure-container"),e.content=b,b.appendTo(e);var h=b.attr("data-idd-placement");if(b.attr("data-idd-axis")){var n=f.InitializeAxis(b,c);b.axis=n,b.dblclick(function(){"bottom"==h||"top"==h?g.master.fitToViewX():g.master.fitToViewY()})}var o=function(a){if(d){var b=r(d,a);a.splice(b.index,0,e)}else a.push(e)};"left"==h?o(i):"bottom"==h?o(j):"center"==h?o(k):"right"==h?o(m):"top"==h&&o(l),h&&e.attr("data-idd-placement",h)};this.getAxes=function(a){if(a){var b;if("top"==a?b=jQuery.grep(l,function(b){if(b.content&&b.content.axis&&b.content.axis.mode==a)return b.content.axis}):"bottom"==a?b=jQuery.grep(j,function(b){if(b.content&&b.content.axis&&b.content.axis.mode==a)return b.content.axis}):"left"==a?b=jQuery.grep(i,function(b){if(b.content&&b.content.axis&&b.content.axis.mode==a)return b.content.axis}):"right"==a&&(b=jQuery.grep(m,function(b){if(b.content&&b.content.axis&&b.content.axis.mode==a)return b.content.axis})),b&&b.length>0){for(var c=0;c<b.length;c++)b[c]=b[c].content.axis;return b}}else{var d=i.concat(j).concat(m).concat(l),b=jQuery.grep(d,function(a){if(a.content&&a.content.axis)return a.content.axis});if(b&&b.length>0){for(var c=0;c<b.length;c++)b[c]=b[c].content.axis;return b}}},this.get=function(a){var b=f.Figure.prototype.get.call(this,a);{if(b)return b;var c=this.getAxes();if(c)for(var d=0;d<c.length;d++)if(c[d].host[0].id==a||c[d].host[0]==a)return c[d]}},e.forEach(function(b){var c=a(b);h(c)&&n(c)});var o=function(b,c,d,e,f){var i=a(b);if(!i.is("div"))throw"Only DIVs can be added to figure!";if(void 0!==c){if("top"!=c&&"bottom"!=c&&"center"!=c&&"left"!=c&&"right"!=c)throw"Placement is incorrect!";i.attr("data-idd-placement",c)}return h(i)&&void 0!==i.attr("data-idd-placement")?n(i,d,f):f?i.insertBefore(f):i.appendTo(g.host),void 0!==e&&e||g.requestUpdateLayout(),i};this.addDiv=function(a,b){return o(a,b)[0]};var p=function(a){var b=[],c=[];return a.forEach(function(a){0==a.children().toArray().length?b.push(a):c.push(a)}),b.forEach(function(a){a.remove()}),c},q=function(a,b){
var c=jQuery.grep(b,function(b){return b==a});return c&&c.length>0},r=function(a,b){for(var c=0;c<b.length;c++)if(b[c].content[0]==a)return{pack:a,index:c};throw"Pack not found"},s=function(a,b){var c=jQuery.grep(b,function(b){return b.content[0]==a});return c&&c.length>0};this.removeDiv=function(b){if(void 0===b)throw"Unable to remove undefined object!";var c=this.host.children().toArray();if(!(q(b,c)||s(b,i)||s(b,j)||s(b,k)||s(b,m)||s(b,l)))throw"Specified div doesn't belong to figure!";var d=a(b);d.remove(),d.attr("data-idd-placement")&&("left"==d.attr("data-idd-placement")?i=p(i):"bottom"==d.attr("data-idd-placement")?j=p(j):"center"==d.attr("data-idd-placement")?k=p(k):"right"==d.attr("data-idd-placement")?m=p(m):"top"==d.attr("data-idd-placement")&&(l=p(l))),g.requestUpdateLayout()},this.addAxis=function(a,b,c,d){var e=void 0===b?"numeric":b;return o('<div data-idd-axis="'+e+'"></div>',a,c,!1,d)};var t;this.measure=function(a){var b=(g.screenSize.width!==a.width||g.screenSize.height!==a.height,this.fit(a));t={x:0,y:0,width:a.width,height:a.height};var c=function(a,b,c,d,e,f){for(var g=0,h=a.length,i=h-1;i>=0;i--){var j=a[i],k=j.content;if(j.width(b),f&&j.css("top",d(g)),j.css("left",e),void 0!==k.axis){k.width(b);var l=k.axis;l.update(c);var m=k.height();j.height()!==m&&j.height(m),g+=j.height()}else g+=j.height();f||j.css("top",d(g))}return g},d=function(a,b,c,d,e,f){for(var g=0,h=a.length,i=h-1;i>=0;i--){var j=a[i],k=j.content;if(j.height(b),k.height(b),f&&j.css("left",d(g)),j.css("top",e),void 0!==k.axis){k.height(b);var l=k.axis;l.update(c);var m=k.width();j.width()!==m&&j.width(m),g+=j.width()}else g+=j.width();f||j.css("left",d(g))}return g},e=0,f=0,h=0;f=c(l,a.width,{min:b.x,max:b.x+b.width},function(a){return a},0,!0),h=c(j,a.width,{min:b.x,max:b.x+b.width},function(b){return a.height-b},0,!1),e=f+h;var n=0,o=0,p=0;o=d(i,a.height-e,{min:b.y,max:b.y+b.height},function(a){return a},f,!0),p=d(m,a.height-e,{min:b.y,max:b.y+b.height},function(b){return a.width-b},f,!1),n=o+p;var q={width:a.width-n,height:a.height-e};void 0!==g.mapControl&&g.mapControl.setOptions({width:q.width,height:q.height}),b=this.fit(q,!0),k.forEach(function(a){a.width(q.width),a.height(q.height),a.css("top",f),a.css("left",o)});var r=this.children;r.forEach(function(a){var b=a.host;b.width(q.width),b.height(q.height),b.css("top",f),b.css("left",o)});var s=0,u=0;if(s=c(l,q.width,{min:b.x,max:b.x+b.width},function(a){return a},o,!0),u=c(j,q.width,{min:b.x,max:b.x+b.width},function(b){return a.height-b},o,!1),s!=f)for(var v=f/s,w=0,x=0;x<l.length;x++){D=l[x];var y="scaleY("+v+") translate(0px,"+w+"px)",z="0% 0%";D.css("-webkit-transform",y),D.css("-webkit-transform-origin",z),D.css("-moz-transform",y),D.css("-moz-transform-origin",z),D.css("-o-transform",y),D.css("-o-transform-origin",z),D.css("-ms-transform",y),D.css("-ms-transform-origin",z),D.css("transform",y),D.css("transform-origin",z),w+=D.height()*(v-1)}else l.forEach(function(a){a.css("-ms-transform",""),a.css("-webkit-transform",""),a.css("-moz-transform",""),a.css("-o-transform",""),a.css("transform","")});if(h!=u)for(var v=h/u,w=0,x=0;x<j.length;x++){D=j[x];var y="scaleY("+v+") translate(0px,"+-w+"px)",z="0% 0%";D.css("-webkit-transform",y),D.css("-webkit-transform-origin",z),D.css("-moz-transform",y),D.css("-moz-transform-origin",z),D.css("-o-transform",y),D.css("-o-transform-origin",z),D.css("-ms-transform",y),D.css("-ms-transform-origin",z),D.css("transform",y),D.css("transform-origin",z),w+=D.height()*(v-1)}else j.forEach(function(a){a.css("-ms-transform",""),a.css("-webkit-transform",""),a.css("-moz-transform",""),a.css("-o-transform",""),a.css("transform","")});var A=0,B=0,C=0;if(B=d(i,a.height-e,{min:b.y,max:b.y+b.height},function(a){return a},f,!0),C=d(m,a.height-e,{min:b.y,max:b.y+b.height},function(b){return a.width-b},f,!1),A=B+C,o!=B)for(var v=o/B,w=0,x=0;x<i.length;x++){var D=i[x],y="scaleX("+v+") translate("+w+"px, 0px)",z="0% 0%";D.css("-webkit-transform",y),D.css("-webkit-transform-origin",z),D.css("-moz-transform",y),D.css("-moz-transform-origin",z),D.css("-o-transform",y),D.css("-o-transform-origin",z),D.css("-ms-transform",y),D.css("-ms-transform-origin",z),D.css("transform",y),D.css("transform-origin",z),w+=D.width()*(v-1)}else i.forEach(function(a){a.css("-ms-transform",""),a.css("-webkit-transform",""),a.css("-moz-transform",""),a.css("-o-transform",""),a.css("transform","")});if(p!=C)for(var v=p/C,w=0,x=0;x<m.length;x++){var D=m[x],y="scaleX("+v+") translate("+-w+"px, 0px)",z="100% 0%";D.css("-webkit-transform",y),D.css("-webkit-transform-origin",z),D.css("-moz-transform",y),D.css("-moz-transform-origin",z),D.css("-o-transform",y),D.css("-o-transform-origin",z),D.css("-ms-transform",y),D.css("-ms-transform-origin",z),D.css("transform",y),D.css("transform-origin",z),w+=D.width()*(v-1)}else m.forEach(function(a){a.css("-ms-transform",""),a.css("-webkit-transform",""),a.css("-moz-transform",""),a.css("-o-transform",""),a.css("transform","")});return q},this.arrange=function(a){f.Figure.prototype.arrange.call(this,a)},this.exportContentToSvg=function(b,c,d){for(var e=function(b,c){var d=b instanceof jQuery?window.getComputedStyle(b[0],null):window.getComputedStyle(b,null),e=d?d.getPropertyValue("transform"):void 0,f=d?d.getPropertyValue("padding-bottom"):void 0,g=d?parseFloat(d.getPropertyValue("font-size")):void 0,h=d?d.getPropertyValue("font-family"):void 0,i=d?d.getPropertyValue("font-weight"):void 0,j=d?d.getPropertyValue("text-align"):void 0;"center"==j&&(j="middle"),"left"==j&&(j="start"),"right"==j&&(j="end");var k=a(b).width(),l=a(b).height(),m=a(b).text().trim(),n=c.text(m).font({family:h,size:g,weight:i,anchor:j});"middle"==j?n.translate(k/2,-l/2):"end"==j?n.translate(k,-l/2):n.translate(0,-l/2),"none"!=e&&void 0!=e&&(f=void 0!=f?parseFloat(f.substring(0,f.length-2)):0,n.attr({transform:e}),n.translate(-f,l/2))},g=d.group(),h=0,k=i.length;--k>=0;){var n=i[k],o=g.group();if(o.translate(h,0),h+=n.width(),n.content)if(n.content.axis)n.content.axis.renderToSvg(o);else{var p=!0;a(n.content).contents().each(function(){3!=this.nodeType&&(p=!1)}),p&&e(n.content,o)}}for(var q=d.group(),r=0,k=l.length;--k>=0;){var n=l[k],o=q.group();if(o.translate(h,r),r+=n.height(),n.content)if(n.content.axis)n.content.axis.renderToSvg(o);else{var p=!0;a(n.content).contents().each(function(){3!=this.nodeType&&(p=!1)}),p&&e(n.content,o)}}g.translate(0,r);for(var s=d.group(),t=r+c.height,k=0;k<j.length;k++){var n=j[k],o=s.group();if(o.translate(h,t),t+=n.height(),n.content)if(n.content.axis)n.content.axis.renderToSvg(o);else{var p=!0;a(n.content).contents().each(function(){3!=this.nodeType&&(p=!1)}),p&&e(n.content,o)}}for(var u=d.group(),v=h+c.width,k=0;k<m.length;k++){var n=m[k],o=u.group();if(o.translate(v,r),v+=n.width(),n.content)if(n.content.axis)n.content.axis.renderToSvg(o);else{var p=!0;a(n.content).contents().each(function(){3!=this.nodeType&&(p=!1)}),p&&e(n.content,o)}}var w=d.group();w.viewbox(0,0,c.width,c.height).translate(h,r),f.Figure.prototype.exportContentToSvg.call(this,b,c,w)},this.requestUpdateLayout()}},f.Figure.prototype=new f.Plot,f.Chart=function(b,c){if(b){if(void 0!==c)throw"Chart cannot be a dependent plot";var d=a("<div data-idd-plot='grid' data-idd-placement='center'></div>").prependTo(b),e=a('<div data-idd-axis="numeric" data-idd-placement="left"></div>').prependTo(b),g=a('<div data-idd-axis="numeric" data-idd-placement="bottom"></div>').prependTo(b);this.base=f.Figure,this.base(b,c);var h=this,i=this.get(d[0]);g.axis=i.xAxis=this.get(g[0]),e.axis=i.yAxis=this.get(e[0]);var j=a("<div></div>").prependTo(this.centralPart),k=new f.Legend(this,j,!0);j.css("float","right"),Object.defineProperty(this,"legend",{get:function(){return k},configurable:!1}),f.Gestures.FullEventList.forEach(function(a){j[0].addEventListener(a,function(a){a.stopPropagation()},!1)});var l={};f.Utils.readStyle(b,l);var m=l.isLegendVisible;m&&("true"==m?k.isVisible=!0:"false"==m&&(k.isVisible=!1));var n=function(){var a=f.Gestures.getGesturesStream(h.centralPart),b=f.Gestures.applyHorizontalBehavior(f.Gestures.getGesturesStream(g)),c=f.Gestures.applyVerticalBehavior(f.Gestures.getGesturesStream(e));h.navigation.gestureSource=a.merge(b.merge(c))};this.onDataTranformChangedCore=function(a){if("y"==a){var b=f.TicksRenderer.getAxisType(h.yDataTransform);if(e.axis.host.attr("data-idd-axis")==b)"log"!=b&&(e.axis.dataTransform=h.yDataTransform);else{var c=e;e=h.addAxis("left",b,!0,e[0]),h.removeDiv(c[0]),c.axis.destroy(),i.yAxis=this.get(e[0]),n()}h.enumAll(h,function(a){a!=h&&(a.yDataTransform=h.yDataTransform)})}else if("x"==a){var b=f.TicksRenderer.getAxisType(h.xDataTransform);if(g.axis.host.attr("data-idd-axis")==b)"log"!=b&&(g.axis.dataTransform=h.xDataTransform);else{var c=g;g=h.addAxis("bottom",b,!0,g[0]),h.removeDiv(c[0]),c.axis.destroy(),i.xAxis=this.get(g[0]),n()}h.enumAll(h,function(a){a!=h&&(a.xDataTransform=h.xDataTransform)})}},this.onChildrenChanged=function(a){"add"==a.type&&(h.xDataTransform&&(a.plot.xDataTransform=h.xDataTransform),h.yDataTransform&&(a.plot.yDataTransform=h.yDataTransform))},k.div=j,this.exportToSvg=function(a,c,d){if(!SVG.supported)throw"SVG is not supported";var c=this.screenSize,a=this.coordinateTransform.getPlotRect({x:0,y:0,width:c.width,height:c.height}),e=document.createElementNS("http://www.w3.org/2000/svg","svg"),d=SVG(e).size(b.width(),b.height()),f=d.group();this.exportContentToSvg(a,c,f);var g=d.group(),h=b.width()+20;return k.isVisible&&(g.add(this.exportLegendToSvg(j[0])).translate(h,20),d.size(200+h,b.height())),d},n()}},f.Chart.prototype=new f.Figure,f.LabelPlot=function(a,b){this.base=f.CanvasPlot,this.base(a,b);var c=[],d=[],e=[],g=[],h={x:120,y:25},i=[];this.getData=function(){for(var a=[],b=c.length,f=0;f<b;f++)a.push({text:c[f],position:{x:d[f],y:e[f]},placement:g[f]});return a},this.draw=function(a){if(a){for(var b=a.length,f=[],h=[],j=[],k=[],l=0;l<b;l++)f.push(a[l].text),h.push(a[l].position.x),j.push(a[l].position.y),a[l].placement?k.push(a[l].placement):k.push("center"),i.push(0);c=f,d=h,e=j,g=k}this.invalidateLocalBounds(),this.requestNextFrameOrUpdate(),this.fireAppearanceChanged()},this.computeLocalBounds=function(){var a=this.xDataTransform&&this.xDataTransform.dataToPlot,b=this.yDataTransform&&this.yDataTransform.dataToPlot;if(d.length>0&&e.length>0){var c=f.Utils.getMinMax(d),g=f.Utils.getMinMax(e),h=c.min-.2,i=c.max+.2,j=g.min,k=g.max;return a&&(h=a(h),i=a(i)),b&&(j=b(j),k=b(k)),{x:h,y:j,width:i-h,height:k-j}}},this.getLocalPadding=function(){return{left:0,right:0,top:0,bottom:0}},this.renderCore=function(a,b){f.LabelPlot.prototype.renderCore.call(this,a,b);var j=this.getContext(!0),k=c.length;if(0!=k)for(var l=this.getTransform(),m=l.dataToScreenX,n=l.dataToScreenY,o=0;o<k;o++){var p={x:m(d[o]),y:n(e[o])};"left"==g[o]?p={x:m(d[o])-h.x,y:n(e[o])}:"right"==g[o]?p={x:m(d[o])+h.x,y:n(e[o])}:"top"==g[o]?p={x:m(d[o]),y:n(e[o])-h.y}:"bottom"==g[o]&&(p={x:m(d[o]),y:n(e[o])+h.y});var q=window.getComputedStyle(document.body,null),r=q?parseFloat(q.getPropertyValue("font-size")):void 0,s=q?q.getPropertyValue("font-family"):void 0,t=q?q.getPropertyValue("font-weight"):void 0,u=p.x-.5*h.x,v=p.y;j.fillStyle="black",j.font=t+" "+r+"px "+s,j.textALign="center";for(var w=c[o],x=j.measureText(w).width;x>h.x;)w=w.substring(0,w.length-1),x=j.measureText(w).width;i[o]=(h.x-x)/2,j.fillText(w,u+i[o],v)}},this.renderCoreSvg=function(a,b,f){var j=c.length;if(j>0){for(var k=b.height,l=b.width,m=this.coordinateTransform.plotToScreenX,n=this.coordinateTransform.plotToScreenY,o=this.xDataTransform&&this.xDataTransform.dataToPlot,p=this.yDataTransform&&this.yDataTransform.dataToPlot,q=o?function(a){return m(o(a))}:m,r=p?function(a){return n(p(a))}:n,s=f.group(),t=0;t<j;t++){var u=window.getComputedStyle(document.body,null),v=u?parseFloat(u.getPropertyValue("font-size")):void 0,w=u?u.getPropertyValue("font-family"):void 0,x=u?u.getPropertyValue("font-weight"):void 0,y={x:q(d[t]),y:r(e[t])};"left"==g[t]?y={x:q(d[t])-h.x,y:r(e[t])}:"right"==g[t]?y={x:q(d[t])+h.x,y:r(e[t])}:"top"==g[t]?y={x:q(d[t]),y:r(e[t])-h.y}:"bottom"==g[t]&&(y={x:q(d[t]),y:r(e[t])+h.y});var z=y.x-.5*h.x,A=y.y-.9*h.y,B=s.group();B.size(h.x,h.y);B.text(c[t]).font({family:w,size:v,weight:x});B.translate(z+i[t],A),B.clipWith(B.rect(h.x,h.y))}s.clipWith(s.rect(l,k))}}},f.LabelPlot.prototype=new f.CanvasPlot,f.MaxMarkersPerAnimationFrame=3e3,f.Markers=function(b,c){if(this.base=f.CanvasPlot,this.base(b,c),b){var d={},e=void 0,g={},h={},i=void 0,j=!1,k={},l=this,m=function(){void 0!=l.mapControl&&void 0!=i&&(i.forEach(function(a){var b=l.mapControl.entities.indexOf(a);b>=0&&l.mapControl.entities.removeAt(b)}),i=void 0)},n=function(){if("undefined"!=typeof g.x&&"undefined"!=typeof g.y){var a=g.x,b=g.y;if(f.Utils.isArray(a)&&f.Utils.isArray(b)){var c=Math.min(a.length,b.length);if(c<=f.MaxMarkersPerAnimationFrame){i=new Array(c);for(var d=0;d<c;d++){var e=new Microsoft.Maps.Pushpin(new Microsoft.Maps.Location(b[d],a[d]),{visible:!1,htmlContent:'<div style="background-color: white; opacity: 0.5; width: 10px; height: 10px"></div>',anchor:new Microsoft.Maps.Point(5,5)});i[d]=e,l.mapControl.entities.push(e)}}}}},o=function(a){var b={},c={},d=-1;for(var e in a){var g=a[e];f.Utils.isArray(g)?((g.length<d||d===-1)&&(d=g.length),b[e]=g):c[e]=g}return{arrays:b,scalars:c,length:d===-1?0:d}};this.getDataCopy=function(){return d},this.draw=function(b,c){if(void 0==b||null==b)throw"The argument 'data' is undefined or null";d=b;var i;if("undefined"==typeof b.shape||null==b.shape)i=f.Markers.shapes.box;else if("string"==typeof b.shape){if(i=f.Markers.shapes[b.shape],void 0==i)throw"The given marker shape is unknown"}else{if("object"!=typeof b.shape||null==b.shape||"function"!=typeof b.shape.draw)throw"The argument 'data' is incorrect: value of the property 'shape' must be a string, a MarkerShape object, undefined or null";i=b.shape}e=i;var j=a.extend({},b);void 0!=i.prepare&&i.prepare(j),m(),g=j,h={},this.invalidateLocalBounds(),this.requestNextFrameOrUpdate(),this.setTitles(c,!0),this.fireAppearanceChanged()},this.computeLocalBounds=function(a,b){var c=this.xDataTransform&&this.xDataTransform.dataToPlot,d=this.yDataTransform&&this.yDataTransform.dataToPlot;if(e&&"undefined"!=typeof e.getBoundingBox&&g){for(var h=o(g),i=h.length,j=h.arrays,k=h.scalars,l=void 0,m=0;m<i;m++){for(var n in j)k[n]=j[n][m];var p=e.getBoundingBox(k);l=f.Utils.unionRects(l,p)}if(c){var q=c(l.x),r=c(l.x+l.width);l.x=q,l.width=r-q}if(d){var s=d(l.y),t=d(l.y+l.height);l.y=s,l.height=t-s}return l}if("undefined"!=typeof g.x&&"undefined"!=typeof g.y)return f.Utils.getBoundingBoxForArrays(g.x,g.y,c,d)},this.getLocalPadding=function(){if(e&&"undefined"!=typeof e.getPadding)return e.getPadding(g);var a=0;return{left:a,right:a,top:a,bottom:a}},this.renderCore=function(a,b){if(f.Markers.prototype.renderCore.call(this,a,b),void 0!=e){var c=this.getTransform(),d=!l.master.isInAnimation||void 0===l.master.mapControl;if(void 0!==l.mapControl&&(void 0===i&&n(),void 0!==i&&(l.master.isInAnimation&&!j?(i.forEach(function(a){a.setOptions({visible:!0})}),j=!0):!l.master.isInAnimation&&j&&(i.forEach(function(a){a.setOptions({visible:!1})}),j=!1))),d){var k=this.getContext(!0);h=g,"undefined"!=typeof e.preRender&&(h=e.preRender(g,a,b,c,k));for(var m=o(h),p=m.length,q=m.arrays,r=m.scalars,s=0;s<p;s++){for(var t in q)r[t]=q[t][s];e.draw(r,a,b,c,k,s)}}}},this.renderCoreSvg=function(a,b,c){if(void 0!=e&&void 0!=e.renderSvg){var d=this.getTransform();e.renderSvg(a,b,c,g,d)}},this.findToolTipMarkers=function(a,b,c,g){if(void 0==e||"undefined"==typeof e.hitTest||void 0==h)return[];for(var i=this.getTransform(),j={x:i.dataToScreenX(a),y:i.dataToScreenY(b)},l={x:a,y:b},m=o(h),n=m.length,p=m.arrays,q=m.scalars,r=[],s=0;s<n;s++){for(var t in p)q[t]=p[t][s];if(e.hitTest(q,i,j,l)&&"number"==typeof q.indices){var u=q.indices,v={};if(e.getTooltipData)v=e.getTooltipData(d,u);else{for(var t in d){var w=d[t];f.Utils.isArray(w)&&u<w.length&&(k[t]=new f.AdaptiveFormatter(w),v[t]=k[t].toString(w[u]))}v.index=u}r.push(v)}}return r},this.getTooltip=function(b,c,d,e){var f=this,g=f.findToolTipMarkers(b,c,d,e),h=function(b){var c=a("<div></div>").addClass("idd-tooltip-compositevalue");for(var d in b)if(b.hasOwnProperty(d)){var e=f.getTitle(d),g=void 0;"object"==typeof b[d]&&(g=h(b[d])),g?c.append(a("<div>"+e+":</div>")).append(g):c.append(a("<div>"+e+": "+b[d]+"</div>"))}return c};if(g.length>0){var i=a("<div></div>");return a("<div></div>").addClass("idd-tooltip-name").text(f.name||"markers").appendTo(i),g.forEach(function(a){h(a).addClass("idd-tooltip-itemvalues").appendTo(i)}),i}},this.getLegend=function(){var b=a("<span></span>"),c={thumbnail:a("<canvas></canvas>"),content:a("<div></div>")},d=function(){b.empty(),e&&"undefined"!=typeof e.getLegend&&(c.content.empty(),e.getLegend(g,l.getTitle,c)),b.text(l.name)};this.host.bind("appearanceChanged",d),d();var f=function(){l.host.unbind("appearanceChanged",d),b.empty()};return{name:b,legend:c,onLegendRemove:f}},this.buildSvgLegend=function(a,b){var c=this,d={thumbnail:b.group(),content:b.group()};a.height=30,e&&"undefined"!=typeof e.buildSvgLegendElements&&(d=e.buildSvgLegendElements(a,b,g,c.getTitle)),b.rect(a.width,a.height).fill({color:"white",opacity:0}),b.add(d.thumbnail.translate(5,5));var f=window.getComputedStyle(a.legendDiv.children[0].children[1],null),h=parseFloat(f.getPropertyValue("font-size")),i=f.getPropertyValue("font-family");b.add(b.text(c.name).font({family:i,size:h}).translate(40,0)),b.add(d.content.translate(5,30))},this.onDataTransformChanged=function(a){this.invalidateLocalBounds(),f.Markers.prototype.onDataTransformChanged.call(this,a)};var p=f.Utils.getDataSourceFunction(b,f.readCsv),q=p(b);q&&"undefined"!=typeof q.y&&this.draw(q)}},f.Markers.prototype=new f.CanvasPlot,f.Markers.defaults={color:"#4169ed",colorPalette:f.palettes.grayscale,border:"#000000",size:10},f.Markers.shapes=f.Markers.shapes||{},function(){var b={prepare:function(a){var b=a.shape?a.shape.toLowerCase():"box";if("box"==b)a.shape=1;else if("circle"==b)a.shape=2;else if("diamond"==b)a.shape=3;else if("cross"==b)a.shape=4;else{if("triangle"!=b)throw"Unexpected value of property 'shape'";a.shape=5}if(void 0==a.y||null==a.y)throw"The mandatory property 'y' is undefined or null";if(!f.Utils.isArray(a.y))throw"The property 'y' must be an array of numbers";var c=a.y.length,d=new Int8Array(c);if(f.Utils.maskNaN(d,a.y),void 0==a.x)a.x=f.Utils.range(0,c-1);else{if(!f.Utils.isArray(a.x))throw"The property 'x' must be an array of numbers";if(a.x.length!=c)throw"Length of the array which is a value of the property 'x' differs from lenght of 'y'";f.Utils.maskNaN(d,a.x)}if(void 0!=a.border&&"none"!=a.border||(a.border=null),void 0==a.color&&(a.color=f.Markers.defaults.color),f.Utils.isArray(a.color)){if(a.color.length!=c)throw"Length of the array 'color' is different than length of the array 'y'";if(c>0&&"string"!=typeof a.color[0]){var e=a.colorPalette;if(void 0==e&&(e=f.Markers.defaults.colorPalette),"string"==typeof e&&(e=new f.ColorPalette.parse(e)),void 0!=e&&e.isNormalized){var g=f.Utils.getMinMax(a.color);g=f.Utils.makeNonEqual(g),e=e.absolute(g.min,g.max)}a.colorPalette=e;for(var h=new Array(c),i=0;i<c;i++){var j=a.color[i];if(j!=j)d[i]=1;else{var k=e.getRgba(j);h[i]="rgba("+k.r+","+k.g+","+k.b+","+k.a+")"}}a.color=h}a.individualColors=!0}else a.individualColors=!1;var l=new Array(c);if(void 0==a.size&&(a.size=f.Markers.defaults.size),f.Utils.isArray(a.size)){if(a.size.length!=c)throw"Length of the array 'size' is different than length of the array 'y'";if(void 0!=a.sizePalette){var e=f.SizePalette.Create(a.sizePalette);if(e.isNormalized){var g=f.Utils.getMinMax(a.size);g=f.Utils.makeNonEqual(g),e=new f.SizePalette(!1,e.sizeRange,g)}a.sizePalette=e;for(var i=0;i<c;i++){var m=a.size[i];m!=m?d[i]=1:l[i]=e.getSize(m)}}else l=a.size,a.sizeMax=f.Utils.getMax(a.size)}else{for(var i=0;i<c;i++)l[i]=a.size;a.sizeMax=a.size}a.size=l;for(var n=0,i=0;i<c;i++)1===d[i]&&n++;if(n>0){n=c-n,a.x=f.Utils.applyMask(d,a.x,n),a.y=f.Utils.applyMask(d,a.y,n),a.size=f.Utils.applyMask(d,a.size,n),a.individualColors&&(a.color=f.Utils.applyMask(d,a.color,n));for(var o=Array(n),i=0,p=0;i<c;i++)0===d[i]&&(o[p++]=i);a.indices=o}else a.indices=f.Utils.range(0,c-1)},preRender:function(a,b,c,d,e){return a.individualColors||(e.fillStyle=a.color),null!=a.border&&(e.strokeStyle=a.border),a},draw:function(a,b,c,d,e,f){a.individualColors&&(e.fillStyle=a.color);var g=null!=a.border,h=d.dataToScreenX(a.x),i=d.dataToScreenY(a.y),j=c.width,k=c.height,l=a.size,m=l/2;if(!(h-m>j||h+m<0||i-m>k||i+m<0))switch(a.shape){case 1:e.fillRect(h-m,i-m,l,l),g&&e.strokeRect(h-m,i-m,l,l);break;case 2:e.beginPath(),e.arc(h,i,m,0,2*Math.PI),e.fill(),g&&e.stroke();break;case 3:e.beginPath(),e.moveTo(h-m,i),e.lineTo(h,i-m),e.lineTo(h+m,i),e.lineTo(h,i+m),e.closePath(),e.fill(),g&&e.stroke();break;case 4:var n=l/3,o=n/2;g?(e.beginPath(),e.moveTo(h-m,i-o),e.lineTo(h-o,i-o),e.lineTo(h-o,i-m),e.lineTo(h+o,i-m),e.lineTo(h+o,i-o),e.lineTo(h+m,i-o),e.lineTo(h+m,i+o),e.lineTo(h+o,i+o),e.lineTo(h+o,i+m),e.lineTo(h-o,i+m),e.lineTo(h-o,i+o),e.lineTo(h-m,i+o),e.closePath(),e.fill(),e.stroke()):(e.fillRect(h-o,i-m,n,l),e.fillRect(h-m,i-o,l,n));break;case 5:e.beginPath(),e.moveTo(h-m,i+m),e.lineTo(h,i-m),e.lineTo(h+m,i+m),e.closePath(),e.fill(),g&&e.stroke()}},getPadding:function(a){var b=a.sizeMax/2;return{left:b,right:b,top:b,bottom:b}},hitTest:function(a,b,c,d){var e=function(a,b){for(var c=function(a,b,c){var d={x:c.x-b.x,y:c.y-b.y},e={x:a.x-b.x,y:a.y-b.y},f=d.x*e.y-d.y*e.x;return f>0?1:f<0?2:0},d=b.length,e=0;e<d;e++)if(1!=c(a,b[e],b[(e+1)%d]))return!1;return!0},f=b.dataToScreenX(a.x),g=b.dataToScreenY(a.y),h=c.x,i=c.y,j=a.size,k=j/2;if(c.x>=f-k&&c.x<=f+k&&c.y>=g-k&&c.y<=g+k)switch(a.shape){case 1:return!0;case 2:return(f-h)*(f-h)+(g-i)*(g-i)<=k*k;case 3:return e({x:h,y:i},[{x:f-k,y:g},{x:f,y:g-k},{x:f+k,y:g},{x:f,y:g+k}]);case 4:var l=j/3,m=l/2;return e({x:h,y:i},[{x:f-m,y:g+k},{x:f-m,y:g-k},{x:f+m,y:g-k},{x:f+m,y:g+k}])||e({x:h,y:i},[{x:f-k,y:g+m},{x:f-k,y:g-m},{x:f+k,y:g-m},{x:f+k,y:g+m}]);case 5:return e({x:h,y:i},[{x:f-k,y:g+k},{x:f,y:g-k},{x:f+k,y:g+k}])}},getLegend:function(b,c,d){var e=d.content,g=14;document.defaultView&&document.defaultView.getComputedStyle&&(g=parseFloat(document.defaultView.getComputedStyle(e[0],null).getPropertyValue("font-size"))),(isNaN(g)||0==g)&&(g=14);var h=d.thumbnail,i=!0,j=1.5*g,k=j/2+1,l=k;h[0].width=h[0].height=j+2;var m=h[0].style,n=h.get(0).getContext("2d");n.clearRect(0,0,h[0].width,h[0].height);var o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=0,D=0,E=0,F=function(){if(v=j,b.sizePalette){var d=c("size");if(0==E){x=a("<div style='width: 170px; margin-top: 5px; margin-bottom: 5px'></div>").appendTo(e),A=a("<div class='idd-legend-item-property'></div>").text(d).appendTo(x),y=x[0].style;var g=a("<div style='width: 170px; color: rgb(0,0,0)'></div>").appendTo(x);z=new f.SizePaletteViewer(g),E=2}else A.text(d);z.palette=f.SizePalette.Create(b.sizePalette)}w=v/2},G=function(){if(r=!1,b.individualColors&&b.colorPalette){var d=c("color");if(0==D){s=a("<div style='width: 170px; margin-top: 5px; margin-bottom: 5px'></div>").appendTo(e),B=a("<div class='idd-legend-item-property'></div>").text(d).appendTo(s),t=s[0].style;var g=a("<div style='width: 170px; color: rgb(0,0,0); '></div>").appendTo(s);u=new f.ColorPaletteViewer(g),D=2}else B.text(d);u.palette=b.colorPalette,1==D&&(t.display="block",D=2)}else 2==D&&(t.display="none",D=1);b.individualColors?(q="#000000",p="#ffffff",r=!0):(p=b.color,q=p,null!=b.border&&(r=!0,q=b.border))},H=function(){switch(2==C&&(o.display="none",C=1),n.clearRect(0,0,j+2,j+2),n.strokeStyle=q,n.fillStyle=p,b.shape){case 1:n.fillRect(k-w,l-w,v,v),r&&n.strokeRect(k-w,l-w,v,v);break;case 2:n.beginPath(),n.arc(k,l,w,0,2*Math.PI),n.fill(),r&&n.stroke();break;case 3:n.beginPath(),n.moveTo(k-w,l),n.lineTo(k,l-w),n.lineTo(k+w,l),n.lineTo(k,l+w),n.closePath(),n.fill(),r&&n.stroke();break;case 4:var a=v/3,c=a/2;r?(n.beginPath(),n.moveTo(k-w,l-c),n.lineTo(k-c,l-c),n.lineTo(k-c,l-w),n.lineTo(k+c,l-w),n.lineTo(k+c,l-c),n.lineTo(k+w,l-c),n.lineTo(k+w,l+c),n.lineTo(k+c,l+c),n.lineTo(k+c,l+w),n.lineTo(k-c,l+w),n.lineTo(k-c,l+c),n.lineTo(k-w,l+c),n.closePath(),n.fill(),n.stroke()):(n.fillRect(k-c,l-w,a,v),n.fillRect(k-w,l-c,v,a));break;case 5:n.beginPath(),n.moveTo(k-w,l+w),n.lineTo(k,l-w),n.lineTo(k+w,l+w),n.closePath(),n.fill(),r&&n.stroke()}i||(m.display="inline-block",i=!0)};G(),F(),H()},renderSvg:function(a,b,c,d,e){var f=d.y.length;if(0!=f){var g,h,i=c.group(),j=e.dataToScreenX,k=e.dataToScreenY,l=b.width,m=b.height,n=0,o=function(){for(var a=null==d.border?"none":d.border;n<f;n++){g=j(d.x[n]),h=k(d.y[n]);var b=d.size[n],c=b/2;c1=g-c>l||g+c<0||h-c>m||h+c<0;var e=d.individualColors?d.color[n]:d.color;if(!c1)if(1==d.shape)i.rect(d.size[n],d.size[n]).translate(g-c,h-c).fill(e).style({stroke:a});else if(2==d.shape)i.circle(d.size[n]).translate(g-c,h-c).style({fill:e,stroke:a});else if(3==d.shape)i.rect(d.size[n]/Math.sqrt(2),d.size[n]/Math.sqrt(2)).translate(g,h-c).style({fill:e,stroke:a}).rotate(45);else if(4==d.shape){var o=b/6;i.polyline([[-c,-o],[-o,-o],[-o,-c],[o,-c],[o,-o],[c,-o],[c,o],[o,o],[o,c],[-o,c],[-o,o],[-c,o],[-c,-o]]).translate(g,h).style({fill:e,stroke:a})}else if(5==d.shape){var p=Math.sqrt(3)/6*b;i.polyline([[g-c,h+p],[g,h-2*p],[g+c,h+p],[g-c,h+p]]).style({fill:e,stroke:a})}}i.clipWith(i.rect(l,m))};o()}},buildSvgLegendElements:function(a,b,c,d){var e=b.group(),g=b.group(),h=12,i=1.5*h,j=i/2+1,k=j,l=i/2;switch(c.individualColors?(border="#000000",color="#ffffff"):(color=c.color,border="none",null!=c.border&&(border=c.border)),c.shape){case 1:e.rect(i,i).translate(j-l,k-l).fill({color:color,opacity:1}).stroke(border);break;case 2:e.circle(i).translate(j-l,k-l).fill(color).stroke(border);break;case 3:e.rect(i/Math.sqrt(2),i/Math.sqrt(2)).translate(j,k-l).fill(color).stroke(border).rotate(45);break;case 4:var m=i/6;e.polyline([[-l,-m],[-m,-m],[-m,-l],[m,-l],[m,-m],[l,-m],[l,m],[m,m],[m,l],[-m,l],[-m,m],[-l,m],[-l,-m]]).translate(j,k).fill(color).stroke(border);break;case 5:var n=Math.sqrt(3)/6*i;e.polyline([[j-l,k+n],[j,k-2*n],[j+l,k+n],[j-l,k+n]]).fill(color).stroke(border)}var o=0,p=a.legendDiv.children[1],q=c.individualColors&&c.colorPalette,r=(c.sizePalette,p&&a.legendDiv.children[1].children[0]&&a.legendDiv.children[1].children[0].children[0]?window.getComputedStyle(a.legendDiv.children[1].children[0].children[0],null):void 0);h=r?parseFloat(r.getPropertyValue("font-size")):void 0,fontFamily=r?r.getPropertyValue("font-family"):void 0;var s=r?r.getPropertyValue("font-weight"):void 0;if(q){var t=d("color");g.text(t).font({family:fontFamily,size:h,weight:s});var u=b.group(),v=a.width,w=20;f.SvgColorPaletteViewer(u,c.colorPalette,a.legendDiv.children[1].children[0].children[1],{width:v,height:w}),u.translate(5,50),o=50+w,a.height+=50+w}if(c.sizePalette){var x=d("size");g.add(b.text(x).font({family:fontFamily,size:h,weight:s}).translate(0,o));var y=b.group(),v=a.width,w=35,z=q?a.legendDiv.children[1].children[1].children[1]:a.legendDiv.children[1].children[0].children[1];f.SvgSizePaletteViewer(y,c.sizePalette,z,{width:v,height:w}),y.translate(5,50+o),a.height+=50+w}return b.front(),{thumbnail:e,content:g}}};f.Markers.shapes.box=b,f.Markers.shapes.circle=b,f.Markers.shapes.diamond=b,f.Markers.shapes.cross=b,f.Markers.shapes.triangle=b}(),f.Petal={prepare:function(a){if(!a.maxDelta){for(var b=0;isNaN(a.size.upper95[b])||isNaN(a.size.lower95[b]);)b++;var c=a.size.upper95[b]-a.size.lower95[b];for(b++;b<a.size.upper95.length;b++)isNaN(a.size.upper95[b])||isNaN(a.size.lower95[b])||(c=Math.max(c,a.size.upper95[b]-a.size.lower95[b]));a.maxDelta=c}if(void 0==a.y||null==a.y)throw"The mandatory property 'y' is undefined or null";if(!f.Utils.isArray(a.y))throw"The property 'y' must be an array of numbers";var d=a.y.length,e=new Int8Array(d);if(f.Utils.maskNaN(e,a.y),void 0==a.x)a.x=f.Utils.range(0,d-1);else{if(!f.Utils.isArray(a.x))throw"The property 'x' must be an array of numbers";if(a.x.length!=d)throw"Length of the array which is a value of the property 'x' differs from lenght of 'y'";f.Utils.maskNaN(e,a.x)}if(void 0!=a.border&&"none"!=a.border||(a.border=null),void 0==a.color&&(a.color=f.Markers.defaults.color),f.Utils.isArray(a.color)){if(a.color.length!=d)throw"Length of the array 'color' is different than length of the array 'y'";if(d>0&&"string"!=typeof a.color[0]){var g=a.colorPalette;if(void 0==g&&(g=f.Markers.defaults.colorPalette),"string"==typeof g&&(g=new f.ColorPalette.parse(g)),void 0!=g&&g.isNormalized){var h=f.Utils.getMinMax(a.color);h=f.Utils.makeNonEqual(h),g=g.absolute(h.min,h.max)}a.colorPalette=g;for(var i=new Array(d),b=0;b<d;b++){var j=a.color[b];if(j!=j)e[b]=1;else{var k=g.getRgba(j);i[b]="rgba("+k.r+","+k.g+","+k.b+","+k.a+")"}}a.color=i}a.individualColors=!0}else a.individualColors=!1;var l=new Array(d);if(f.Utils.isArray(a.size.lower95)&&f.Utils.isArray(a.size.upper95)){if(a.size.lower95.length!=d&&a.size.upper95.length!=d)throw"Length of the array 'size' is different than length of the array 'y'";if(d>0&&"number"==typeof a.size.lower95[0]&&"number"==typeof a.size.upper95[0]){for(var m=[],n=[],b=0;b<d;b++){var o=a.size.upper95[b],p=a.size.lower95[b];o!=o||p!=p?e[b]=1:(m[b]=a.size.upper95[b],n[b]=a.size.lower95[b])}a.upper95=m,a.lower95=n}}a.size="15.0";for(var b=0;b<d;b++)l[b]=a.size;a.sizeMax=a.size,a.size=l;for(var q=0,b=0;b<d;b++)1===e[b]&&q++;if(q>0){q=d-q,a.x=f.Utils.applyMask(e,a.x,q),a.y=f.Utils.applyMask(e,a.y,q),a.size=f.Utils.applyMask(e,a.size,q),a.upper95=f.Utils.applyMask(e,a.upper95,q),a.lower95=f.Utils.applyMask(e,a.lower95,q),a.individualColors&&(a.color=f.Utils.applyMask(e,a.color,q));for(var r=Array(q),b=0,s=0;b<d;b++)0===e[b]&&(r[s++]=b);a.indices=r}else a.indices=f.Utils.range(0,d-1)},preRender:function(a,b,c,d,e){return a.individualColors||(e.fillStyle=a.color),null!=a.border&&(e.strokeStyle=a.border),a},draw:function(a,b,c,d,e){var g=d.dataToScreenX(a.x),h=d.dataToScreenY(a.y);if(!(g>c.width||g<0||h>c.height||h<0)){var i=a.size/2,j=i*(1-(a.upper95-a.lower95)/a.maxDelta);a.maxDelta<=0&&(j=NaN),f.Petal.drawSample(e,g,h,j,i,a.color)}},drawSample:function(a,b,c,d,e,f){var g,h,i=Math.random()*Math.PI*2;isNaN(d)?(g=0,h=e,a.fillStyle="rgba(0, 0, 0, 0.2)"):(g=(e-d)/2,h=(e+d)/2,a.fillStyle=f),a.strokeStyle="black",a.beginPath();for(var j=200,k=2*Math.PI/j,l=0;l<j;l++){var m=k*l,n=g*Math.sin(6*m+i)+h;0==l?a.moveTo(b+n*Math.cos(m),c+n*Math.sin(m)):a.lineTo(b+n*Math.cos(m),c+n*Math.sin(m))}a.stroke(),a.closePath(),a.fill(),a.strokeStyle="gray",a.beginPath(),a.arc(b,c,1,0,2*Math.PI),a.stroke(),a.closePath()},hitTest:function(a,b,c,d){var e=b.dataToScreenX(a.x),f=b.dataToScreenY(a.y),g=a.size/2;return!(c.x<e-g||c.x>e+g)&&!(c.y<f-g||c.y>f+g)},getLegend:function(b,c,d){var e=d.content,g=14;document.defaultView&&document.defaultView.getComputedStyle&&(g=parseFloat(document.defaultView.getComputedStyle(e[0],null).getPropertyValue("font-size"))),(isNaN(g)||0==g)&&(g=14);var h=d.thumbnail,i=1.5*g,j=i/2+1,k=i/2+1;h[0].width=h[0].height=i+2;var l=(h[0].style,h.get(0).getContext("2d"));l.clearRect(0,0,h[0].width,h[0].height);var m,n,o,p,q,r,s,t,u,v,w,x,y,z=0,A=0,B=function(){s=i;var b=c("size");if(0==A){u=a("<div style='width: 170px; margin-top: 5px; margin-bottom: 5px'></div>").appendTo(e),x=a("<div class='idd-legend-item-property'></div>").text(b).appendTo(u),v=u[0].style;var d=a("<div style='width: 170px;'></div>").appendTo(u);w=new f.UncertaintySizePaletteViewer(d),A=2}else x.text(b);t=s/2},C=function(){if(o=!1,b.individualColors&&b.colorPalette){var d=c("color");if(0==z){p=a("<div style='width: 170px; margin-top: 5px; margin-bottom: 5px'></div>").appendTo(e),y=a("<div class='idd-legend-item-property'></div>").text(d).appendTo(p),q=p[0].style;var g=a("<div style='width: 170px;'></div>").appendTo(p);r=new f.ColorPaletteViewer(g),z=2}else y.text(d);r.palette=b.colorPalette,1==z&&(q.display="block",z=2)}else 2==z&&(q.display="none",
z=1);b.individualColors?(n="#000000",m="#ffffff",o=!0):(m=b.color,n=m,null!=b.border&&(o=!0,n=b.border))},D=function(){var a="gray";f.Petal.drawSample(l,j,k,t/2,t,a)};C(),B(),D()},getTooltipData:function(a,b){var c={},d={};return f.Utils.isArray(a.x)&&b<a.x.length&&(d.x=new f.AdaptiveFormatter(a.x),c.x=d.x.toString(a.x[b])),f.Utils.isArray(a.y)&&b<a.y.length&&(d.y=new f.AdaptiveFormatter(a.y),c.y=d.y.toString(a.y[b])),f.Utils.isArray(a.color)&&b<a.color.length&&(d.color=new f.AdaptiveFormatter(a.color),c.color=d.color.toString(a.color[b])),a.size&&(c.size={},f.Utils.isArray(a.size.lower95)&&b<a.size.lower95.length&&(d.lower95=new f.AdaptiveFormatter(a.size.lower95),c.size["lower 95%"]=d.lower95.toString(a.size.lower95[b])),f.Utils.isArray(a.size.upper95)&&b<a.size.upper95.length&&(d.upper95=new f.AdaptiveFormatter(a.size.upper95),c.size["upper 95%"]=d.upper95.toString(a.size.upper95[b]))),c.index=b,c},renderSvg:function(a,b,c,d,e){var f=d.y.length;if(0!=f){var g,h,i=c.group(),j=e.dataToScreenX,k=e.dataToScreenY,l=b.width,m=b.height,n=0,o=d.size[0];for(null==d.border?"none":d.border;n<f;n++){g=j(d.x[n]),h=k(d.y[n]);var p=o/2,q=p*(1-(d.upper95[n]-d.lower95[n])/d.maxDelta),r=d.color[n];if(c1=g>l||g<0||h>m||h<0,!c1){var s,t,u=Math.random()*Math.PI*2;s=(p-q)/2,t=(p+q)/2;for(var v=200,w=2*Math.PI/v,x=[],y=0;y<v;y++){var z=w*y,A=s*Math.sin(6*z+u)+t;x.push([g+A*Math.cos(z),h+A*Math.sin(z)])}i.polyline(x).fill(r).stroke("black"),i.circle(2).translate(g-1,h-1).fill("gray").stroke({width:2,color:"gray"})}}i.clipWith(i.rect(l,m))}}},f.BullEye={prepare:function(a){if(a.bullEyeShape=a.bullEyeShape?a.bullEyeShape.toLowerCase():"circle",void 0==a.y||null==a.y)throw"The mandatory property 'y' is undefined or null";if(!f.Utils.isArray(a.y))throw"The property 'y' must be an array of numbers";var b=a.y.length,c=new Int8Array(b);if(f.Utils.maskNaN(c,a.y),void 0==a.x)a.x=f.Utils.range(0,b-1);else{if(!f.Utils.isArray(a.x))throw"The property 'x' must be an array of numbers";if(a.x.length!=b)throw"Length of the array which is a value of the property 'x' differs from lenght of 'y'";f.Utils.maskNaN(c,a.x)}if(void 0!=a.border&&"none"!=a.border||(a.border=null),f.Utils.isArray(a.color.lower95)&&f.Utils.isArray(a.color.upper95)){if(a.color.lower95.length!=b&&a.color.upper95.length!=b)throw"Length of the array 'color' is different than length of the array 'y'";if(b>0&&"undefined"!=typeof a.color.lower95[0]&&"string"!=typeof a.color.upper95[0]){var d=a.colorPalette;if(void 0==d&&(d=f.Markers.defaults.colorPalette),"string"==typeof d&&(d=new f.ColorPalette.parse(d)),void 0!=d&&d.isNormalized){var e={min:f.Utils.getMin(a.color.lower95),max:f.Utils.getMax(a.color.upper95)};e=f.Utils.makeNonEqual(e),d=d.absolute(e.min,e.max)}a.colorPalette=d;for(var g=[],h=[],i=0;i<b;i++){var j=a.color.upper95[i],k=a.color.lower95[i];if(j!=j||k!=k)c[i]=1;else{var l=d.getRgba(j),m=d.getRgba(k);g[i]="rgba("+l.r+","+l.g+","+l.b+","+l.a+")",h[i]="rgba("+m.r+","+m.g+","+m.b+","+m.a+")"}}a.upper95=g,a.lower95=h}a.individualColors=!0}else a.individualColors=!1;var n=new Array(b);if(void 0==a.size&&(a.size=f.Markers.defaults.size),f.Utils.isArray(a.size)){if(a.size.length!=b)throw"Length of the array 'size' is different than length of the array 'y'";if(void 0!=a.sizePalette){var d=f.SizePalette.Create(a.sizePalette);if(d.isNormalized){var e=f.Utils.getMinMax(a.size);e=f.Utils.makeNonEqual(e),d=new f.SizePalette(!1,d.sizeRange,e)}a.sizePalette=d;for(var i=0;i<b;i++){var o=a.size[i];o!=o?c[i]=1:n[i]=d.getSize(o)}}else a.sizeMax=f.Utils.getMax(a.size)}else{for(var i=0;i<b;i++)n[i]=a.size;a.sizeMax=a.size}a.size=n;for(var p=0,i=0;i<b;i++)1===c[i]&&p++;if(p>0){p=b-p,a.x=f.Utils.applyMask(c,a.x,p),a.y=f.Utils.applyMask(c,a.y,p),a.size=f.Utils.applyMask(c,a.size,p),a.individualColors&&(a.upper95=f.Utils.applyMask(c,a.upper95,p),a.lower95=f.Utils.applyMask(c,a.lower95,p));for(var q=Array(p),i=0,r=0;i<b;i++)0===c[i]&&(q[r++]=i);a.indices=q}else a.indices=f.Utils.range(0,b-1)},preRender:function(a,b,c,d,e){return null!=a.border&&(e.strokeStyle=a.border),a},draw:function(a,b,c,d,e){var g=(a.y_mean,a.upper95),h=a.lower95,i=a.size,j=i/2,k=d.dataToScreenX(a.x),l=d.dataToScreenY(a.y);k+j<0||k-j>c.width||l+j<0||l-j>c.height||(f.BullEye.drawBullEye(e,a.bullEyeShape,k,l,i,i,g),f.BullEye.drawBullEye(e,a.bullEyeShape,k,l,j,j,h))},drawBullEye:function(a,b,c,d,e,f,g,h){var i=e,j=f,k="none"!==h;a.strokeStyle=void 0!==h?h:"black",a.fillStyle=void 0!==g?g:"black";var l=c,m=d,n=Math.min(i,j),o=.5*n;switch(a.clearRect(0,0,i,j),b){case"box":k&&a.strokeRect(l-o,m-o,n,n),a.fillRect(l-o,m-o,n,n);break;case"circle":a.beginPath(),a.arc(l,m,o,0,2*Math.PI),k&&a.stroke(),a.fill();break;case"diamond":a.beginPath(),a.moveTo(l-o,m),a.lineTo(l,m-o),a.lineTo(l+o,m),a.lineTo(l,m+o),a.closePath(),k&&a.stroke(),a.fill();break;case"cross":var p=n/3,q=p/2;a.beginPath(),a.moveTo(l-o,m-q),a.lineTo(l-q,m-q),a.lineTo(l-q,m-o),a.lineTo(l+q,m-o),a.lineTo(l+q,m-q),a.lineTo(l+o,m-q),a.lineTo(l+o,m+q),a.lineTo(l+q,m+q),a.lineTo(l+q,m+o),a.lineTo(l-q,m+o),a.lineTo(l-q,m+q),a.lineTo(l-o,m+q),a.closePath(),k&&a.stroke(),a.fill();break;case"triangle":var r=Math.sqrt(3)/6*n;a.beginPath(),a.moveTo(l-o,m+r),a.lineTo(l,m-2*r),a.lineTo(l+o,m+r),a.closePath(),k&&a.stroke(),a.fill()}},hitTest:function(a,b,c,d){var e=b.dataToScreenX(a.x),f=b.dataToScreenY(a.y),g=c.x>e-a.size/2&&c.x<e+a.size/2&&c.y>f-a.size/2&&c.y<f+a.size/2;return g},getPadding:function(a){var b=0;return{left:b,right:b,top:b,bottom:b}},getLegend:function(b,c,d){var e=d.content,g=14;document.defaultView&&document.defaultView.getComputedStyle&&(g=parseFloat(document.defaultView.getComputedStyle(e[0],null).getPropertyValue("font-size"))),(isNaN(g)||0==g)&&(g=14);var h=d.thumbnail,i=1.5*g,j=i/2+1,k=i/2+1;h[0].width=h[0].height=i+2;var l=(h[0].style,h.get(0).getContext("2d"));l.clearRect(0,0,h[0].width,h[0].height);var m,n,o,p,q,r,s,t,u,v,w,x,y,z=0,A=0,B=function(){if(s=i,b.sizePalette){var d=c("size");if(0==A){u=a("<div style='width: 170px; margin-top: 5px; margin-bottom: 5px'></div>").appendTo(e),x=a("<div class='idd-legend-item-property'></div>").text(d).appendTo(u),v=u[0].style;var g=a("<div style='width: 170px;'></div>").appendTo(u);w=new f.SizePaletteViewer(g),A=2}else x.text(d);w.palette=f.SizePalette.Create(b.sizePalette)}t=s/2},C=function(){if(o=!1,b.individualColors&&b.colorPalette){var d=c("color");if(0==z){p=a("<div style='width: 170px; margin-top: 5px; margin-bottom: 5px'></div>").appendTo(e),y=a("<div class='idd-legend-item-property'></div>").text(d).appendTo(p),q=p[0].style;var g=a("<div style='width: 170px;'></div>").appendTo(p);r=new f.ColorPaletteViewer(g),z=2}else y.text(d);r.palette=b.colorPalette,1==z&&(q.display="block",z=2)}else 2==z&&(q.display="none",z=1);b.individualColors?(n="#000000",m="#ffffff",o=!0):(m=b.color,n=m,null!=b.border&&(o=!0,n=b.border))},D=function(){var a="gray",c="gray";f.BullEye.drawBullEye(l,b.bullEyeShape,j,k,s,s,a,c)};C(),B(),D()},getTooltipData:function(a,b){var c={},d={};return f.Utils.isArray(a.x)&&b<a.x.length&&(d.x=new f.AdaptiveFormatter(a.x),c.x=d.x.toString(a.x[b])),f.Utils.isArray(a.y)&&b<a.y.length&&(d.y=new f.AdaptiveFormatter(a.y),c.y=d.y.toString(a.y[b])),a.color&&(c.color={},f.Utils.isArray(a.color.lower95)&&b<a.color.lower95.length&&(d.lower95=new f.AdaptiveFormatter(a.color.lower95),c.color["lower 95%"]=d.lower95.toString(a.color.lower95[b])),f.Utils.isArray(a.color.upper95)&&b<a.color.upper95.length&&(d.upper95=new f.AdaptiveFormatter(a.color.upper95),c.color["upper 95%"]=d.upper95.toString(a.color.upper95[b]))),f.Utils.isArray(a.size)&&b<a.size.length&&(d.size=new f.AdaptiveFormatter(a.size),c.size=d.size.toString(a.size[b])),c.index=b,c},renderSvg:function(a,b,c,d,e){var f=d.y.length;if(0!=f){for(var g,h,i=c.group(),j=e.dataToScreenX,k=e.dataToScreenY,l=b.width,m=b.height,n=0,o=d.size[0],p=.5*o,q=.5*p;n<f;n++){g=j(d.x[n]),h=k(d.y[n]),c1=g+p<0||g-p>l||h+p<0||h-p>m;var r=d.individualColors?d.upper95[n]:d.upper95,s=d.individualColors?d.lower95[n]:d.lower95;if(!c1)switch(d.bullEyeShape){case"box":i.rect(o,o).translate(g-p,h-p).fill(r).stroke({width:.5,color:"black"}),i.rect(p,p).translate(g-q,h-q).fill(s).stroke({width:.5,color:"black"});break;case"circle":i.circle(o).translate(g-p,h-p).fill(r).stroke({width:.5,color:"black"}),i.circle(p).translate(g-q,h-q).fill(s).stroke({width:.5,color:"black"});break;case"diamond":i.rect(o/Math.sqrt(2),o/Math.sqrt(2)).translate(g,h-p).fill(r).stroke({width:.5,color:"black"}).rotate(45),i.rect(p/Math.sqrt(2),p/Math.sqrt(2)).translate(g,h-q).fill(s).stroke({width:.5,color:"black"}).rotate(45);break;case"cross":var t=o/6,u=p/6;i.polyline([[-p,-t],[-t,-t],[-t,-p],[t,-p],[t,-t],[p,-t],[p,t],[t,t],[t,p],[-t,p],[-t,t],[-p,t],[-p,-t]]).translate(g,h).fill(r).stroke({width:.5,color:"black"}),i.polyline([[-q,-u],[-u,-u],[-u,-q],[u,-q],[u,-u],[q,-u],[q,u],[u,u],[u,q],[-u,q],[-u,u],[-q,u],[-q,-u]]).translate(g,h).fill(s).stroke({width:.5,color:"black"});break;case"triangle":var v=Math.sqrt(3)/6*o,w=Math.sqrt(3)/6*p;i.polyline([[-p,v],[0,2*-v],[p,v],[-p,v]]).translate(g,h).fill(r).stroke({width:.5,color:"black"}),i.polyline([[-q,w],[0,2*-w],[q,w],[-q,w]]).translate(g,h).fill(s).stroke({width:.5,color:"black"})}}i.clipWith(i.rect(l,m))}}},f.BoxWhisker={prepare:function(a){if(void 0==a.y.median||null==a.y.median)throw"The mandatory property 'y' is undefined or null";if(!f.Utils.isArray(a.y.median))throw"The property 'y' must be an array of numbers";var b=a.y.median.length,c=new Int8Array(b);if(f.Utils.maskNaN(c,a.y.median),void 0==a.x)a.x=f.Utils.range(0,b-1);else{if(!f.Utils.isArray(a.x))throw"The property 'x' must be an array of numbers";if(a.x.length!=b)throw"Length of the array which is a value of the property 'x' differs from lenght of 'y'";f.Utils.maskNaN(c,a.x)}void 0!=a.border&&"none"!=a.border||(a.border=null),void 0==a.color&&(a.color=f.Markers.defaults.color);var d=new Array(b);if(void 0==a.size&&(a.size=f.Markers.defaults.size),f.Utils.isArray(a.y.lower95)&&f.Utils.isArray(a.y.upper95)){if(a.y.lower95.length!=b&&a.y.upper95.length!=b)throw"Length of the array 'y' is different than length of the array 'y'";if(b>0&&"number"==typeof a.y.lower95[0]&&"number"==typeof a.y.upper95[0]){for(var e=[],g=[],h=0;h<b;h++){var i=a.y.upper95[h],j=a.y.lower95[h];i!=i||j!=j?c[h]=1:(e[h]=a.y.upper95[h],g[h]=a.y.lower95[h])}a.upper95=e,a.lower95=g}}if(f.Utils.isArray(a.y.lower68)&&f.Utils.isArray(a.y.upper68)){if(a.y.lower68.length!=b&&a.y.upper68.length!=b)throw"Length of the array 'y' is different than length of the array 'y'";if(b>0&&"number"==typeof a.y.lower68[0]&&"number"==typeof a.y.upper68[0]){for(var k=[],l=[],h=0;h<b;h++){var m=a.y.upper68[h],n=a.y.lower68[h];m!=m||n!=n?c[h]=1:(k[h]=a.y.upper68[h],l[h]=a.y.lower68[h])}a.upper68=k,a.lower68=l}}for(var h=0;h<b;h++)d[h]=a.size;a.sizeMax=a.size,a.size=d;for(var o=0,h=0;h<b;h++)1===c[h]&&o++;if(o>0){o=b-o,a.x=f.Utils.applyMask(c,a.x,o),a.y=f.Utils.applyMask(c,a.y.median,o),a.size=f.Utils.applyMask(c,a.size,o),a.upper95=f.Utils.applyMask(c,a.upper95,o),a.lower95=f.Utils.applyMask(c,a.lower95,o),a.upper68=f.Utils.applyMask(c,a.upper68,o),a.lower68=f.Utils.applyMask(c,a.lower68,o);for(var p=Array(o),h=0,q=0;h<b;h++)0===c[h]&&(p[q++]=h);a.indices=p}else a.y=a.y.median,a.indices=f.Utils.range(0,b-1)},preRender:function(a,b,c,d,e){return e.fillStyle=a.color,null!=a.border&&(e.strokeStyle=a.border),a},draw:function(a,b,c,d,e){var f=a.size,g=f/2,h=d.dataToScreenX(a.x),i=d.dataToScreenY(a.upper68),j=d.dataToScreenY(a.lower68),k=d.dataToScreenY(a.upper95),l=d.dataToScreenY(a.lower95),m=d.dataToScreenY(a.y);e.beginPath(),e.strokeStyle=void 0===a.border?"black":a.border,a.color&&e.fillRect(h-g,j,f,i-j),e.strokeRect(h-g,j,f,i-j),e.moveTo(h-g,k),e.lineTo(h+g,k),e.moveTo(h,k),e.lineTo(h,i),e.moveTo(h,j),e.lineTo(h,l),e.moveTo(h-g,l),e.lineTo(h+g,l),e.moveTo(h-g,m),e.lineTo(h+g,m),e.stroke(),void 0!==a.y_min&&(e.beginPath(),e.arc(h,d.dataToScreenY(a.y_min),g/2,0,2*Math.PI),e.stroke()),void 0!==a.y_max&&(e.beginPath(),e.arc(h,d.dataToScreenY(a.y_max),g/2,0,2*Math.PI),e.stroke())},hitTest:function(a,b,c,d){var e=b.dataToScreenX(a.x),f=b.dataToScreenY(void 0===a.y_min?a.lower95:a.y_min),g=b.dataToScreenY(void 0===a.y_max?a.upper95:a.y_max),h=c.x>e-a.size/2&&c.x<e+a.size/2&&c.y>g&&c.y<f;return h},getBoundingBox:function(a){var b=a.size,c=a.lower95?a.lower95:a.lower68?a.lower68:a.y,d=a.upper95?a.upper95:a.upper68?a.upper68:a.y;return{x:a.x-b/2,y:c,width:b,height:Math.abs(d-c)}},getPadding:function(a){var b=0;return{left:b,right:b,top:b,bottom:b}},getLegend:function(b,c,d){var e=d.content,g=14;document.defaultView&&document.defaultView.getComputedStyle&&(g=parseFloat(document.defaultView.getComputedStyle(e[0],null).getPropertyValue("font-size"))),(isNaN(g)||0==g)&&(g=14);var h=d.thumbnail,i=1.5*g,j=i/2+1,k=i/2+1;h[0].width=h[0].height=i+2;var l,m,n,o,p,q,r,s,t,u,v,w,x,y=(h[0].style,h.get(0).getContext("2d")),z=0,A=0,B=function(){if(r=i,b.sizePalette){var d=c("size");if(0==A){t=a("<div style='width: 170px; margin-top: 5px; margin-bottom: 5px'></div>").appendTo(e),w=a("<div class='idd-legend-item-property'></div>").text(d).appendTo(t),u=t[0].style;var g=a("<div style='width: 170px;'></div>").appendTo(t);v=new f.SizePaletteViewer(g),A=2}else w.text(d);v.palette=f.SizePalette.Create(b.sizePalette)}s=r/2},C=function(){if(n=!1,b.individualColors&&b.colorPalette){var d=c("color");if(0==z){o=a("<div style='width: 170px; margin-top: 5px; margin-bottom: 5px'></div>").appendTo(e),x=a("<div class='idd-legend-item-property'></div>").text(d).appendTo(o),p=o[0].style;var g=a("<div style='width: 170px;'></div>").appendTo(o);q=new f.ColorPaletteViewer(g),z=2}else x.text(d);q.palette=b.colorPalette,1==z&&(p.display="block",z=2)}else 2==z&&(p.display="none",z=1);b.individualColors?(m="#000000",l="#ffffff",n=!0):(l=b.color,m=l,null!=b.border&&(n=!0,m=b.border))},D=function(){var a="string"==typeof b.color?b.color:"gray",c="string"==typeof b.border?b.border:"gray",d="none"!==c;y.strokeStyle=void 0!==c?c:"black",y.fillStyle=void 0!==a?a:"black";var e=.5*r,f=.5*e;y.clearRect(0,0,r,r),y.fillRect(j-e,k-f,r,e),d&&y.strokeRect(j-e,k-f,r,e),y.beginPath(),y.moveTo(j-e,k+e),y.lineTo(j+e,k+e),y.moveTo(j-e,k-e),y.lineTo(j+e,k-e),y.moveTo(j,k+e),y.lineTo(j,k+f),y.moveTo(j,k-e),y.lineTo(j,k-f),y.closePath(),d&&y.stroke(),d&&(y.beginPath(),y.moveTo(j-e,k),y.lineTo(j+e,k),y.stroke())};C(),B(),D()},getTooltipData:function(a,b){var c={},d={};return f.Utils.isArray(a.x)&&b<a.x.length&&(d.x=new f.AdaptiveFormatter(a.x),c.x=d.x.toString(a.x[b])),a.y&&(c.y={},f.Utils.isArray(a.y.median)&&b<a.y.median.length&&(d.median=new f.AdaptiveFormatter(a.y.median),c.y.median=d.median.toString(a.y.median[b])),f.Utils.isArray(a.y.lower95)&&b<a.y.lower95.length&&(d.lower95=new f.AdaptiveFormatter(a.y.lower95),c.y["lower 95%"]=d.lower95.toString(a.y.lower95[b])),f.Utils.isArray(a.y.upper95)&&b<a.y.upper95.length&&(d.upper95=new f.AdaptiveFormatter(a.y.upper95),c.y["upper 95%"]=d.upper95.toString(a.y.upper95[b])),f.Utils.isArray(a.y.lower68)&&b<a.y.lower68.length&&(d.lower68=new f.AdaptiveFormatter(a.y.lower68),c.y["lower 68%"]=d.lower68.toString(a.y.lower68[b])),f.Utils.isArray(a.y.upper68)&&b<a.y.upper68.length&&(d.upper68=new f.AdaptiveFormatter(a.y.upper68),c.y["upper 68%"]=d.upper68.toString(a.y.upper68[b]))),f.Utils.isArray(a.size)&&b<a.size.length&&(d.size=new f.AdaptiveFormatter(a.size),c.size=d.size.toString(a.size[b])),c.index=b,c},renderSvg:function(a,b,c,d,e){var f=d.y.length;if(0!=f){for(var g,h,i,j,k,l,m,n=c.group(),o=e.dataToScreenX,p=e.dataToScreenY,q=b.width,r=b.height,s=0,t=d.size[0],u=t/2,v=d.color,w=null==d.border?"none":d.border;s<f;s++)g=o(d.x[s]),h=p(d.y[s]),i=p(d.upper68[s]),j=p(d.lower68[s]),k=p(d.upper95[s]),l=p(d.lower95[s]),m=p(d.y[s]),c1=g<0||g>q||h<0||h>r,c1||(n.rect(t,Math.abs(i-j)).translate(g-u,i).fill(v).stroke(w),n.polyline([[g-u,k],[g+u,k]]).stroke(w),n.polyline([[g,k],[g,i]]).stroke(w),n.polyline([[g,j],[g,l]]).stroke(w),n.polyline([[g-u,l],[g+u,l]]).stroke(w),n.polyline([[g-u,m],[g+u,m]]).stroke(w));n.clipWith(n.rect(q,r))}}},f.Bars={prepare:function(a){if(void 0==a.y||null==a.y)throw"The mandatory property 'y' is undefined or null";if(!f.Utils.isArray(a.y))throw"The property 'y' must be an array of numbers";var b=a.y.length,c=new Int8Array(b);if(f.Utils.maskNaN(c,a.y),void 0==a.x)a.x=f.Utils.range(0,b-1);else{if(!f.Utils.isArray(a.x))throw"The property 'x' must be an array of numbers";if(a.x.length!=b)throw"Length of the array which is a value of the property 'x' differs from lenght of 'y'";f.Utils.maskNaN(c,a.x)}if(void 0!=a.border&&"none"!=a.border||(a.border=null),void 0!=a.shadow&&"none"!=a.shadow||(a.shadow=null),void 0==a.color&&(a.color=f.Markers.defaults.color),f.Utils.isArray(a.color)){if(a.color.length!=b)throw"Length of the array 'color' is different than length of the array 'y'";if(b>0&&"string"!=typeof a.color[0]){var d=a.colorPalette;if(void 0==d&&(d=f.Markers.defaults.colorPalette),"string"==typeof d&&(d=new f.ColorPalette.parse(d)),void 0!=d&&d.isNormalized){var e=f.Utils.getMinMax(a.color);e=f.Utils.makeNonEqual(e),d=d.absolute(e.min,e.max)}a.colorPalette=d;for(var g=new Array(b),h=0;h<b;h++){var i=a.color[h];if(i!=i)c[h]=1;else{var j=d.getRgba(i);g[h]="rgba("+j.r+","+j.g+","+j.b+","+j.a+")"}}a.color=g}a.individualColors=!0}else a.individualColors=!1;for(var k=0,h=0;h<b;h++)1===c[h]&&k++;if(k>0){k=b-k,a.x=f.Utils.applyMask(c,a.x,k),a.y=f.Utils.applyMask(c,a.y,k),a.individualColors&&(a.color=f.Utils.applyMask(c,a.color,k));for(var l=Array(k),h=0,m=0;h<b;h++)0===c[h]&&(l[m++]=h);a.indices=l}else a.indices=f.Utils.range(0,b-1)},draw:function(a,b,c,d,e){var f=.5*a.barWidth,g=d.dataToScreenX(a.x-f),h=d.dataToScreenX(a.x+f);if(!(g>c.width||h<0)){var i=d.dataToScreenY(a.y),j=d.dataToScreenY(0);if(i>j){var k=j;j=i,i=k}i>c.height||j<0||(a.shadow&&(e.fillStyle=a.shadow,e.fillRect(g+2,i+2,h-g,j-i)),e.fillStyle=a.color,e.fillRect(g,i,h-g,j-i),a.border&&(e.strokeStyle=a.border,e.strokeRect(g,i,h-g,j-i)))}},getBoundingBox:function(a){var b=a.barWidth,c=a.x-b/2,d=Math.min(0,a.y);return{x:c,y:d,width:b,height:Math.abs(a.y)}},hitTest:function(a,b,c,d){var e=a.barWidth,f=a.x-e/2,g=Math.min(0,a.y);return!(d.x<f||d.x>f+e)&&!(d.y<g||d.y>g+Math.abs(a.y))},getLegend:function(b,c,d){var e=d.content,g=14;document.defaultView&&document.defaultView.getComputedStyle&&(g=parseFloat(document.defaultView.getComputedStyle(e[0],null).getPropertyValue("font-size"))),(isNaN(g)||0==g)&&(g=14);var h=d.thumbnail,i=1.5*g,j=i/3-.5,k=i/3*2,l=i,m=i/2,n=0,o=i/3,p=1;h[0].width=h[0].height=i+2;var q,r,s,t,u,v,w,x,y,z=(h[0].style,h.get(0).getContext("2d")),A=0,B=function(){if(s=!1,u=!1,b.individualColors&&b.colorPalette){var d=c("color");if(0==A){v=a("<div style='width: 170px; margin-top: 5px; margin-bottom: 5px'></div>").appendTo(e),y=a("<div class='idd-legend-item-property'></div>").text(d).appendTo(v),w=v[0].style;var g=a("<div style='width: 170px;'></div>").appendTo(v);x=new f.ColorPaletteViewer(g),A=2}else y.text(d);x.palette=b.colorPalette,1==A&&(w.display="block",A=2)}else 2==A&&(w.display="none",A=1);b.individualColors?(r="#000000",q="#ffffff",s=!0,t="grey",u=!0):(q=b.color,r=q,t="none",null!=b.border&&(s=!0,r=b.border),null!=b.shadow&&(u=!0,t=b.shadow))},C=function(){var a="string"==typeof b.color?b.color:"lightgray",c="string"==typeof b.border?b.border:"gray",d="string"==typeof b.shadow?b.shadow:"gray",e="none"!==c;z.clearRect(0,0,i,i),d&&(z.fillStyle=d,z.fillRect(0+p,m+p,j,i-m),j+=1,z.fillRect(j+p,n+p,k-j,i-n),k+=1,z.fillRect(k+p,o+p,l-k,i-o)),z.strokeStyle=void 0!==c?c:"black",z.fillStyle=void 0!==a?a:"black",z.fillStyle=a,z.fillRect(0,m,j,i-m),z.fillRect(j,n,k-j,i-n),z.fillRect(k,o,l-k,i-o),e&&(z.strokeStyle=c,z.strokeRect(0,m,j,i-m),z.strokeRect(j,n,k-j,i-n),z.strokeRect(k,o,l-k,i-o))};B(),C()},renderSvg:function(a,b,c,d,e){var f=d.y.length;if(0!=f){for(var g,h,i,j,k,l=c.group(),m=e.dataToScreenX,n=e.dataToScreenY,o=b.width,p=b.height,q=0,r=d.barWidth,s=r/2,t=null==d.border?"none":d.border,u=null==d.shadow?"none":d.shadow;q<f;q++){if(g=m(d.x[q]-s),h=m(d.x[q]+s),i=n(d.y[q]),j=n(0),i>j){var v=j;j=i,i=v}k=d.individualColors?d.color[q]:d.color,c1=h<0||g>o||j<0||i>p,c1||(l.polyline([[g+2,j+2],[g+2,i+2],[h+2,i+2],[h+2,j+2],[g+2,j+2]]).fill(u),l.polyline([[g,j],[g,i],[h,i],[h,j],[g,j]]).fill(k).stroke({width:1,color:t}))}l.clipWith(l.rect(o,p))}},buildSvgLegendElements:function(a,b,c,d){var e=b.group(),g=b.group(),h=12,i=1.5*h,j=i/3-.5,k=i/3*2,l=i,m=i/2,n=0,o=i/3,p=1;c.individualColors?(border="#000000",color="lightgrey",shadow="grey"):(color=c.color,border="none",null!=c.border&&(border=c.border),null!=c.shadow&&(shadow=c.shadow)),e.polyline([[p,i+p],[p,m+p],[j+p,m+p],[j+p,i+p],[p,i+p]]).fill(shadow),e.polyline([[0,i],[0,m],[j,m],[j,i],[0,i]]).fill(color).stroke({width:.2,color:border}),j+=1,e.polyline([[j+p,i+p],[j+p,n+p],[k+p,n+p],[k+p,i+p],[j+p,i+p]]).fill(shadow),e.polyline([[j,i],[j,n],[k,n],[k,i],[j,i]]).fill(color).stroke({width:.2,color:border}),k+=1,e.polyline([[k+p,i+p],[k+p,o+p],[l+p,o+p],[l+p,i+p],[k+p,i+p]]).fill(shadow),e.polyline([[k,i],[k,o],[l,o],[l,i],[k,i]]).fill(color).stroke({width:.2,color:border});var q=a.legendDiv.children[1],r=c.individualColors&&c.colorPalette,s=q&&a.legendDiv.children[1].children[0]&&a.legendDiv.children[1].children[0].children[0]?window.getComputedStyle(a.legendDiv.children[1].children[0].children[0],null):void 0,h=s?parseFloat(s.getPropertyValue("font-size")):void 0,t=s?s.getPropertyValue("font-family"):void 0,u=s?s.getPropertyValue("font-weight"):void 0;if(r){var v=d("color");g.text(v).font({family:t,size:h,weight:u});var w=b.group(),x=a.width,y=20;f.SvgColorPaletteViewer(w,c.colorPalette,a.legendDiv.children[1].children[0].children[1],{width:x,height:y}),w.translate(5,50),shiftsizePalette=50+y,a.height+=50+y}return b.front(),{thumbnail:e,content:g}}},f.Markers.shapes.boxwhisker=f.BoxWhisker,f.Markers.shapes.petals=f.Petal,f.Markers.shapes.bulleye=f.BullEye,f.Markers.shapes.bars=f.Bars,f.Area=function(b,c){var d=this,e="rgba(0,0,0,0.2)",g=f.Utils.getDataSourceFunction(b,f.readCsv),h=g(b);this.base=f.CanvasPlot,this.base(b,c);var i=[],j=[],k=[],l=e;h&&(l="undefined"!=typeof h.fill?h.fill:e),this.draw=function(a){var b=a.y1;if(!b)throw"Data series y1 is undefined";var c=b.length,d=a.y2;if(!d)throw"Data series y2 is undefined";if(d.length!==c)throw"Data series y1 and y2 have different lengths";var g=a.x;if(g||(g=f.Utils.range(0,c-1)),g.length!==c)throw"Data series x and y1, y2 have different lengths";j=b,k=d,i=g,l="undefined"!=typeof a.fill?a.fill:e,this.invalidateLocalBounds(),this.requestNextFrameOrUpdate(),this.fireAppearanceChanged()},this.computeLocalBounds=function(){var a=this.xDataTransform&&this.xDataTransform.dataToPlot,b=this.yDataTransform&&this.yDataTransform.dataToPlot,c=f.Utils.getBoundingBoxForArrays(i,j,a,b),d=f.Utils.getBoundingBoxForArrays(i,k,a,b);return f.Utils.unionRects(c,d)},this.getLocalPadding=function(){return{left:0,right:0,top:0,bottom:0}},this.renderCore=function(a,b){f.Area.prototype.renderCore.call(this,a,b);var c=d.getContext(!0);f.Area.render.call(this,i,j,k,l,a,b,c)};this.onDataTransformChanged=function(a){this.invalidateLocalBounds(),f.Area.prototype.onDataTransformChanged.call(this,a)},this.getLegend=function(){var b=this,c=a("<canvas></canvas>");c[0].width=40,c[0].height=40;var d=c.get(0).getContext("2d");d.globalAlpha=.5,d.strokeStyle=l,d.fillStyle=l,d.beginPath(),d.moveTo(0,0),d.lineTo(0,10),d.lineTo(30,40),d.lineTo(40,40),d.lineTo(40,30),d.lineTo(10,0),d.lineTo(0,0),d.fill(),d.stroke(),d.closePath();var e=a("<span></span>"),f=function(){e.text(b.name)};f(),this.host.bind("appearanceChanged",function(a,b){b&&"name"!=b||f(),d.clearRect(0,0,c[0].width,c[0].height),d.strokeStyle=l,d.fillStyle=l,d.beginPath(),d.moveTo(0,0),d.lineTo(0,10),d.lineTo(30,40),d.lineTo(40,40),d.lineTo(40,30),d.lineTo(10,0),d.lineTo(0,0),d.fill(),d.stroke(),d.closePath()});var b=this,g=function(){b.host.unbind("appearanceChanged")};return{name:e,legend:{thumbnail:c,content:void 0},onLegendRemove:g}},h&&h.x&&h.y1&&h.y2&&this.draw(h),this.renderCoreSvg=function(a,b,c){f.Area.renderSvg.call(this,a,b,c,i,j,k,l)},this.buildSvgLegend=function(a,b){var c=this;a.height=30,b.add(b.rect(a.width,a.height).fill("white").opacity(.5)),b.add(b.polyline([[0,0],[0,4.5],[13.5,18],[18,18],[18,13.5],[4.5,0],[0,0]]).fill(l).opacity(.5).translate(5,5));var d=window.getComputedStyle(a.legendDiv.children[0].children[1],null),e=parseFloat(d.getPropertyValue("font-size")),f=d.getPropertyValue("font-family"),g=d?d.getPropertyValue("font-weight"):void 0;b.add(b.text(c.name).font({family:f,size:e,weight:g}).translate(40,0)),b.front()}},f.Area.prototype=new f.CanvasPlot,f.Area.render=function(a,b,c,d,e,f,g,h){if(void 0!==a&&void 0!=b&&void 0!=c){var i=b.length;if(0!=i){var j=this.getTransform(),k=j.dataToScreenX,l=j.dataToScreenY;f.width,f.height;g.globalAlpha=h,g.fillStyle=d;for(var m=[],n=void 0,o=0;o<i;o++)isNaN(a[o])||isNaN(b[o])||isNaN(c[o])?void 0===n?n=o:(m.push([n,o]),n=void 0):void 0===n?n=o:o===i-1&&(m.push([n,o]),n=void 0);for(var p=m.length,o=0;o<p;o++){g.beginPath();var q=m[o];g.moveTo(k(a[q[0]]),l(b[q[0]]));for(var r=q[0]+1;r<=q[1];r++)g.lineTo(k(a[r]),l(b[r]));for(var r=q[1];r>=q[0];r--)g.lineTo(k(a[r]),l(c[r]));g.fill()}}}},f.Area.renderSvg=function(a,b,c,d,e,f,g,h){if(void 0!==d&&void 0!=e&&void 0!=f){var i=e.length;if(0!=i){for(var j=this.getTransform(),k=j.dataToScreenX,l=j.dataToScreenY,m=c.group(),n=b.width,o=b.height,p=[],q=void 0,r=0;r<i;r++)isNaN(d[r])||isNaN(e[r])||isNaN(f[r])?void 0!==q&&(p.push([q,r-1]),q=void 0):void 0===q?q=r:r===i-1&&(p.push([q,r]),q=void 0);for(var s=[],t=p.length,r=0;r<t;r++){var u=p[r];s=[],s.push([k(d[u[0]]),l(e[u[0]])]);for(var v=u[0]+1;v<=u[1];v++)s.push([k(d[v]),l(e[v])]);for(var v=u[1];v>=u[0];v--)s.push([k(d[v]),l(f[v])]);s.push([k(d[u[0]]),l(e[u[0]])]),m.polyline(s).fill(g).opacity(h)}m.clipWith(m.rect(n,o))}}},f.heatmapBackgroundRenderer=void 0,f.Heatmap=function(b,c){var d=f.Utils.getDataSourceFunction(b,f.readCsv2d),e=d(b);if(e&&"undefined"!=typeof e.y&&"undefined"!=typeof e.values){var g=e.y,h=e.values,i=g.length,j=h.length;if(i>1&&j>0&&g[0]>g[1]){g.reverse();for(var k=0;k<i;k++)h[k].reverse()}}if(this.base=f.CanvasPlot,this.base(b,c),b){void 0==f.heatmapBackgroundRenderer&&(f.heatmapBackgroundRenderer=new f.SharedRenderWorker(function(){var a;if("undefined"==typeof f.heatmapBackgroundRendererCodeBase64||/PhantomJS/.test(window.navigator.userAgent)||f.Utils.getIEVersion()>0)a=f.HeatmapworkerPath?f.HeatmapworkerPath+"idd.heatmapworker.js":"idd.heatmapworker.js";else{var b=new Blob([window.atob(f.heatmapBackgroundRendererCodeBase64)],{type:"text/javascript"});a=window.URL.createObjectURL(b)}return a}(),function(a,b){a.onRenderTaskCompleted(b)}));var l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H=function(a){if(a)try{w="string"==typeof a?f.ColorPalette.parse(a):a,y=f.ColorPalette.toArray(w,512)}catch(b){window.console&&console.error("Failed to initialize the palette")}},I=function(a){u=Math.min(1,Math.max(0,a))},J=document.createElement("canvas");I(e&&"undefined"!=typeof e.opacity?parseFloat(e.opacity):1),H(e&&"undefined"!=typeof e.colorPalette?e.colorPalette:f.palettes.grayscale);var K,L=function(a){var b=a.length;if(!(b<1)){var c=a[0].length;if(!(c<1)){var d,e;d=e=a[0][0];for(var f=0;f<b;f++)for(var g=a[f],h=0;h<c;h++){var i=g[h];i==i&&((i>e||isNaN(e))&&(e=i),(i<d||isNaN(d))&&(d=i))}return{min:d,max:e}}}},M=this,N=function(a,b,c,d){if(!a||!b||!c)return{};if(!a.length||!b.length||c.v&&!c.v.length||c.m&&(!c.m.length||!c.lb68.length||!c.ub68.length))return{};a=Array.prototype.slice.call(a),b=Array.prototype.slice.call(b),c.v?c.v=Array.prototype.slice.call(c.v):c.m&&(c.m=Array.prototype.slice.call(c.m),c.lb68=Array.prototype.slice.call(c.lb68),c.ub68=Array.prototype.slice.call(c.ub68)),!c.v||a.length===b.length&&a.length===c.v.length&&b.length===c.v.length?!c.m||a.length===b.length&&a.length===c.m.length&&b.length===c.m.length&&c.m.length===c.lb68.length&&c.m.length===c.ub68.length||(a.length=b.length=c.m.length=c.lb68.length=c.ub68.length=Math.min(a.length,b.length,c.m.length,c.lb68.length,c.ub68.length)):a.length=b.length=c.v.length=Math.min(a.length,b.length,c.v.length);var e,f=a.map(function(a,b){return{v:a,i:b}}),g=b.map(function(a,b){return{v:a,i:b}}),h=f.sort(function(a,b){return a.v<b.v?-1:a.v>b.v?1:0}),i=g.sort(function(a,b){return a.v<b.v?-1:a.v>b.v?1:0}),j=h.filter(function(a,b){return!b||a.v!=h[b-1].v}).map(function(a){return a.v}),k=i.filter(function(a,b){return!b||a.v!=i[b-1].v}).map(function(a){return a.v}),l=[],m=[];e=0,h.forEach(function(a,b){return l[a.i]=b?a.v!=h[b-1].v?++e:e:0}),e=0,i.forEach(function(a,b){return m[a.i]=b?a.v!=i[b-1].v?++e:e:0});var n,o,p,q,r=function(a,b){for(var c=[],d=0;d<a;++d){c[d]=[];for(var e=0;e<b;++e)c[d][e]=NaN}return c};if(c.v)for(n=r(j.length,k.length),e=0;e<c.v.length;++e)n[l[e]][m[e]]=c.v[e];else for(o=r(j.length,k.length),p=r(j.length,k.length),q=r(j.length,k.length),e=0;e<c.m.length;++e)o[l[e]][m[e]]=c.m[e],p[l[e]][m[e]]=c.lb68[e],q[l[e]][m[e]]=c.ub68[e];if(d){if(j.length>=2){var s=[];s.push(j[0]-(j[1]-j[0])/2);var o;for(o=1;o<j.length;o++)s.push(j[o]-(j[o]-j[o-1])/2);s.push(j[j.length-1]+(j[j.length-1]-j[j.length-2])/2),j=s}if(k.length>=2){var t=[];t.push(k[0]-(k[1]-k[0])/2);var u;for(u=1;u<k.length;u++)t.push(k[u]-(k[u]-k[u-1])/2);t.push(k[k.length-1]+(k[k.length-1]-k[k.length-2])/2),k=t}}return{x:j,y:k,values:n,m:o,l68:p,u68:q}};if(this.onRenderTaskCompleted=function(a){K=a,J.width===K.width&&J.height===K.height||(J.width=K.width,J.height=K.height);var b=J.getContext("2d");b.putImageData(K.image,0,0),M.requestNextFrame()},this.draw=function(b,c){var d=b.values;if(!d)throw"Data series f is undefined";var e=void 0!==d.median&&!f.Utils.isArray(d.median[0])||!f.Utils.isArray(d[0]),g=b.x,h=b.y;if(void 0==A&&void 0==z&&(A=b.interval),z=b.interval,d.median){if(void 0==B){var i=a("<div></div>").attr("data-idd-name","heatmap__nav_").appendTo(this.host);B=new f.Heatmap(i,this.master),B.getLegend=function(){},this.addChild(B),B.getTooltip=function(a,b,c,d){}}if(e){var j=N(g,h,{v:void 0,m:d.median,lb68:d.lower68,ub68:d.upper68},"discrete"===b.treatAs);n=j.x,m=j.y,o=j.m,r=j.m,q=j.l68,p=j.u68,B.x=j.x,B.y=j.y,B.f_median=j.m,B.f_l68=j.l68,B.f_u68=j.u68}else n=g,m=h,o=d.median,r=d.median,q=d.lower68,p=d.upper68,B.x=j.x,B.y=j.y,B.f_median=d.median68,B.f_l68=d.lower68,B.f_u68=d.upper68;z&&R()}else if(B&&B.remove(),B=void 0,e){var j=N(g,h,{v:d},"discrete"===b.treatAs);n=j.x,m=j.y,o=j.values}else o=d,n=g,m=h;C=void 0,D=void 0,E=void 0,F=void 0;var k=r?r.length:o.length,l=r?r[0].length:o[0].length;if(n){if(n.length!=k&&n.length!=k+1)throw"Data series x must have length equal or one more than length of data series f by first dimension"}else n=f.Utils.range(0,k);if(m){if(m.length!=l&&m.length!=l+1)throw"Data series y must have length equal or one more than length of data series f by second dimension"}else m=f.Utils.range(0,l);if(n.length==k){if(m.length!=l)throw"Data series y must have length equal to length of data series f by second dimension";v="gradient"}else{if(m.length!=l+1)throw"Data series y must have length equal to one more than length of data series f by second dimension";v="matrix"}if(n.length<2)throw"Data series x must have at least 2 elements by each dimension";if(m.length<2)throw"Data series y must have at least 2 elements by each dimension";if(b&&"undefined"!=typeof b.opacity&&I(parseFloat(b.opacity)),b&&"undefined"!=typeof b.colorPalette&&H(b.colorPalette),w.isNormalized){var u=L(o);s=u.min,t=u.max}x=!0;var y=this.invalidateLocalBounds(),G=this.getLocalBounds();f.Utils.equalRect(y,G)?this.requestNextFrame():this.requestNextFrameOrUpdate(),this.setTitles(c,!0),this.fireAppearanceChanged()},this.computeLocalBounds=function(){var a;if(n&&m){var b,c,d,e,f,g=n.length,h=m.length;for(f=0;f<g&&(b=n[f],b!=b);f++);for(f=g;--f>=0&&(c=n[f],c!=c););for(f=0;f<h&&(d=m[f],d!=d);f++);for(f=h;--f>=0&&(e=m[f],e!=e););var i=this.xDataTransform&&this.xDataTransform.dataToPlot,j=this.yDataTransform&&this.yDataTransform.dataToPlot;
i&&(b=i(b),c=i(c)),j&&(d=j(d),e=j(e)),a={x:Math.min(b,c),y:Math.min(d,e),width:Math.abs(c-b),height:Math.abs(e-d)}}return a},"undefined"==typeof Modernizr||!b||Modernizr.webworkers&&Modernizr.postmessage){var O=void 0,P=void 0;this.renderCore=function(a,b){f.Heatmap.prototype.renderCore.call(this,a,b);var d=this.getContext(!0);if(void 0!=n&&void 0!=m&&void 0!=o){var e=this.coordinateTransform,g=e.plotToScreenX,h=e.plotToScreenY,i=this.getLocalBounds(),j=f.Utils.intersect(i,a);if(j){var k=!0;if(void 0!==c.mapControl){var p=i.x,q=i.x+i.width/2,r=i.x+i.width;if(void 0===O){var v=120,z={fillColor:new Microsoft.Maps.Color(v,v,v,v),strokeColor:new Microsoft.Maps.Color(v,v,v,v),strokeThickness:0};O=new Microsoft.Maps.Polygon([new Microsoft.Maps.Location(f.mercatorTransform.plotToData(i.y),p),new Microsoft.Maps.Location(f.mercatorTransform.plotToData(i.y),q),new Microsoft.Maps.Location(f.mercatorTransform.plotToData(i.y+i.height),q),new Microsoft.Maps.Location(f.mercatorTransform.plotToData(i.y+i.height),p)],z),P=new Microsoft.Maps.Polygon([new Microsoft.Maps.Location(f.mercatorTransform.plotToData(i.y),q),new Microsoft.Maps.Location(f.mercatorTransform.plotToData(i.y),r),new Microsoft.Maps.Location(f.mercatorTransform.plotToData(i.y+i.height),r),new Microsoft.Maps.Location(f.mercatorTransform.plotToData(i.y+i.height),q)],z),c.mapControl.entities.push(O),c.mapControl.entities.push(P)}x&&(O.setLocations([new Microsoft.Maps.Location(f.mercatorTransform.plotToData(i.y),p),new Microsoft.Maps.Location(f.mercatorTransform.plotToData(i.y),q),new Microsoft.Maps.Location(f.mercatorTransform.plotToData(i.y+i.height),q),new Microsoft.Maps.Location(f.mercatorTransform.plotToData(i.y+i.height),p)]),P.setLocations([new Microsoft.Maps.Location(f.mercatorTransform.plotToData(i.y),q),new Microsoft.Maps.Location(f.mercatorTransform.plotToData(i.y),r),new Microsoft.Maps.Location(f.mercatorTransform.plotToData(i.y+i.height),r),new Microsoft.Maps.Location(f.mercatorTransform.plotToData(i.y+i.height),q)])),k=!c.isInAnimation,O.setOptions({visible:c.isInAnimation}),P.setOptions({visible:c.isInAnimation})}if(k){var A={left:Math.floor(g(j.x)),width:Math.ceil(e.plotToScreenWidth(j.width)),top:Math.floor(h(j.y+j.height)),height:Math.ceil(e.plotToScreenHeight(j.height))},B=e.getScale(),C=e.getOffset();if(d.fillStyle="rgba(200,200,200,0.3)",d.fillRect(A.left,A.top,A.width,A.height),K){var D=f.Utils.intersect(K.plotRect,a);if(D){var E,F=g(K.plotRect.x),G=h(K.plotRect.y+K.plotRect.height);if(1!=u&&(E=d.globalAlpha,d.globalAlpha=u),B.x!=K.scaleX||B.y!=K.scaleY){var H=B.x/K.scaleX,I=B.y/K.scaleY;d.drawImage(J,0,0,K.image.width,K.image.height,F,G,H*K.image.width,I*K.image.height)}else d.drawImage(J,F,G);1!=u&&(d.globalAlpha=E)}}if(x||!this.master.isInAnimation&&(!K||K.scaleX!=B.x||K.scaleY!=B.y||!f.Utils.includes(K.plotRect,j))){l&&l.width===A.width&&l.height===A.height||(l=d.createImageData(A.width,A.height));var L={image:l,width:l.width,height:l.height,x:n,y:m,f:o,fmin:s,fmax:t,plotRect:j,scaleX:B.x,scaleY:B.y,offsetX:C.x-A.left,offsetY:C.y-A.top,palette:{isNormalized:w.isNormalized,range:w.range,points:w.points,colors:y},xDataTransform:this.xDataTransform&&this.xDataTransform.type,yDataTransform:this.yDataTransform&&this.yDataTransform.type};f.heatmapBackgroundRenderer.enqueue(L,this),x=!1}}}}},this.renderCoreSvg=function(a,b,c){var d=c.group();if(void 0!=n&&void 0!=m&&void 0!=o){var e=(b.width,b.height,this.coordinateTransform),g=e.plotToScreenX,h=e.plotToScreenY,i=this.getLocalBounds(),j=f.Utils.intersect(i,a);if(j){var k={left:Math.floor(g(j.x)),width:Math.ceil(e.plotToScreenWidth(j.width)),top:Math.floor(h(j.y+j.height)),height:Math.ceil(e.plotToScreenHeight(j.height))},p=J.toDataURL("image/png"),q=d.image(p,l.width,l.height).opacity(u);q.clipWith(d.rect(k.width,k.height)),d.translate(k.left,k.top)}}},this.onIsRenderedChanged=function(){this.isRendered||f.heatmapBackgroundRenderer.cancelPending(this)},this.onDataTransformChanged=function(a){this.invalidateLocalBounds(),f.Heatmap.prototype.onDataTransformChanged.call(this,a)};var Q=function(a,b){var c=n.length,d=m.length;if(0!=c&&0!=d&&!(a<n[0]||b<m[0]||a>n[c-1]||b>m[d-1])){var e;for(e=1;e<c;e++)if(a<=n[e]){if(isNaN(n[e-1]))return NaN;break}var f;for(f=1;f<d;f++)if(b<=m[f]){if(isNaN(m[f-1]))return NaN;break}return e>=c||f>=d?NaN:{iLeft:e-1,jBottom:f-1}}};this.getValue=function(a,b,c){var d=n.length,e=m.length;if(0==d||0==e)return null;var f=Q(a,b);if(void 0==f)return null;if(f!=f)return"<div>"+(this.name||"heatmap")+": (unknown value)</div>";var g;if("gradient"===v){var h,i,j,k;if(i=c[f.iLeft][f.jBottom+1],h=c[f.iLeft][f.jBottom],j=c[f.iLeft+1][f.jBottom+1],k=c[f.iLeft+1][f.jBottom],isNaN(i)||isNaN(h)||isNaN(j)||isNaN(k))g=NaN;else{var l=m[f.jBottom],o=m[f.jBottom+1],p=(i-h)/(o-l),q=(j-k)/(o-l),r=p*(b-l)+h,s=q*(b-l)+k,t=n[f.iLeft],u=n[f.iLeft+1],w=(s-r)/(u-t);g=w*(a-t)+r}}else g=c[f.iLeft][f.jBottom];return g};var R=function(){for(var a=B.f_median,b=new Array(a.length),c=0;c<a.length;c++){var d=a[c];b[c]=new Array(d.length);for(var e=0;e<d.length;e++)b[c][e]=B.f_l68[c][e]<z.max&&B.f_u68[c][e]>z.min?0:1}B.draw({x:B.x,y:B.y,values:b,opacity:.5,colorPalette:f.ColorPalette.parse("0=#00000000=#00000080=1")}),B.isVisible=!0};this.getTooltip=function(b,c,d,e,g){if(void 0!==o){var h=this,i={x:b,y:c};if(void 0===p||void 0===q||void 0===r){var j=L(o);C=f.AdaptiveFormatter(j.min,j.max);var k=a("<div></div>");a("<div></div>").addClass("idd-tooltip-name").text(this.name||"heatmap").appendTo(k);var l=this.getValue(i.x,i.y,o,v);if(null==l)return;var m=this.getTitle("values");return a("<div>"+m+": "+C.toString(l)+"</div>").appendTo(k),k}var j=L(r);D=f.AdaptiveFormatter(j.min,j.max),j=L(q),E=f.AdaptiveFormatter(j.min,j.max),j=L(p),F=f.AdaptiveFormatter(j.min,j.max);var k=a("<div></div>");a("<div></div>").addClass("idd-tooltip-name").text(this.name||"heatmap").appendTo(k);var n=this.getValue(i.x,i.y,q),s=this.getValue(i.x,i.y,p),t=this.getValue(i.x,i.y,r);if(null!=n&&null!=s&&null!=t){var m=this.getTitle("values"),u=a("<div></div>").addClass("idd-tooltip-compositevalue");u.append(a("<div>median: "+D.toString(t)+"</div>")),u.append(a("<div>lower 68%: "+E.toString(n)+"</div>")),u.append(a("<div>upper 68%: "+F.toString(s)+"</div>"));var w=a("<div></div>");w.append(a("<div>"+m+":</div>")).append(u),w.appendTo(k);var x=a("<div></div>").css("display","inline-block").appendTo(k),y=a("<div></div>").addClass("checkButton").appendTo(x);return z&&(g?z!=A?(z={min:n,max:s},a(".checkButton").removeClass("checkButton-checked"),y.addClass("checkButton-checked"),this.fireAppearanceChanged("interval")):a(".checkButton").removeClass("checkButton-checked"):(a(".checkButton").removeClass("checkButton-checked"),y.addClass("checkButton-checked")),R()),y.click(function(){y.hasClass("checkButton-checked")?(y.removeClass("checkButton-checked"),A?(z=A,R()):(z=void 0,B.isVisible=!1)):(a(".checkButton").removeClass("checkButton-checked"),y.addClass("checkButton-checked"),z={min:n,max:s},R()),h.fireAppearanceChanged("interval")}),a(a("<span style='margin-left:3px;'>highlight similar</span>")).appendTo(x),k}}},Object.defineProperty(this,"palette",{get:function(){return w},set:function(a){if(a!=w){if(!a)throw"Heatmap palette is undefined";if(w&&a.isNormalized&&!w.isNormalized&&o){var b=L(o);s=b.min,t=b.max}H(a),K=void 0,this.fireAppearanceChanged("palette"),this.requestNextFrame()}},configurable:!1}),Object.defineProperty(this,"opacity",{get:function(){return u},set:function(a){if(!a)throw"Heatmap opacity is undefined";a!=u&&(I(a),this.fireAppearanceChanged("opacity"),this.requestNextFrame())},configurable:!1}),Object.defineProperty(this,"mode",{get:function(){return v},configurable:!1}),this.getLegend=function(){var b=a("<canvas></canvas>"),c=a("<div></div>"),d=this,e=a("<span></span>"),g=function(){e.text(d.name)};g();var h,i,j,k,l,m=0,n=function(){k=d.getTitle("values"),0==m?(i=a("<div class='idd-legend-item-palette'></div>").appendTo(c),l=a("<div class='idd-legend-item-property'></div>").text(k).appendTo(i),j=a("<div style='width: 170px; margin-top: 5px; margin-bottom: 5px;'></div>").appendTo(i),h=new f.ColorPaletteViewer(j,w),m=2):l.text(k),w&&w.isNormalized&&(h.dataRange={min:s,max:t})};n();var o,p=function(){void 0==z&&o?o.empty():z&&(G=f.AdaptiveFormatter(z.min,z.max),o?o.text("highlighted interval: "+G.toString(z.min)+", "+G.toString(z.max)):o=a("<div style='font-size:14px;'>highlighted interval: "+G.toString(z.min)+", "+G.toString(z.max)+"</div>").appendTo(c))};p(),this.host.bind("appearanceChanged",function(a,b){b&&"name"!=b||g(),b&&"interval"!=b||p(),b&&"values"!=b&&"colorPalette"!=b||n(),b&&"palette"!=b||(h.palette=w);var c=h.dataRange;w&&w.isNormalized&&(void 0==c||c.min!=s||c.max!=t)&&(h.dataRange={min:s,max:t})});var q=function(){d.host.unbind("appearanceChanged")};return{name:e,legend:{thumbnail:b,content:c},onLegendRemove:q}},this.buildSvgLegend=function(b,c){var d=this;b.height=30,c.add(c.rect(b.width,b.height).fill("white").opacity(.5));var e=window.getComputedStyle(b.legendDiv.children[0].children[1],null),g=parseFloat(e.getPropertyValue("font-size")),h=e.getPropertyValue("font-family"),i=e?e.getPropertyValue("font-weight"):void 0;c.add(c.text(d.name).font({family:h,size:g,weight:i}).translate(40,0));var j=b.legendDiv.children[1];e=j&&b.legendDiv.children[1].children[0]&&b.legendDiv.children[1].children[0].children[0]?window.getComputedStyle(b.legendDiv.children[1].children[0].children[0],null):void 0,g=e?parseFloat(e.getPropertyValue("font-size")):void 0,h=e?e.getPropertyValue("font-family"):void 0,i=e?e.getPropertyValue("font-weight"):void 0;var k=c.group(),l=d.getTitle("values");k.text(l).font({family:h,size:g,weight:i}),k.translate(5,30);var m=c.group(),n=b.width,o=20;if(f.SvgColorPaletteViewer(m,w,b.legendDiv.children[1].children[0].children[1],{width:n,height:o}),m.translate(5,50),b.height+=50+o,z){e=j&&b.legendDiv.children[1].children[1]&&b.legendDiv.children[1].children[1]?window.getComputedStyle(b.legendDiv.children[1].children[1],null):void 0,g=e?parseFloat(e.getPropertyValue("font-size")):void 0,h=e?e.getPropertyValue("font-family"):void 0,i=e?e.getPropertyValue("font-weight"):void 0;var p=c.group(),q=a(b.legendDiv.children[1].children[1]).text();p.add(p.text(q).font({family:h,size:g,weight:i}));var n=b.width,o=25;p.translate(5,100),b.height+=50+o}c.front()},e&&"undefined"!=typeof e.values&&this.draw(e)}else{var S=b[0].parentElement;if(S){for(var T=!1,k=0;k<S.childNodes.length;k++)if(a(S.childNodes[k]).hasClass("nowebworkers")){T=!0;break}b[0].removeAttribute("data-idd-plot"),b[0].innerText="",T?b[0].innerText="":(b[0].innerText=" Heatmap cannot be rendered: browser does not support web workers.",b.addClass("nowebworkers"))}}}},f.Heatmap.prototype=new f.CanvasPlot,f.register("heatmap",function(a,b){return new f.Heatmap(a,b)}),f.NavigationPanel=function(c,d,e){var g=37,h=38,i=39,j=40,k=107,l=109,m=189,n=187;if(d.attr("tabindex","0"),d.addClass("idd-navigation-container"),c.legend){var o=a("<div></div>").appendTo(d);c.legend.isVisible?o.addClass("idd-onscreennavigation-showlegend"):o.addClass("idd-onscreennavigation-hidelegend"),o.click(function(){c.legend.isVisible?(c.legend.isVisible=!1,o.removeClass("idd-onscreennavigation-showlegend").addClass("idd-onscreennavigation-hidelegend")):(c.legend.isVisible=!0,o.removeClass("idd-onscreennavigation-hidelegend").addClass("idd-onscreennavigation-showlegend"))})}var p;e?(p=a('<a style="display:block" target="_blank"></div>').addClass("idd-onscreennavigation-help").appendTo(d),p.attr("href",e)):p=a('<a href="https://github.com/predictionmachines/InteractiveDataDisplay/wiki/UI-Guidelines" style="display:block" target="_blank"></div>').addClass("idd-onscreennavigation-help").appendTo(d);var q=a("<div></div>").addClass("idd-onscreennavigation-exportsvg").appendTo(d),r=a("<div></div>").addClass("idd-onscreennavigation-navigationlockpressed").appendTo(d),s=a("<div style='overflow: hidden; height: 0px'></div>").appendTo(d),t=a("<div></div>").addClass("idd-onscreennavigation-panner").appendTo(s),u=a("<div></div>").addClass("idd-onscreennavigation-zoomin").appendTo(s),v=a("<div></div>").addClass("idd-onscreennavigation-zoomout").appendTo(s),w=a("<div></div>").addClass("idd-onscreennavigation-fit").appendTo(s),x=a("<div></div>").addClass("idd-onscreennavigation-logscale").appendTo(s),y=void 0,z=b.Observable.create(function(a){return y=a,function(){y=void 0}});q.click(function(){try{var a=(!!new Blob,c.exportToSvg()),b=new Blob([a.svg()]);saveAs(b,"chart.svg")}catch(d){throw d.message}});var A=function(a){var b=void 0,c=function(c){if(c!==b){switch(c){case 0:a.xDataTransform=void 0,a.yDataTransform=void 0;break;case 1:a.xDataTransform=f.logTransform,a.yDataTransform=void 0;break;case 2:a.xDataTransform=void 0,a.yDataTransform=f.logTransform;break;case 3:a.xDataTransform=f.logTransform,a.yDataTransform=f.logTransform}b=c}};this.switch=function(){if(!a.mapControl){var b=(((a.xDataTransform?1:0)|(a.yDataTransform?2:0))+1)%4;c(b),a.fitToView()}}},B=new A(c);x.click(function(a){B.switch();var b=c.navigation.gestureSource;c.navigation.gestureSource=b.merge(z)});var C=void 0;C=void 0!==c.navigation.gestureSource?z.merge(c.navigation.gestureSource):z,c.navigation.gestureSource=C;var D=function(){y&&y.onNext(new f.Gestures.PanGesture(10,0,"Mouse"))},E=function(){y&&y.onNext(new f.Gestures.PanGesture(-10,0,"Mouse"))},F=function(){y&&y.onNext(new f.Gestures.PanGesture(0,10,"Mouse"))},G=function(){y&&y.onNext(new f.Gestures.PanGesture(0,-10,"Mouse"))},H=function(){return void 0===c.mapControl?f.Gestures.zoomLevelFactor:3},I=function(){y&&y.onNext(new f.Gestures.ZoomGesture(c.centralPart.width()/2,c.centralPart.height()/2,1/H(),"Mouse"))},J=function(){y&&y.onNext(new f.Gestures.ZoomGesture(c.centralPart.width()/2,c.centralPart.height()/2,H(),"Mouse"))},K=c.navigation.gestureSource;c.navigation.gestureSource=void 0,r.click(function(){void 0!==c.navigation.gestureSource?(c.navigation.gestureSource=void 0,r.removeClass("idd-onscreennavigation-navigationlock").addClass("idd-onscreennavigation-navigationlockpressed"),s.animate({height:0},200)):(c.navigation.gestureSource=K,r.removeClass("idd-onscreennavigation-navigationlockpressed").addClass("idd-onscreennavigation-navigationlock"),s.animate({height:225},200))}),v.dblclick(function(a){a.stopPropagation()}),v.click(function(a){a.stopPropagation(),J()}),u.dblclick(function(a){a.stopPropagation()}),u.click(function(a){a.stopPropagation(),I()}),c.isAutoFitEnabled&&w.attr("class","idd-onscreennavigation-fit-pressed"),w.click(function(){c.isAutoFitEnabled=!c.isAutoFitEnabled}),c.host.on("isAutoFitEnabledChanged",function(){c.isAutoFitEnabled?w.attr("class","idd-onscreennavigation-fit-pressed"):w.attr("class","idd-onscreennavigation-fit")}),d.keydown(function(a){var b=a.which;b==g?(D(),a.preventDefault()):b==h?(F(),a.preventDefault()):b==i?(E(),a.preventDefault()):b==j?(G(),a.preventDefault()):b==k||b==n?(I(),a.preventDefault()):b!=l&&b!=m||(J(),a.preventDefault())});var L,M={x:0,y:0};t.mousedown(function(b){var c=t.offset(),d=t.outerWidth()/2;M.x=(b.pageX-c.left-d)/d,M.y=(b.pageY-c.top-d)/d,M.x*M.x+M.y*M.y>1||(a(document).on("mousemove",N),t.removeClass("idd-onscreennavigation-panner").addClass("idd-onscreennavigation-panner-moved"),L=setInterval(function(){y.onNext(new f.Gestures.PanGesture(-10*M.x,-10*M.y,"Mouse"))},25))}),a(document).mouseup(function(){a(document).off("mousemove",N),L&&clearInterval(L),t.removeClass("idd-onscreennavigation-panner-moved").addClass("idd-onscreennavigation-panner")});var N=function(a){var b=t.offset(),c=t.outerWidth()/2;M.x=(a.pageX-b.left-c)/c,M.y=(a.pageY-b.top-c)/c};this.remove=function(){d.removeClass("idd-navigation-container"),d[0].innerHTML=""}},f.BingMaps=f.BingMaps||{},f.BingMaps.ESRI=f.BingMaps.ESRI||{},f.BingMaps.ESRI.GetWorldTopo=function(){function a(a){return"http://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/"+a.levelOfDetail+"/"+a.y+"/"+a.x}return new Microsoft.Maps.TileSource({uriConstructor:a})},f.BingMaps.ESRI.GetDeLorme=function(){function a(a){return"http://server.arcgisonline.com/ArcGIS/rest/services/Specialty/DeLorme_World_Base_Map/MapServer/tile/"+a.levelOfDetail+"/"+a.y+"/"+a.x}return new Microsoft.Maps.TileSource({uriConstructor:a})},f.BingMaps.ESRI.GetWorldImagery=function(){function a(a){return"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/"+a.levelOfDetail+"/"+a.y+"/"+a.x}return new Microsoft.Maps.TileSource({uriConstructor:a})},f.BingMaps.ESRI.GetOceanBasemap=function(){function a(a){return"http://services.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap/MapServer/tile/"+a.levelOfDetail+"/"+a.y+"/"+a.x}return new Microsoft.Maps.TileSource({uriConstructor:a})},f.BingMaps.ESRI.GetNationalGeographicMap=function(){function a(a){return"http://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/"+a.levelOfDetail+"/"+a.y+"/"+a.x}return new Microsoft.Maps.TileSource({uriConstructor:a})},f.BingMaps.ESRI.GetWorldShadedRelief=function(){function a(a){return"http://services.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/"+a.levelOfDetail+"/"+a.y+"/"+a.x}return new Microsoft.Maps.TileSource({uriConstructor:a})},f.BingMaps.ESRI.GetWorldTerrainBase=function(){function a(a){return"http://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/"+a.levelOfDetail+"/"+a.y+"/"+a.x}return new Microsoft.Maps.TileSource({uriConstructor:a})},f.BingMaps.OpenStreetMap=f.BingMaps.OpenStreet||{},f.BingMaps.OpenStreetMap.GetTileSource=function(){function a(a){return"http://tile.openstreetmap.org/"+a.levelOfDetail+"/"+a.x+"/"+a.y+".png"}return new Microsoft.Maps.TileSource({uriConstructor:a})},f.BingMapsPlot=function(b,c){if(b){var d=a('<div style="position: absolute"></div>').prependTo(b);this.base=f.Plot,this.base(b,c);var e=this;if("undefined"==typeof Microsoft)a("<p></p>").css("margin",15).css("word-wrap","break-word").text("BingMaps script is unavailable. Check your internet connection.").appendTo(b);else{var g=void 0,h=void 0;0===e.children.length&&(g=a('<div style="position: absolute;"></div>').appendTo(b),g.css("z-index",f.ZIndexNavigationLayer),h=a("<canvas></canvas>").appendTo(g));this.mapKey=b.attr("data-idd-mapKey");var i=new Microsoft.Maps.Map(d[0],{credentials:e.mapKey,mapTypeId:Microsoft.Maps.MapTypeId.aerial,enableClickableLogo:!1,enableSearchLogo:!1,showCopyright:!1,showDashboard:!1,showLogo:!1,disablePanning:!0,disableZooming:!0,width:b.width(),height:b.height()});Object.defineProperty(this,"map",{get:function(){return i},configurable:!1});var j=new f.BingMapsAnimation(i);this.arrange=function(a){f.BingMapsPlot.prototype.arrange.call(this,a),i.width=a.width,i.height=a.height},this.setMap=function(a){if(i.setMapType(Microsoft.Maps.MapTypeId.mercator),i.entities.clear(),a)if(a instanceof Microsoft.Maps.TileSource){var b=new Microsoft.Maps.TileLayer({mercator:a,opacity:1});i.entities.push(b)}else i.setMapType(a)},this.constraint=function(a,b,c){if(c===!0){var d=i.getWidth(),e=i.getHeight();return d<=1||e<=1?a:(j.setMapView(a,b),mapRect=f.Utils.getPlotRectForMap(i),mapRect)}return a},this.arrange=function(a){f.CanvasPlot.prototype.arrange.call(this,a),void 0!==g&&(g.width(a.width),g.height(a.height),h[0].width=a.width,h[0].height=a.height)},j.constraint=this.constraint,e.navigation.animation=j,this.selfMapRefresh()}}},f.BingMapsPlot.prototype=new f.Plot;var f;!function(a){function b(){function b(a,b){for(var e=0;e<d.length;++e)d[e](c,a,b)}var c=this,d=[];this.subscribe=function(a){return d.push(a),function(){var b=d.indexOf(a);b>=0&&d.splice(b,1)}};var e=void 0;Object.defineProperty(this,"axisTransform",{get:function(){return e},set:function(a){a!=e&&(e=a,b("axisTransform"))},configurable:!1,enumerable:!0});var f=void 0;Object.defineProperty(this,"plotRect",{get:function(){return f},set:function(a){a!=f&&(f=a,b("plotRect"))},configurable:!1,enumerable:!0});var g=void 0;Object.defineProperty(this,"mapType",{get:function(){return g},set:function(a){a!=g&&(g=a,b("mapType"))},configurable:!1,enumerable:!0});var h=void 0;Object.defineProperty(this,"isAutoFit",{get:function(){return h},set:function(a){a!=h&&(h=a,b("isAutoFit"))},configurable:!1,enumerable:!0});var i={};Object.defineProperty(this,"isLogData",{get:function(){return i},configurable:!1,enumerable:!0}),this.setLogDataForPlot=function(a,c){i[a]=c,b("isLogData",{id:a})};var j=void 0;Object.defineProperty(this,"selectedPlots",{get:function(){return j},set:function(a){a!=j&&(j=a,b("selectedPlots"))},configurable:!1,enumerable:!0});var k=void 0;Object.defineProperty(this,"xAxisTitle",{get:function(){return k},set:function(a){a!=k&&(k=a,b("xAxisTitle"))},configurable:!1,enumerable:!0});var l=void 0;Object.defineProperty(this,"yAxisTitle",{get:function(){return l},set:function(a){a!=l&&(l=a,b("yAxisTitle"))},configurable:!1,enumerable:!0});var m=void 0;Object.defineProperty(this,"probesViewModel",{get:function(){return m},configurable:!1,enumerable:!0}),this.initProbes=function(c){if(void 0!==m)throw"Probes are already initialized";m=new a.ProbesVM(c),m.subscribe(function(a){b("probes")})};var n={};Object.defineProperty(this,"uncertaintyRange",{get:function(){return n},set:function(a){a!=n&&(n=a,b("uncertaintyRange"))},configurable:!1,enumerable:!0})}function c(){function b(a,b){for(var e=0;e<d.length;++e)d[e](c,a,b)}var c=this,d=[];this.subscribe=function(a){d.push(a)},this.unsubscribe=function(a){d=d.filter(function(b){return b!==a})};var e={};Object.defineProperty(this,"ranges",{get:function(){return e},configurable:!1,enumerable:!0});var f=new a.AdaptiveFormatter(0,1);Object.defineProperty(this,"plotXFormatter",{get:function(){return f},set:function(a){a!=f&&(f=a,b("plotXFormatter"))},configurable:!1,enumerable:!0});var g=new a.AdaptiveFormatter(0,1);Object.defineProperty(this,"plotYFormatter",{get:function(){return g},set:function(a){a!=g&&(g=a,b("plotYFormatter"))},configurable:!1,enumerable:!0}),this.setRangesForPlot=function(a,c){e[a]=c,b("ranges",{id:a})}}a.PersistentViewState=b,a.TransientViewState=c}(f||(f={}));var f;!function(a){a.PlotRegistry={}}(f||(f={}));var f;!function(b){function c(b,c,d,e){b.empty();var f=void 0!==e?e:1,g=a("<canvas width='"+40*f+"' height='"+40*f+"'></canvas>").appendTo(b),h=g.get(0).getContext("2d"),i=new Image;if(i.src=d?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC45bDN+TgAAApdJREFUaEPtWc1KW0EUDrjL+9RVN2ZVNC1SaBdREewmYkW00NI+QVEkxJ+2/iBq1KX2CVrJM3Tj1ifIG9yebzhnvFxO4iR3Zm4C94Nvk8yc7zs/czOXVEower3eFLHqyCneVjxghk11iYkjsbbYRCDOJqzxfw+Pyf5NdyCxRtbz3viJQJDFrfG9624yv36STC8eDiTWYK2SSJwkIMSCxkSrc5/MrOyrZgextnKQtK/u04mETwICLGSEl75equaG4fK3TpwkEJgFjGB97ZdqaBS++XgcNgkE5MDezQuDJkHB8KQwAj7Gph8z41Rl+XxAJYim+jiwmrBP4mBzAn66QEFs9Ud52gzL2ocDf11ABYim+nh2a4IhCC1OIF8XaLOtvsuPlOXCnttnffh249RPFyQBXAE0oZCEZvwEHKr8wrETxSTgkWUCQJlADhaTQHmIn+g1Afyo4LaoCWnUquxaeTBzM82VgL1K7F78UcVCsHX5V8znv9BRgOhj5GV8BJIAWvpu60wV9EloeBkfAQWxYxSjC6nq5x8fAQWyXXjV/KEK+yBie62+AJUgmi6EfC/w9h6ggQLaLsyu+n+pR8wg1RegIsRgZyHI7GdBgW0XGp/PVSOjsPHlImz1BagM0XsXolRfQAK2C5vbd6qhYYgYUaovQIWIpgsQrq8dqcZciL0p8+GrL4AQC+YapaijkwUJ2lHa2vmtGhxE7Ik6OlmgYkQ7Su8/ud+TsLaQ0ckCwmzAGHq5/PydH2vGwrwABtiI0zWj0LnvBzJiz8PG91vVOIjvUtWPP/f9gEoS7Shp/yHgs7EanSxgiI0Zo3OrP615/KMz1uYFMMYGjeHXzbbhRJgXwCAbFdOTY14Ao0Qc7DQnw3yJoVCp/AcXkU+yAO498gAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC45bDN+TgAAAylJREFUaEPVmdtOMjEUhX0Wn9CHwkPQeIxwwQ0SD1eaqIkHghEidxD1Dfrvb0KT+ScLpu0UEy6+xL1ou9fedGbKuNVqtTYaKW4SUkzl9/d329ipYVvNTUWKsWBqYW5guBoYk60QKYaCiYWZwc/PjxuNRu729tZdXl66drvtdnd3C/gbjc8+Pj4cY5mzmNuoECmGQGJv/PHx0R0fHzvTg2Ds09NTuZDkIqRYhzf/9fXlzs/PpckQLi4u3HQ6bVSEFFfhzb+/v7v9/X1pLAbWGA6HyUVIcRll8+xt07LAWqlFSFHhzbNtcnS+CmumbCcpKmzRHS66Jnu+Dq6JxYW9Y7H0UUWKVegIneFuY/FaeX5+jvoWpFiFjtCZmFtlKicnJ1HfghTL0Ak6wkPK4iAODg6CtGXwsCMnuS2WvjxSLEMnjOIpavGfcHd3RwFB34IUy/gCOApYvJKQLoeM6XQ6+QvgPGPxn3B4eJi/gJwPrjrIlb2Avb09mWwdkCt7AUdHRzLZOiBX9gK63a5MVibXRUyu7AVwa7P4T8h9Gy0eZJwWLQ5CdTmk856Yk6kUq9CJ7+/vKBOpkINc5LRY+ikjxSosZrh+vy+T5oQc5MpdQLGNPj8/ZdKckINc5LRY+ikjRQUdMYozu8VrgbXJQS6LpY8qUlTQEWPw8vIik+fg9fU1qvsgxWXQGc7qp6en0kATzs7Oon+NgRSXQWfo0NvbmzTRBF4UsDY5LJb5FVJcBR0yiiOvxVmIOT5XkeIq6JAxmEwm0kwKrMWarG2xzLsMKdZBpwx3fX0tDcVwc3OT3H2QYh10yhjM5/NGp1TmsgZrsaZpMt8qpBiCLyLmjFSlyStFjxRDscTFVrq6upIGV8Ec5rKGxXL9EKQYCp0ziq0U+3q96dbxSDEGXwRnmJDfzYwZj8dZzIMUY/FF3N/fS9NlGJPLPEgxBTNUHDN6vZ40Dnxm4xrv+zJSTIGOGoPZbFa83zTtP9D4jDGMZU4OpJiKL6L6PwT+RsttHqTYBF8EhzOLC1IPaiFIsSm+iIeHBwfrMg9SzMGiCB50sBbzIMVNQoqbhBQ3h9bWP/HfsYvIwP9AAAAAAElFTkSuQmCC",h.drawImage(i,0,0,40*f,40*f),void 0!==c){h.fillStyle="white";var j=(c<10?14:11)*f;h.font=j+"px Arial";var k=(c<10?16:13)*f;h.fillText(c,k,20*f)}}function d(b,d){var e=b,f=a("<div></div>").addClass("dragPoint").addClass("probe").appendTo(e);f.draggable({containment:"document",scroll:!1,zIndex:2500,helper:function(){var b=a("<div></div>").addClass("dragPoint");return c(b),b},appendTo:d}),f.mousedown(function(a){a.stopPropagation()})}function e(c,d,e){b.NavigationPanel(d,c,"https://github.com/predictionmachines/InteractiveDataDisplay/wiki/UI-Guidelines#chartviewer");var f=c.find(".idd-onscreennavigation-showlegend");f.remove(),f=c.find(".idd-onscreennavigation-hidelegend"),f.remove();a("<div></div>").addClass("idd-onscreennavigation-hidelegend").prependTo(c)}b.createSmallProbe=c,b.ProbePull=d,b.OnScreenNavigation=e}(f||(f={}));var f;!function(b){var c=function(){function c(c,d,e,f){this.currentPlots={},this.div=c;var g=this,h=this.iddDiv=a("<div data-idd-plot='chart'></div>").appendTo(c);h.width(c.width()),h.height(c.height());var i=this.iddChart=b.asPlot(h);i.legend.isVisible=!1,i.isToolTipEnabled=!1,i.doFitOnDataTransformChanged=!1;var j=a("<div></div>").addClass("dsv-onscreennavigationcontainer").attr("data-idd-placement","center").appendTo(d),k=a("<div></div>").addClass("dsv-onscreennavigation").appendTo(j),l=(new b.OnScreenNavigation(k,i,e),a("<div></div>").attr("data-idd-name","draggableMarkers").appendTo(i.host)),m=new b.DOMPlot(l,i);m.order=9007199254740991,i.addChild(m),this.persistentViewState=e,e.probesViewModel.getProbeContent=function(a){for(var b=i.children,c=[],d=0;d<b.length;d++)if(b[d].isVisible){var e=b[d].xDataTransform&&b[d].xDataTransform.isInDomain&&b[d].xDataTransform.isInDomain(a.location.x)?b[d].xDataTransform.dataToPlot(a.location.x):a.location.x,f=b[d].yDataTransform&&b[d].yDataTransform.isInDomain&&b[d].yDataTransform.isInDomain(a.location.y)?b[d].yDataTransform.dataToPlot(a.location.y):a.location.y,g=b[d].getTooltip(a.location.x,a.location.y,e,f,!0);void 0!==g&&c.push(g)}return c.length>0?c:void 0};var n=function(c){var d=c.id,f=c.location.x,g=c.location.y,h=a("<div></div>");h.addClass("dragPoint"),m.add(h[0],"none",f,g,void 0,void 0,.5,1);var i=m.domElements,j=i[i.length-1];j.id=d,h.draggable({containment:m.master.centralPart[0],scroll:!1,drag:function(){},stop:function(a,b){var c={x:j._x,y:j._y};e.probesViewModel.updateProbe(d,c)},start:function(){}}),c.selected?b.createSmallProbe(h,d,"#365C95"):b.createSmallProbe(h,d)};m.host.droppable({accept:".probe",tolerance:"fit",drop:function(b,c){var d=(a(this).offset(),{x:c.position.left+c.draggable.width()/2,y:c.position.top+c.draggable.height()}),f=m.coordinateTransform,g=i.xDataTransform?i.xDataTransform.plotToData(f.screenToPlotX(d.x)):f.screenToPlotX(d.x),h=i.yDataTransform?i.yDataTransform.plotToData(f.screenToPlotY(d.y)):f.screenToPlotY(d.y),j=e.probesViewModel.addProbe({x:g,y:h});n({id:j,location:{x:g,y:h}})}}),e.probesViewModel.subscribe(function(a){var c=a.probe;switch(a.status){case"fit":for(var d=1e-7,e=m.domElements,f=0;f<e.length;f++){var g=e[f];if(g.id===c.id){var h=i.visibleRect,j=i.xDataTransform?i.xDataTransform.dataToPlot(g._x):g._x,k=i.yDataTransform?i.yDataTransform.dataToPlot(g._y):g._y;(Math.abs(j-h.x-h.width/2)>d||Math.abs(k-h.y-h.height/2)>d)&&i.navigation.setVisibleRect({x:j-h.width/2,y:k-h.height/2,width:h.width,height:h.height},!0);break}}break;case"remove":for(var e=m.domElements,f=0;f<e.length;f++){var g=e[f];if(g.id===c.id){m.remove(g);break}}break;case"unselected":for(var e=m.domElements,f=0;f<e.length;f++){var l=e[f];b.createSmallProbe(l,l.id)}break;case"selected":for(var e=m.domElements,f=0;f<e.length;f++){var l=e[f];l.id===c.id?b.createSmallProbe(l,l.id,"#365C95"):b.createSmallProbe(l,l.id)}}});for(var o=e.probesViewModel.getProbes(),p=0;p<o.length;p++)n(o[p]);h.on("visibleRectChanged",function(){var a=i.visibleRect;f.plotXFormatter=new b.AdaptiveFormatter(a.x,a.x+a.width),f.plotYFormatter=new b.AdaptiveFormatter(a.y,a.y+a.height),e.plotRect=a,void 0!==e.probesViewModel&&e.probesViewModel.refresh()}),e.subscribe(function(a,b){"selectedPlots"==b&&g.setupPlotsVisibility()})}return c.prototype.setupPlotsVisibility=function(){for(var a in this.currentPlots){var b=this.currentPlots[a],c=b.Plots;if(c)for(var d=this.persistentViewState.selectedPlots.indexOf(b.Id)==-1,e=0;e<c.length;++e)c[e].isVisible=d}},c.prototype.checkLatLon=function(a){var c=function(a){var b=a.toLowerCase();return"lat"===b||"latitude"===b},d=function(a){var b=a.toLowerCase();return"lon"===b||"longitude"===b};return void 0!==a.x&&d(b.getTitle(a,"x"))&&void 0!==a.y&&c(b.getTitle(a,"y"))},c.prototype.addPlot=function(a){var c=b.PlotRegistry[a.Definition.kind]?b.PlotRegistry[a.Definition.kind]:b.PlotRegistry.fallback;a.Plots=c.initialize(a.Definition,this.persistentViewState,this.iddChart);try{c.draw(a.Plots,a.Definition)}catch(d){void 0!==a.Plots&&a.Plots.forEach(function(a){a.remove()}),c=b.PlotRegistry.fallback,a.Definition.error=d.message,a.Plots=c.initialize(a.Definition,this.persistentViewState,this.iddChart),c.draw(a.Plots,a.Definition)}},c.prototype.updateAxes=function(){var c="",d="",e=[],f=[];for(var g in this.currentPlots){var h=this.currentPlots[g],i=h.Definition;if(i.x){for(var j=b.getTitle(i,"x"),k=!1,l=0;l<e.length;l++)if(e[l]===j){k=!0;break}k||(e.push(j),""!==c&&(c+=", "),c+=j)}if(i.y){for(var m=b.getTitle(i,"y"),k=!1,l=0;l<f.length;l++)if(f[l]===m){k=!0;break}k||(f.push(m),""!==d&&(d+=", "),d+=m)}}""!==c?(void 0===this.xAxisTitle&&(this.xAxisTitle=a(this.iddChart.addDiv('<div style="font-size: larger; text-align: center"></div>',"bottom"))),this.xAxisTitle.text(c)):void 0!==this.xAxisTitle&&(this.iddChart.removeDiv(this.xAxisTitle[0]),this.xAxisTitle.remove(),this.xAxisTitle=void 0),""!==d?(void 0===this.yAxisTitle&&(this.yAxisTitle=a(this.iddChart.addDiv('<div class="idd-verticalTitle" style="font-size: larger;"></div>',"left"))),this.yAxisTitle.text(d)):void 0!==this.yAxisTitle&&(this.iddChart.removeDiv(this.yAxisTitle[0]),this.yAxisTitle.remove(),this.yAxisTitle=void 0)},c.prototype.createMap=function(){var c=a("<div></div>").attr("data-idd-name","bingMaps").css("z-index",0).prependTo(this.iddChart.host),d=new b.BingMapsPlot(c,this.iddChart);return d.order=9007199254740991,this.iddChart.addChild(d),d},c.prototype.updateMap=function(){var a=!1,c=!0;for(var d in this.currentPlots){var e=this.currentPlots[d];a=(c||a)&&this.checkLatLon(e.Definition),c=!1}a&&"undefined"!=typeof Microsoft?void 0===this.bingMapsPlot?(this.bingMapsPlot=this.createMap(),this.persistentViewState.mapType?this.bingMapsPlot.setMap(this.persistentViewState.mapType):this.bingMapsPlot.setMap(Microsoft.Maps.MapTypeId.road),this.iddChart.yDataTransform=b.mercatorTransform,this.iddChart.xDataTransform=void 0):this.persistentViewState.mapType&&this.bingMapsPlot.setMap(this.persistentViewState.mapType):void 0!==this.bingMapsPlot&&(this.bingMapsPlot.remove(),this.bingMapsPlot=void 0,this.iddChart.yDataTransform=void 0)},c.prototype.draw=function(a){var c=this;this.currentPlots=b.updateBag(this.currentPlots,a,function(a,d,e){return d.Definition.kind==e.Definition.kind?(b.syncProps(d.Definition,e.Definition)&&b.PlotRegistry[d.Definition.kind].draw(d.Plots,d.Definition),
d):(void 0!==d.Plots&&d.Plots.forEach(function(a){a.remove()}),c.addPlot(e),e)},function(a,b){return c.addPlot(b),b},function(a,b){void 0!==b.Plots&&b.Plots.forEach(function(a){a.remove()})}),this.updateAxes(),this.persistentViewState.probesViewModel.refresh(),this.updateMap();var d=0;for(var e in this.currentPlots){var f=this.currentPlots[e];f.ZIndex&&(d=Math.max(f.ZIndex,d))}for(var e in this.currentPlots){var f=this.currentPlots[e];if(f.ZIndex||(f.ZIndex=++d),f.Plots)for(var g=0;g<f.Plots.length;++g)f.Plots[g].host.css("z-index",f.ZIndex)}return this.persistentViewState.selectedPlots&&this.setupPlotsVisibility(),this.currentPlots},c.prototype.updateLayout=function(){this.iddDiv.width(this.div.width()),this.iddDiv.height(this.div.height()),this.iddChart.updateLayout(),void 0!==this.bingMapsPlot&&this.iddChart.navigation.setVisibleRect(this.iddChart.visibleRect,!1)},c}();b.PlotViewer=c}(f||(f={}));var f;!function(b){function c(c,d,e,f){c.addClass("dsv-plotlist");var g=a("<div></div>").appendTo(c),h=new b.Legend(d.iddChart,g);d.iddChart.host.bind("visibleChanged",function(){e.probesViewModel.refresh(e.probesViewModel.getProbes())}),e.probesViewModel.refresh(e.probesViewModel.getProbes());var i=a("<div></div>").addClass("probes").appendTo(c),j=a("<div style='width:240px; margin-bottom: 16px'></div>").appendTo(i),k=a("<div></div>").addClass("dsv-onscreennavigation-probepull").appendTo(j),l=(new b.ProbePull(k,d.iddChart.centralPart),a("<div style='width: 195px; display:inline-block'></div>").appendTo(j));a("<div style='width:180px; height:1px; margin-bottom:6px; float:right; margin-top: 8px; background-color:lightgrey'></div>").appendTo(l),a("<div style='float:left; margin-left:15px;font-family: Segoe UI;font-size: 12px;color:grey; margin-bottom:16px'>Probes</div>").appendTo(l);var m=a("<div></div>").addClass("probes-list").appendTo(i);m[0].style.display="none";new b.ProbesControl(i,m,e,f);this.remove=function(){d.iddChart.host.bind("visibleChanged"),h.remove()}}b.PlotList=c}(f||(f={}));var f;!function(b){var c=function(){function c(c){this.rightPanelExtraShift=3,this.navigationPanelShift=65,this.minWidthToShowLeftPanel=540,this.plotList=void 0,this.viewState=void 0;var d=this,e=this.controlDiv=a(c);this.persistentViewState=this.viewState=new b.PersistentViewState,this.persistentViewState.initProbes(),this.transientViewState=new b.TransientViewState;var f=e.width(),g=e.height();0===f&&e.width(400),0===g&&e.height(400);var h=a("<div class='dsv-visualizaition-control'></div>");e.append(h);var i=a("<div class='dsv-leftpanelcontainer'></div>");h.append(i);var j=a("<div class='dsv-rightpanel'></div>");h.append(j);var k=a("<div class='dsv-leftpanel'></div>");i.append(k),k.append(a("<div class='plotlist'></div>")),j.append(a("<div class='dsv-visualization-preview'></div>"));var l=a("<div class='dsv-navigation-container'></div>").appendTo(h);l.addClass("no-print");var m=this.rightpanel=e.find(".dsv-rightpanel"),n=e.find(".dsv-leftpanel"),o=this.leftPanelContainer=e.find(".dsv-leftpanelcontainer"),p=!1;this.plotViewer=new b.PlotViewer(e.find(".dsv-visualization-preview"),l,this.persistentViewState,this.transientViewState);var q=e.find(".plotlist");this.plotList=new b.PlotList(q,this.plotViewer,this.persistentViewState,this.transientViewState),this.plotList.isEditable=!1,this.plotViewer.iddChart.exportToSvg=function(a,b,c){if(!SVG.supported)throw"SVG is not supported";var b=this.screenSize,a=this.coordinateTransform.getPlotRect({x:0,y:0,width:b.width,height:b.height}),d=document.createElementNS("http://www.w3.org/2000/svg","svg"),c=SVG(d).size(this.host.width(),this.host.height()),e=c.group();this.exportContentToSvg(a,b,e);var f=c.group(),g=this.host.width();return p&&(f.add(this.exportLegendToSvg(this.legend.div[0])).translate(g,30),c.size(200+g,this.host.height())),c};var r=l[0].children[0].firstChild.firstChild;a(r).click(function(){p?(p=!1,n.hide(),a(r).removeClass("idd-onscreennavigation-showlegend").addClass("idd-onscreennavigation-hidelegend")):(p=!0,n.show(),a(r).removeClass("idd-onscreennavigation-hidelegend").addClass("idd-onscreennavigation-showlegend")),m.width(e.width()-o.width()-d.rightPanelExtraShift-d.navigationPanelShift),d.plotViewer.updateLayout()}),n.hide(),m.width(e.width()-o.width()-this.rightPanelExtraShift-this.navigationPanelShift),a(window).resize(function(){d.updateLayout()}),this.updateLayout()}return c.prototype.update=function(b){var c={};for(var d in b){var e=b[d];null!=e?(c[d]={Id:d,Definition:e},null!==e.displayName&&"undefined"!=typeof e.displayName||(e=a.extend(!1,{},e),e.displayName=d,c[d].Definition=e)):c[d]=null}c=this.plotViewer.draw(c)},c.prototype.updateLayout=function(){var a=0;this.controlDiv.width()<this.minWidthToShowLeftPanel&&void 0!==this.leftPanelContainer?this.leftPanelContainer.hide():void 0!==this.leftPanelContainer&&(this.leftPanelContainer.show(),a=this.leftPanelContainer.width()),this.rightpanel.width(this.controlDiv.width()-a-this.rightPanelExtraShift-this.navigationPanelShift),this.plotViewer.updateLayout()},c.prototype.dispose=function(){this.plotList.remove(),this.controlDiv.children().remove()},c}();b.ChartViewerControl=c}(f||(f={}));var f;!function(b){function c(a){var b=this,c=0,d=[],e=[],f=function(a,b){if(d.length>0)for(var c=0;c<d.length;c++)d[c]({probe:a,status:b})};if(this.subscribe=function(a){d.push(a)},this.clear=function(){for(var a=e.slice(0),c=0;c<a.length;c++)b.removeProbe(a[c].id)},this.addProbe=function(a){var b={id:++c,location:a,selected:!1};return e.push(b),f(b,"add"),b.id},this.removeProbe=function(a){for(var b=void 0,c=0;c<e.length;c++){var d=e[c];if(d.id==a){b=d;break}}void 0!==b&&(e=e.filter(function(a){return a!==b}),f(b,"remove"))},this.updateProbe=function(a,b){for(var c=void 0,d=0;d<e.length;d++){var g=e[d];if(g.id==a){c=g;break}}void 0!==c&&(c.location=b,f(c,"update"))},this.selectProbe=function(a){if(a===-1){for(var b=0;b<e.length;b++){var c=e[b];c.selected=!1}return void f(void 0,"unselected")}for(var d=void 0,b=0;b<e.length;b++){var c=e[b];c.id==a?(d=c,d.selected=!0):c.selected=!1}void 0!==d&&f(d,"selected")},this.fitToProbe=function(a){for(var b=void 0,c=0;c<e.length;c++){var d=e[c];d.id==a&&(b=d,f(b,"fit"))}},this.getProbes=function(){return e.slice(0)},this.getProbeContent=function(a){},this.refresh=function(){void 0!==b.onRefresh&&b.onRefresh(e.slice(0))},void 0!==a)for(var g=0;g<a.length;g++){var h={id:a[g].id,location:{x:a[g].location.x,y:a[g].location.y},selected:a[g].selected};e.push(h),h.id>c&&(c=h.id)}}function d(c,d,e,f){var g=e.probesViewModel,h=d,i=[],j=function(h){c[0].style.display="block";var i=a("<div></div>").addClass("probeCard");h.selected===!0&&i.addClass("probeCard-selected");var j=.6,k=a("<div></div>").addClass("probeHeader").appendTo(i).height(40*j),l=a("<div></div>").addClass("probe").css("float","left").css("margin-right",3).width(40*j).height(40*j).appendTo(k);h.selected?b.createSmallProbe(l,h.id,"#365C95",j):b.createSmallProbe(l,h.id,void 0,j),a("<div></div>").addClass("probeHeader-name").text(f.plotXFormatter.toString(h.location.x)+", "+f.plotYFormatter.toString(h.location.y)).appendTo(k);var m=a("<div></div>").addClass("probeActionPanel").appendTo(i),n=a("<div></div>").addClass("probeCard-remove").appendTo(m);n.click(function(){g.removeProbe(h.id),void 0!==e.uncertaintyRange&&e.uncertaintyRange.probeid===h.id&&(e.uncertaintyRange=void 0),0==d[0].childNodes.length&&(d[0].style.display="none")});var o=a("<div></div>").addClass("probeCard-fit").appendTo(m);o.click(function(){g.fitToProbe(h.id)});var p=g.getProbeContent(h);if(void 0!==p)for(var q=0;q<p.length;q++){var r=a(p[q]);r.addClass("probecard-record"),r.appendTo(i)}return i},k=function(b){h.empty(),i=[];for(var c=0;c<b.length;c++){var d=b[c],e=j(d),f=a("<div></div>").css("display","inline").appendTo(h);e.appendTo(f),i.push({id:d.id,div:e,host:f})}};k(g.getProbes()),g.subscribe(function(b){var c=b.probe;switch(b.status){case"add":d[0].style.display="block";var e=j(b.probe),f=a("<div></div>").css("display","inline").appendTo(h);e.appendTo(f),i.push({id:c.id,div:e,host:f});break;case"remove":for(var l=0;l<i.length;l++){var m=i[l];if(m.id===c.id){m.host.remove(),i=i.filter(function(a){return a.id!==c.id}),0==d[0].childNodes.length&&(d[0].style.display="none");break}}break;case"update":for(var l=0;l<i.length;l++){var m=i[l];if(m.id===c.id){m.host.empty();var e=j(b.probe);e.appendTo(m.host),m.div=e;break}}break;case"selected":k(g.getProbes());break;case"unselected":k(g.getProbes())}}),g.onRefresh=function(a){k(a)}}function e(a,c,d){if(d)throw"viewState argument is not supported";var e=new b.ChartViewerControl(a);return e.update(c),e}b.ProbesVM=c,b.ProbesControl=d,b.show=e}(f||(f={}));var f;!function(a){function b(a,b,c,d,e){var f={};for(var g in b){var h=a[g],i=b[g];"undefined"!=typeof i&&("undefined"!=typeof h?null==i?f[g]=h:f[g]=c(g,h,i):f[g]=d(g,i))}for(var g in a){var h=a[g],i=b[g];"undefined"!=typeof h&&"undefined"==typeof i&&e(g,h)}return f}function c(a,b){return a.titles&&"undefined"!=typeof a.titles[b]?a.titles[b]:b}function d(a,b,c){return b[a]===c[a]||(b[a]=c[a],!1)}function e(a){return!isNaN(parseFloat(a))&&isFinite(a)}function f(a){return a===a+""}function g(a){return e(a)||f(a)}function h(b){var c=typeof b;if("object"!==c||null==b)return b;if(a.Utils.isArray(b)){for(var d=[],e=0;e<b.length;e++)d.push(h(b[e]));return d}var f={};for(var g in b)f[g]=h(b[g]);return f}function i(a,b){var c=!1;for(var e in b)if(void 0===a[e]||g(a[e])&&!g(b[e]))a[e]=h(b[e]),c||(c=!0);else if(g(b[e])){var f=!d(e,a,b);c||(c=f)}else{var f=i(a[e],b[e]);c||(c=f)}var j=[];for(var k in a)if("d3Graphs"!==k&&"isPresented"!==k){var l=!1;for(var e in b)if(e===k){l=!0;break}l||(j.push(k),c||(c=!0))}j.forEach(function(b){delete a[b]});for(var m=0;m<a.length;m++)void 0==a[m]&&"function"!=typeof a&&(a.splice(m,1),m--);return c}a.updateBag=b,a.getTitle=c,a.updateProp=d,a.isNumber=e,a.isString=f,a.isStringOrNumber=g,a.deepCopyJS=h,a.syncProps=i}(f||(f={}));var f;!function(b){b.PlotRegistry.area={initialize:function(c,d,e){var f=a("<div></div>").attr("data-idd-name",c.displayName).appendTo(e.host),g=new b.Area(f,e.master);return e.addChild(g),[g]},draw:function(a,b){var c=a[0],d=b;c.draw(d)}}}(f||(f={}));var f;!function(b){function c(c,d){var e=b.Utils.getDataSourceFunction(c,b.readCsv),f=e(c);this.base=b.CanvasPlot,this.base(c,d);var g,h;f&&(g=f.kind),this.draw=function(a){g=a.kind,h=a.error,this.fireAppearanceChanged("error")},this.getLocalPadding=function(){return{left:0,right:0,top:0,bottom:0}},this.renderCore=function(a,b){},this.getLegend=function(){var b=this,d=a("<span></span>"),e=a("<div class='plotcard-error'></div>"),f=function(){d.text(b.name)};f();var i=function(){var a="";a=h?h:g?'kind "'+g+'" is unknown':"Error plot definition!",e.text(a)};i(),this.host.bind("appearanceChanged",function(a,b){b&&"error"!=b||i(),b&&"name"!=b||f()});var b=this,j=function(){b.host.unbind("appearanceChanged"),c[0].innerHTML="",c.removeClass("idd-legend-item")};return{name:d,legend:{thumbnail:void 0,content:e},onLegendRemove:j}}}b.PlotRegistry.fallback={initialize:function(b,d,e){var f=a("<div></div>").attr("data-idd-name",b.displayName).appendTo(e.host),g=new c(f,e.master);return e.addChild(g),[g]},draw:function(a,b){var c={kind:b.kind,error:b.error};a[0].draw(c)}},b.FallbackPlot=c,c.prototype=new b.CanvasPlot}(f||(f={}));var f;!function(b){b.PlotRegistry.heatmap={initialize:function(c,d,e){var f=a("<div></div>").attr("data-idd-name",c.displayName).appendTo(e.host),g=new b.Heatmap(f,e.master);e.addChild(g);var h=[g];return h},draw:function(a,b){var c=b;a[0].draw(c,c.titles)}}}(f||(f={}));var f;!function(b){b.PlotRegistry.line={initialize:function(c,d,e){var f=a("<div></div>").attr("data-idd-name",c.displayName).appendTo(e.host),g=new b.Polyline(f,e.master);return e.addChild(g),[g]},draw:function(a,b){var c=a[0],d=b;c.draw(d)}}}(f||(f={}));var f;!function(b){b.PlotRegistry.markers={initialize:function(c,d,e){var f=a("<div></div>").attr("data-idd-name",c.displayName).appendTo(e.host),g=new b.Markers(f,e.master);return e.addChild(g),[g]},draw:function(a,b){var c=b;a[0].draw(c,c.titles)}}}(f||(f={}));var g;return function(a){function b(a){var b=a;return b.kind="line",b}function c(a){var b=a;return b.kind="area",b}function d(a){var b=a;return b.kind="markers",b.shape="boxwhisker",b}function e(a){var b=a;return b.kind="markers",b}function f(a){var b=a;return b.kind="heatmap",b}var g;!function(a){a.Box="box",a.Circle="circle",a.Diamond="diamond",a.Cross="cross",a.Triangle="triangle"}(g=a.MarkerShape||(a.MarkerShape={}));var h;!function(a){a.Gradient="gradient",a.Discrete="discrete"}(h=a.HeatmapRenderType||(a.HeatmapRenderType={}));var i;!function(a){a.Function="function",a.Trajectory="trajectory"}(i=a.LineTreatAs||(a.LineTreatAs={})),a.line=b,a.area=c,a.boxplot=d,a.markers=e,a.heatmap=f}(g||(g={})),function(a){if(c){var b=function(){function a(){var a={},b=function(b,c,d,e,f){var g=b.getAttribute("data-idd-plot")||b.parentElement.getAttribute("data-idd-plot");if(!a.hasOwnProperty(g))throw new Error("There is no bindings registered for "+g+" plot");a[g](b,c,d,e,f)};this.registerPlotBinding=function(d,e,f){a[d]=e,f.forEach(function(a){c.bindingHandlers[a]={update:b}})}}return a}();a.KnockoutBindings=new b,c.bindingHandlers.iddPlotName={update:function(a,b,d,e,f){var g=b(),h=c.unwrap(g),i=a.getAttribute("data-idd-plot");null!=i&&("undefined"!=typeof a.plot?a.plot.name=h:a.setAttribute("data-idd-name",h))}}}else console.log("Knockout was no found, please load Knockout first")}(f||(f={})),function(a){if(c){var b=function(a,b,d,e,f){var g={};if(!d.has("iddX"))throw new Error("Please define iddX binding for marker plot");g.x=c.unwrap(d.get("iddX"));var h=g.x.length;if(d.has("iddShape")&&(g.shape=c.unwrap(d.get("iddShape"))),"boxwhisker"==g.shape){if(d.has("iddSize")&&(g.size=c.unwrap(d.get("iddSize")),g.size.constructor===Array&&(console.warn("Ignoring markers (boxwhisker) iddSize binding. It must be number, not an array!"),delete g.size)),d.has("iddColor")&&(g.color=c.unwrap(d.get("iddColor")),g.color.constructor===Array&&(console.warn("Ignoring markers (boxwhisker) iddColor binding. It must be string, not an array!"),delete g.color)),d.has("iddBorder")&&(g.border=c.unwrap(d.get("iddBorder")),g.border.constructor===Array&&(console.warn("Ignoring markers (boxwhisker) iddBorder binding. It must be string, not an array!"),delete g.border)),!d.has("iddYMedian"))throw new Error('Please define iddYMedian binding for "boxwhisker" marker shape');if(g.y={median:c.unwrap(d.get("iddYMedian"))},g.y.median.length!=h)return;if(d.has("iddLower68")&&d.has("iddLower68")&&(g.y.lower68=c.unwrap(d.get("iddLower68")),g.y.upper68=c.unwrap(d.get("iddUpper68")),g.y.lower68.length!=h||g.y.upper68.length!=h))return;if(d.has("iddUpper95")&&d.has("iddLower95")&&(g.y.upper95=c.unwrap(d.get("iddUpper95")),g.y.lower95=c.unwrap(d.get("iddLower95")),g.y.lower95.length!=h||g.y.upper95.length!=h))return}else if("petals"==g.shape){if(!(d.has("iddY")&&d.has("iddUpper95")&&d.has("iddLower95")))throw new Error('Please define iddY, iddLower95, iddUpper95 bindings for "petals" marker shape');if(g.y=c.unwrap(d.get("iddY")),g.size={},g.size.upper95=c.unwrap(d.get("iddUpper95")),g.size.lower95=c.unwrap(d.get("iddLower95")),g.size.lower95.length!=h||g.size.upper95.length!=h||g.y.length!=h)return}else if("bulleye"==g.shape){if(!(d.has("iddY")&&d.has("iddUpper95")&&d.has("iddLower95")))throw new Error('Please define iddY, iddLower95, iddUpper95 bindings for "bulleye" marker shape');if(d.has("iddSize")&&(g.size=c.unwrap(d.get("iddSize")),g.size.constructor===Array&&(console.warn("Ignoring markers (bulleye) iddSize binding. It must be number, not an array!"),delete g.size)),g.y=c.unwrap(d.get("iddY")),g.color={},g.color.upper95=c.unwrap(d.get("iddUpper95")),g.color.lower95=c.unwrap(d.get("iddLower95")),g.color.lower95.length!=h||g.color.upper95.length!=h||g.y.length!=h)return}else{if(d.has("iddY")&&(g.y=c.unwrap(d.get("iddY"))),g.x&&g.y&&g.x.length!==g.y.length)return;var i;d.has("iddSize")&&(g.size=c.unwrap(d.get("iddSize"))),d.has("iddBorder")&&(g.border=c.unwrap(d.get("iddBorder"))),d.has("iddColor")&&(g.color=c.unwrap(d.get("iddColor"))),d.has("iddColorPalette")&&(g.colorPalette=c.unwrap(d.get("iddColorPalette"))),d.has("iddBarWidth")&&(g.barWidth=c.unwrap(d.get("iddBarWidth"))),d.has("iddShadow")&&(g.shadow=c.unwrap(d.get("iddShadow"))),d.has("iddLabelPlacement")&&(g.placement=c.unwrap(d.get("iddLabelPlacement"))),d.has("iddCustomShape")&&(i=c.unwrap(d.get("iddCustomShape")))}var j=a.getAttribute("data-idd-plot");if(null!=j)if("undefined"!=typeof a.plot){if(i)for(var k in i)g[k]=c.unwrap(i[k]);a.plot.draw(g)}else a.setAttribute("data-idd-datasource",JSON.stringify(g))};a.KnockoutBindings.registerPlotBinding("markers",b,["iddX","iddY","iddYMedian","iddMedian","iddLower68","iddUpper68","iddLower95","iddUpper95","iddShape","iddSize","iddBorder","iddColor","iddColorPalette","iddBarWidth","iddShadow","iddCustomShape","iddLabelPlacement"])}else console.log("Knockout was no found, please load Knockout first")}(f||(f={})),function(a){if(c){var b=function(a,b,d,e,f){var g={};if(d.has("iddY"))g.y=c.unwrap(d.get("iddY"));else{if(!d.has("iddYMedian"))throw new Error("Please define iddY or iddYMedian binding along with iddX");g.y={median:c.unwrap(d.get("iddYMedian"))},d.has("iddLower68")&&(g.y.lower68=c.unwrap(d.get("iddLower68"))),d.has("iddUpper68")&&(g.y.upper68=c.unwrap(d.get("iddUpper68"))),d.has("iddUpper95")&&(g.y.upper95=c.unwrap(d.get("iddUpper95"))),d.has("iddLower95")&&(g.y.lower95=c.unwrap(d.get("iddLower95")))}if(!d.has("iddX"))throw new Error("Please define iddX binding along with iddY");g.x=c.unwrap(d.get("iddX"));var h;if(!Array.isArray(g.x))throw new Error("iddX is not array");if(h=g.x.length,Array.isArray(g.y)){if(g.y.length!==h)return}else if(Array.isArray(g.y.median)){if(g.y.median.length!==h)return;if(Array.isArray(g.y.lower68)&&g.y.lower68.length!==h)return;if(Array.isArray(g.y.upper68)&&g.y.upper68.length!==h)return;if(Array.isArray(g.y.lower95)&&g.y.lower95.length!==h)return;if(Array.isArray(g.y.upper95)&&g.y.upper95.length!==h)return}d.has("iddStroke")&&(g.stroke=c.unwrap(d.get("iddStroke"))),d.has("iddThickness")&&(g.thickness=c.unwrap(d.get("iddThickness"))),d.has("iddLineCap")&&(g.lineCap=c.unwrap(d.get("iddLineCap"))),d.has("iddLineJoin")&&(g.lineJoin=c.unwrap(d.get("iddLineJoin"))),d.has("iddFill68")&&(g.fill68=c.unwrap(d.get("iddFill68"))),d.has("iddFill95")&&(g.fill95=c.unwrap(d.get("iddFill95")));var i=a.getAttribute("data-idd-plot");null!=i&&("undefined"!=typeof a.plot?a.plot.draw(g):a.setAttribute("data-idd-datasource",JSON.stringify(g)))};a.KnockoutBindings.registerPlotBinding("polyline",b,["iddX","iddY","iddYMedian","iddLower68","iddUpper68","iddLower95","iddUpeer95","iddFill68","iddFill95","iddStroke","iddThickness","iddLineCap","iddLineJoin"])}else console.log("Knockout was no found, please load Knockout first")}(f||(f={})),function(a){if(c){var b=function(a,b,d,e,f){var g,h,i,j;if(!d.has("iddY"))throw new Error("Please define iddY binding along with iddX");if(h=c.unwrap(d.get("iddY")),!d.has("iddX"))throw new Error("Please define iddX binding along with iddY");if(g=c.unwrap(d.get("iddX")),d.has("iddWidth")&&(i=c.unwrap(d.get("iddWidth"))),d.has("iddHeight")&&(j=c.unwrap(d.get("iddHeight"))),"undefined"!=typeof a.parentElement.plot){var k=a.parentElement.plot;if("undefined"!=typeof k.domElements){var l=k.domElements,m=!1;m=l.some(function(b){return b[0]===a}),m?k.set(a,g,h,i,j,.5,1):k.add(a,"none",g,h,i,j,.5,1)}}};a.KnockoutBindings.registerPlotBinding("dom",b,["iddX","iddY","iddWidth","iddHeight"])}else console.log("Knockout was no found, please load Knockout first")}(f||(f={})),function(a){if(c){var b=function(a,b,d,e,f){var g={};if(!d.has("iddY1"))throw new Error("Please define iddY1 and iddY2 bindings along with iddX");if(g.y1=c.unwrap(d.get("iddY1")),!d.has("iddY2"))throw new Error("Please define iddY1 and iddY2 bindings along with iddX");if(g.y2=c.unwrap(d.get("iddY2")),!d.has("iddX"))throw new Error("Please define iddX binding along with iddY1 and iddY2");g.x=c.unwrap(d.get("iddX"));var h;if(!Array.isArray(g.x))throw new Error("iddX is not an array");if(h=g.x.length,!(Array.isArray(g.y1)&&g.y1.length!==h||Array.isArray(g.y2)&&g.y2.length!==h)){d.has("iddFill")&&(g.fill=c.unwrap(d.get("iddFill")));var i=a.getAttribute("data-idd-plot");null!=i&&("undefined"!=typeof a.plot?a.plot.draw(g):a.setAttribute("data-idd-datasource",JSON.stringify(g)))}};a.KnockoutBindings.registerPlotBinding("area",b,["iddX","iddY1","iddY2","iddFill"])}else console.log("Knockout was no found, please load Knockout first")}(f||(f={})),function(a){if(c){var b=function(a,b,d,e,f){var g={};if(!d.has("iddX"))throw new Error("Please define iddX and iddY");if(g.x=c.unwrap(d.get("iddX")),!d.has("iddY"))throw new Error("Please define iddX and iddY");if(g.y=c.unwrap(d.get("iddY")),!d.has("iddValues"))throw new Error("Please define iddValues binding along with iddX and iddY");g.values=c.unwrap(d.get("iddValues"));var h=g.x.length,i=g.y.length;if(!(g.values.length!==h||!Array.isArray(g.values[0])||g.values[0].length!==i||h<2||i<2)){d.has("iddInterval")&&(g.interval=c.unwrap(d.get("iddInterval"))),d.has("iddColorPalette")&&(g.colorPalette=c.unwrap(d.get("iddColorPalette"))),d.has("iddOpacity")&&(g.opacity=c.unwrap(d.get("iddOpacity")));var j=a.getAttribute("data-idd-plot");if(null!=j)if("undefined"!=typeof a.plot)a.plot.draw(g);else{var k="(function(){return "+JSON.stringify(g)+"})";a.setAttribute("data-idd-datasource",k)}}};a.KnockoutBindings.registerPlotBinding("heatmap",b,["iddX","iddY","iddValues","iddOpacity","iddColorPalette","iddInterval"])}else console.log("Knockout was no found, please load Knockout first")}(f||(f={})),function(a){if(c){var b=function(a,b,d,e,f){var g=[],h=[],i=[],j=[];if(!d.has("iddX"))throw new Error("Please define iddX and iddY");if(h=c.unwrap(d.get("iddX")),!d.has("iddY"))throw new Error("Please define iddX and iddY");if(i=c.unwrap(d.get("iddY")),!d.has("iddLabelsText"))throw new Error("Please define iddLabelsText binding along with iddX and iddY");if(j=c.unwrap(d.get("iddLabelsText")),h.length==i.length&&h.length==j.length){for(var k=0;k<h.length;k++)g.push({text:j[k],position:{x:h[k],y:i[k]}});var l=a.getAttribute("data-idd-plot");null!=l&&("undefined"!=typeof a.plot?a.plot.draw(g):a.setAttribute("data-idd-datasource",JSON.stringify(g)))}};a.KnockoutBindings.registerPlotBinding("label",b,["iddX","iddY","iddLabelsText"])}else console.log("Knockout was no found, please load Knockout first")}(f||(f={})),f}!function(){if(window.define)define(["jquery","rx","knockout"],function(a,b,c){var d=IDD(a,b,c);return d});else{var a=IDD($,Rx,ko);window.InteractiveDataDisplay=a}}();
//# sourceMappingURL=idd_knockout.min.js.map